<!DOCTYPE html>
<html lang="en">
  <head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-593498H');</script>
<!-- End Google Tag Manager -->

    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">

    <meta name="msapplication-config" content="/microsoft-tile.xml" />
    <meta name="theme-color" content="#ffffff">

    <meta property="og:url" content="https://bejoycalias.github.io/blogsataws/secblogs1.html" />
    <meta property="og:site_name" content="Bejoy's TechNotes"/>
    <meta property="og:title" content="Bejoy's TechNotes - Kindle Friendly AWS Security Blogs" />
    <meta property="og:image" content="https://bejoycalias.github.io/assets/images/og-image.png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="1200"/>
    <meta property="og:description" content="" />

    <title>Bejoy's TechNotes - Kindle Friendly AWS Security Blogs</title>
    <link href="../assets/stylesheets/application-832aa42c.css" rel="stylesheet" />

    <!--[if lt IE 9]>
      <script src="../assets/javascripts/ie-compat-c141a02d.js"></script>
    <![endif]-->
    <script src="../assets/javascripts/application-ff53d307.js"></script>

    <!-- Typekit script to import Klavika font -->
    <script src="https://use.typekit.net/wxf7mfi.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-100043608-1', 'auto');
  ga('send', 'pageview');

</script>

    
  </head>

  <body id="uh-oh-" class="layout-inner page-uh-oh-">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-593498H"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


    <div id="header" class="navigation navbar-static-top hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <div class="navbar-header">
              <div class="navbar-brand">
                <a href="/">
                  <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="135.000000pt" height="50" viewbox="0 0 135.000000 45.000000" preserveaspectratio="xMidYMid meet" class="logo">

<g transform="translate(0.000000,45.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
<path class="text" fill="#000000" d="M527 384 c-4 -4 -7 -18 -7 -31 0 -21 4 -24 28 -21 21 2 27 8 27 28 0
18 -6 26 -20 28 -12 2 -24 0 -28 -4z"></path>
<path class="text" fill="#000000" d="M1080 335 c0 -48 2 -55 20 -55 18 0 20 7 20 55 0 48 -2 55 -20 55
-18 0 -20 -7 -20 -55z"></path>
<path class="text" fill="#000000" d="M54 357 c-2 -7 -3 -69 -2 -138 l3 -124 65 -3 c90 -3 130 20 130 77 0
29 -6 44 -20 54 -20 14 -20 15 -3 45 14 25 15 34 5 56 -6 15 -23 31 -38 36
-38 15 -134 13 -140 -3z m110 -33 c19 -7 21 -45 4 -62 -7 -7 -22 -12 -35 -12
-20 0 -23 5 -23 40 0 41 13 50 54 34z m20 -130 c19 -18 19 -20 6 -45 -8 -13
-21 -19 -45 -19 -34 0 -35 1 -35 40 0 38 2 40 29 40 16 0 37 -7 45 -16z"></path>
<path class="text" fill="#000000" d="M319 271 c-23 -24 -29 -38 -29 -74 0 -25 3 -53 6 -62 20 -50 164 -64
164 -15 0 15 -7 17 -45 12 -46 -5 -75 8 -75 34 0 11 16 14 65 14 l65 0 0 35
c0 80 -92 114 -151 56z m99 -33 c3 -15 -4 -18 -37 -18 -43 0 -50 7 -29 28 18
18 62 11 66 -10z"></path>
<path class="text" fill="#000000" d="M520 184 c0 -107 -1 -116 -20 -121 -11 -3 -20 -12 -20 -19 0 -21 76
-19 84 2 3 9 6 69 6 135 l0 119 -25 0 -25 0 0 -116z"></path>
<path class="text" fill="#000000" d="M649 271 c-24 -25 -29 -37 -29 -78 1 -70 34 -103 105 -103 55 0 95
44 95 103 0 60 -7 75 -41 92 -47 25 -96 19 -130 -14z m111 -30 c25 -48 2 -111
-40 -111 -45 0 -69 80 -34 114 21 22 61 20 74 -3z"></path>
<path class="text" fill="#000000" d="M850 287 c0 -8 16 -57 36 -110 28 -76 33 -100 25 -116 -16 -28 -14
-31 18 -31 27 0 29 4 70 123 23 67 41 128 41 135 0 6 -11 12 -24 12 -21 0 -26
-8 -41 -65 -10 -36 -21 -68 -25 -70 -3 -2 -16 27 -29 66 -19 60 -25 69 -47 69
-13 0 -24 -6 -24 -13z"></path>
<path class="text" fill="#000000" d="M1192 284 c-17 -12 -22 -24 -20 -47 2 -26 10 -36 45 -52 49 -23 59
-55 17 -55 -14 0 -34 5 -45 10 -16 9 -19 7 -19 -13 0 -17 7 -27 23 -31 69 -18
117 6 117 60 0 32 -4 37 -45 55 -60 26 -62 54 -4 46 37 -5 40 -3 37 16 -2 18
-11 23 -43 25 -25 2 -49 -3 -63 -14z"></path>
</g>
</svg>

                </a>
              </div>
              <button class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="buttons hidden-xs">
              <nav class="navigation-links" role="navigation">
                <ul class="main-links nav navbar-nav navbar-right">
                  <li><a href="../aws.html">AWS</a></li>
                  <li><a href="../linux.html">Linux</a></li>
                  <li><a href="../docker.html">Docker</a></li>
                  <li><a href="../ibmpower.html">IBM Power</a></li>
                  <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sidebar-overlay"></div>

<aside class="sidebar" role="navigation">
  <div class="sidebar-header">
    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="135.000000pt" height="42" viewbox="0 0 135.000000 45.000000" preserveaspectratio="xMidYMid meet">

<g transform="translate(0.000000,45.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
<path class="text" fill="#000000" d="M527 384 c-4 -4 -7 -18 -7 -31 0 -21 4 -24 28 -21 21 2 27 8 27 28 0
18 -6 26 -20 28 -12 2 -24 0 -28 -4z"></path>
<path class="text" fill="#000000" d="M1080 335 c0 -48 2 -55 20 -55 18 0 20 7 20 55 0 48 -2 55 -20 55
-18 0 -20 -7 -20 -55z"></path>
<path class="text" fill="#000000" d="M54 357 c-2 -7 -3 -69 -2 -138 l3 -124 65 -3 c90 -3 130 20 130 77 0
29 -6 44 -20 54 -20 14 -20 15 -3 45 14 25 15 34 5 56 -6 15 -23 31 -38 36
-38 15 -134 13 -140 -3z m110 -33 c19 -7 21 -45 4 -62 -7 -7 -22 -12 -35 -12
-20 0 -23 5 -23 40 0 41 13 50 54 34z m20 -130 c19 -18 19 -20 6 -45 -8 -13
-21 -19 -45 -19 -34 0 -35 1 -35 40 0 38 2 40 29 40 16 0 37 -7 45 -16z"></path>
<path class="text" fill="#000000" d="M319 271 c-23 -24 -29 -38 -29 -74 0 -25 3 -53 6 -62 20 -50 164 -64
164 -15 0 15 -7 17 -45 12 -46 -5 -75 8 -75 34 0 11 16 14 65 14 l65 0 0 35
c0 80 -92 114 -151 56z m99 -33 c3 -15 -4 -18 -37 -18 -43 0 -50 7 -29 28 18
18 62 11 66 -10z"></path>
<path class="text" fill="#000000" d="M520 184 c0 -107 -1 -116 -20 -121 -11 -3 -20 -12 -20 -19 0 -21 76
-19 84 2 3 9 6 69 6 135 l0 119 -25 0 -25 0 0 -116z"></path>
<path class="text" fill="#000000" d="M649 271 c-24 -25 -29 -37 -29 -78 1 -70 34 -103 105 -103 55 0 95
44 95 103 0 60 -7 75 -41 92 -47 25 -96 19 -130 -14z m111 -30 c25 -48 2 -111
-40 -111 -45 0 -69 80 -34 114 21 22 61 20 74 -3z"></path>
<path class="text" fill="#000000" d="M850 287 c0 -8 16 -57 36 -110 28 -76 33 -100 25 -116 -16 -28 -14
-31 18 -31 27 0 29 4 70 123 23 67 41 128 41 135 0 6 -11 12 -24 12 -21 0 -26
-8 -41 -65 -10 -36 -21 -68 -25 -70 -3 -2 -16 27 -29 66 -19 60 -25 69 -47 69
-13 0 -24 -6 -24 -13z"></path>
<path class="text" fill="#000000" d="M1192 284 c-17 -12 -22 -24 -20 -47 2 -26 10 -36 45 -52 49 -23 59
-55 17 -55 -14 0 -34 5 -45 10 -16 9 -19 7 -19 -13 0 -17 7 -27 23 -31 69 -18
117 6 117 60 0 32 -4 37 -45 55 -60 26 -62 54 -4 46 37 -5 40 -3 37 16 -2 18
-11 23 -43 25 -25 2 -49 -3 -63 -14z"></path>
</g>
</svg>

  </div>

  <ul class="nav sidebar-nav">
    <li><a href="../aws.html">AWS</a></li>
    <li><a href="../linux.html">Linux</a></li>
    <li><a href="../docker.html">Docker</a></li>
    <li><a href="../ibmpower.html">IBM Power</a></li>
    <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
  </ul>
</aside>


    <div class="container">
  <div class="row">
    <div id="docs-sidebar" class="col-sm-3 col-md-3 col-xs-12 hidden-print" role="complementary">
      <ul class="nav docs-sidenav">
      <li><a href="blogsataws1.html">Blogs @ AWS</a></li>
      <li><a href="whatsnew1.html">What's New @ AWS</a></li>
      <li><a href="mgmtblogs1.html">Management Tools Blogs @ AWS</a></li>
      <li><a href="computeblogs1.html">Compute Blogs @ AWS</a></li>
      <li><a href="devopsblogs1.html">DevOps Blogs @ AWS</a></li>
      <li class="active"><a href="secblogs1.html">Security Blogs @ AWS</a></li>
      <li><a href="apnblogs1.html">APN Blogs @ AWS</a></li>

    </ul>
    </div>

    <div id="inner" class="col-sm-9 col-md-9 col-xs-12" role="main">
<p></p>
<p><i>Contents of this page is copied directly from AWS blog sites to make it Kindle friendly. Some styles & sections from these pages are removed to render this properly in 'Article Mode' of Kindle e-Reader browser. All the contents of this page is property of AWS.</i></p>
<p><a href="secblogs1.html">Page 1</a>|<a href="secblogs2.html">Page 2</a>|<a href="secblogs3.html">Page 3</a>|<a href="secblogs4.html">Page 4</a></p>
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/19/KMS_feature.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Encrypt Amazon S3 Objects with the AWS SDK for Ruby</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Doug Schwartz</span></span> | on 
<time property="datePublished" datetime="2017-12-27T10:24:07+00:00">27 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/storage/amazon-simple-storage-services-s3/" title="View all posts in Amazon Simple Storage Services (S3)*"><span property="articleSection">Amazon Simple Storage Services (S3)*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-encrypt-amazon-s3-objects-with-the-aws-sdk-for-ruby/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6956" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6956&amp;disqus_title=How+to+Encrypt+Amazon+S3+Objects+with+the+AWS+SDK+for+Ruby&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-encrypt-amazon-s3-objects-with-the-aws-sdk-for-ruby/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6956');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/19/KMS_feature.png" /></p> 
<p>Recently, Amazon announced some <a href="https://aws.amazon.com/blogs/aws/new-amazon-s3-encryption-security-features/" target="_blank" rel="noopener noreferrer">new Amazon S3 encryption and security features</a>. The AWS Blog post showed how to use the <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a> console to take advantage of these new features. However, if you have a large number of Amazon S3 buckets, using the console to implement these features could take hours, if not days. As an alternative, I created documentation topics in the <a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/welcome.html" target="_blank" rel="noopener noreferrer">AWS SDK for Ruby Developer Guide</a> that include code examples showing you how to use the new Amazon S3 encryption features using the <a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/api/index.html" target="_blank" rel="noopener noreferrer">AWS SDK for Ruby</a>.</p> 
<h3>What are my encryption options?</h3> 
<p>You can encrypt Amazon S3 <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingObjects.html" target="_blank" rel="noopener noreferrer">bucket objects</a> on a server or on a client:</p> 
<li><strong>When you encrypt objects on a server</strong>, you request that Amazon S3 encrypt the objects before saving them to disk in data centers and decrypt the objects when you download them. The main advantage of this approach is that Amazon S3 manages the entire encryption process.</li> 
<li><strong>When you encrypt objects on a client</strong>, you encrypt the objects before you upload them to Amazon S3. In this case, you manage the encryption process, the encryption keys, and related tools. Use this option when: 
<li>Company policy and standards require it.</li> 
<li>You already have a development process in place that meets your needs.</li> 
</ul> <p>Encrypting on the client has always been available, but you should know the following points:</p> 
<li>You must be diligent about protecting your encryption keys, which is analogous to having a burglar-proof lock on your front door. If you leave a key under the mat, your security is compromised.</li> 
<li>If you lose your encryption keys, you won’t be able to decrypt your data.</li> 
</ul> <p>If you encrypt objects on the client, we strongly recommend that you use an <a href="https://aws.amazon.com/kms/" target="_blank" rel="noopener noreferrer">AWS Key Management Service</a> (AWS KMS) managed customer master key (CMK)</p></li> 
<b>How to use encryption on a server</b> 
<p>You can specify that Amazon S3 automatically encrypts objects as you upload them to a bucket or require that objects uploaded to an Amazon S3 bucket include encryption on a server before they are uploaded to an Amazon S3 bucket.</p> 
<p>The advantage of these settings is that when you specify them, you ensure that objects uploaded to Amazon S3 are encrypted. Alternatively, you can have Amazon S3 encrypt individual objects on the server as you upload them to a bucket or encrypt them on the server with your own key as you upload them to a bucket.</p> 
<p>The AWS SDK for Ruby Developer Guide now contains the following topics that explain your encryption options on a server:</p> 
<li><a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-default-server-side-encryption.html" target="_blank" rel="noopener noreferrer">Setting Default Server-Side Encryption for an Amazon S3 Bucket</a> – Describes how to specify that objects uploaded to a bucket are automatically encrypted by Amazon S3.</li> 
<li><a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-server-side-encryption.html" target="_blank" rel="noopener noreferrer">Encrypting an Amazon S3 Bucket Object on the Server</a> – Describes how to have Amazon S3 encrypt an object when it’s uploaded to a bucket.</li> 
<li><a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-enforce-server-side-encryption.html" target="_blank" rel="noopener noreferrer">Requiring Encryption on the Server to Upload Amazon S3 Bucket Objects</a> – Describes how to require objects uploaded to a bucket be encrypted by Amazon S3 using a bucket policy.</li> 
<li><a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-server-side-encryption-with-user-managed-key.html" target="_blank" rel="noopener noreferrer">Encrypting an Amazon S3 Bucket Object with an AWS KMS Key</a> – Describes how to have Amazon S3 encrypt an object with a key that you provide when you upload the object to a bucket.</li> 
<b>How to use encryption on a client</b> 
<p>You can encrypt objects on a client before you upload them to a bucket and decrypt them after you download them from a bucket by using the <a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Encryption.html" target="_blank" rel="noopener noreferrer">Amazon S3 encryption client</a>.</p> 
<p>The AWS SDK for Ruby Developer Guide now contains the following topics that explain your encryption options on the client:</p> 
<li><a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-client-side-encryption-with-kms-master-key.html" target="_blank" rel="noopener noreferrer">Encrypting an Amazon S3 Bucket Object with an AWS KMS Key</a> and <a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-client-side-decrypt-item-with-kms-master-key.html" target="_blank" rel="noopener noreferrer">Decrypting an Amazon S3 Bucket Object with an AWS KMS Key</a> – Describe how to encrypt and decrypt an object with an AWS KMS managed CMK. CMKs are either customer managed or AWS managed. For more information, see <a href="http://docs.aws.amazon.com/kms/latest/developerguide/concepts.html" target="_blank" rel="noopener noreferrer">AWS Key Management Service Concepts</a>.</li> 
<li><a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-client-side-encryption-with-public-key.html" target="_blank" rel="noopener noreferrer">Encrypting an Amazon S3 Bucket Object with a Public Key</a> and <a href="http://docs.aws.amazon.com/sdk-for-ruby/v3/developer-guide/s3-example-client-side-decrypt-item-with-private-key.html" target="_blank" rel="noopener noreferrer">Decrypting an Amazon S3 Bucket Object with a Private Key</a> – Describe how to encrypt and decrypt an object with a public/private RSA key. Public keys can be distributed to others so that they can encrypt data; however, only those in possession of a private key can decrypt that data. For more information, see <a href="http://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL/PKey.html" target="_blank" rel="noopener noreferrer">OpenSSL::PKey</a>.</li> 
<p><strong>Note: </strong>The Amazon S3 encryption client in the AWS SDK for Ruby is compatible with other Amazon S3 encryption clients, but it is not compatible with other AWS client-side encryption libraries, including the <a href="http://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/introduction.html" target="_blank" rel="noopener noreferrer">AWS Encryption SDK</a> and the <a href="http://github.com/awslabs/aws-dynamodb-encryption-java" target="_blank" rel="noopener noreferrer">Amazon DynamoDB encryption client for Java</a>. Each library returns a different ciphertext (“encrypted message”) format, so you can’t use one library to encrypt objects and a different library to decrypt them. For more information, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryption.html" target="_blank" rel="noopener noreferrer">Protecting Data Using Client-Side Encryption</a>.</p> 
<p>If you have comments about this blog post, submit them in the “Comments” section below. If you have questions about encrypting objects on servers and clients, start a new thread on the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=24" target="_blank" rel="noopener noreferrer">Amazon S3 forum</a> or <a href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
<p>– Doug</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6956');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/26/ISO_gen.png" /> 
<b class="lb-b blog-post-title" property="name headline">AWS Updated Its ISO Certifications and Now Has 67 Services Under ISO Compliance</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Chad Woolf</span></span> | on 
<time property="datePublished" datetime="2017-12-20T08:53:12+00:00">20 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/aws-updated-its-iso-certifications-and-now-has-67-services-under-iso-compliance/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6971" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6971&amp;disqus_title=AWS+Updated+Its+ISO+Certifications+and+Now+Has+67+Services+Under+ISO+Compliance&amp;disqus_url=https://aws.amazon.com/blogs/security/aws-updated-its-iso-certifications-and-now-has-67-services-under-iso-compliance/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6971');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/26/ISO_gen.png" /></p> 
<p>AWS has updated its certifications against <a href="https://aws.amazon.com/compliance/iso-9001-faqs/" target="_blank" rel="noopener noreferrer">ISO 9001</a>, <a href="https://aws.amazon.com/compliance/iso-27001-faqs/" target="_blank" rel="noopener noreferrer">ISO 27001</a>, <a href="https://aws.amazon.com/compliance/iso-27017-faqs/" target="_blank" rel="noopener noreferrer">ISO 27017</a>, and <a href="https://aws.amazon.com/compliance/iso-27018-faqs/" target="_blank" rel="noopener noreferrer">ISO 27018</a> standards, bringing the total to 67 services now under ISO compliance. We added the following 29 services this cycle:</p> 
<table style="height: 366px" width="1200;" cellspacing="0;" cellpadding="0;"> 
<tbody> 
<tr> 
<td>• <a href="https://aws.amazon.com/rds/aurora/" target="_blank" rel="noopener noreferrer">Amazon Aurora</a></td> 
<td>• <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/transfer-acceleration.html" target="_blank" rel="noopener noreferrer">Amazon S3 Transfer Acceleration</a></td> 
<td>• <a href="https://aws.amazon.com/lambda/edge/" target="_blank" rel="noopener noreferrer">AWS Lambda@Edge</a></td> 
</tr> 
<tr> 
<td>• <a href="https://aws.amazon.com/cloud-directory/" target="_blank" rel="noopener noreferrer">Amazon Cloud Directory</a></td> 
<td>• <a href="https://aws.amazon.com/sagemaker/" target="_blank" rel="noopener noreferrer">Amazon SageMaker</a></td> 
<td>• <a href="https://aws.amazon.com/managed-services/" target="_blank" rel="noopener noreferrer">AWS Managed Services</a></td> 
</tr> 
<tr> 
<td>• <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html" target="_blank" rel="noopener noreferrer">Amazon CloudWatch Logs</a></td> 
<td>• <a href="https://aws.amazon.com/sns/" target="_blank" rel="noopener noreferrer">Amazon Simple Notification Service</a></td> 
<td>• <a href="https://aws.amazon.com/opsworks/stacks/" target="_blank" rel="noopener noreferrer">AWS OpsWorks Stacks</a></td> 
</tr> 
<tr> 
<td>• <a href="https://aws.amazon.com/cognito/" target="_blank" rel="noopener noreferrer">Amazon Cognito</a></td> 
<td>• <a href="https://aws.amazon.com/autoscaling/" target="_blank" rel="noopener noreferrer">Auto Scaling</a></td> 
<td>• <a href="https://aws.amazon.com/shield/" target="_blank" rel="noopener noreferrer">AWS Shield</a></td> 
</tr> 
<tr> 
<td>• <a href="https://aws.amazon.com/connect/" target="_blank" rel="noopener noreferrer">Amazon Connect</a></td> 
<td>• <a href="https://aws.amazon.com/batch/" target="_blank" rel="noopener noreferrer">AWS Batch</a></td> 
<td>• <a href="https://aws.amazon.com/snowball-edge/" target="_blank" rel="noopener noreferrer">AWS Snowball Edge</a></td> 
</tr> 
<tr> 
<td>• <a href="https://aws.amazon.com/ecr/" target="_blank" rel="noopener noreferrer">Amazon Elastic Container Registry</a></td> 
<td>• <a href="https://aws.amazon.com/codebuild/" target="_blank" rel="noopener noreferrer">AWS CodeBuild</a></td> 
<td>• <a href="https://aws.amazon.com/snowmobile/" target="_blank" rel="noopener noreferrer">AWS Snowmobile</a></td> 
</tr> 
<tr> 
<td>• <a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector</a></td> 
<td>• <a href="https://aws.amazon.com/codecommit/" target="_blank" rel="noopener noreferrer">AWS CodeCommit</a></td> 
<td>• <a href="https://aws.amazon.com/step-functions/" target="_blank" rel="noopener noreferrer">AWS Step Functions</a></td> 
</tr> 
<tr> 
<td>• <a href="https://aws.amazon.com/kinesis/data-streams/" target="_blank" rel="noopener noreferrer">Amazon Kinesis Data Streams</a></td> 
<td>• <a href="https://aws.amazon.com/codedeploy/" target="_blank" rel="noopener noreferrer">AWS CodeDeploy</a></td> 
<td>• <a href="https://aws.amazon.com/systems-manager/" target="_blank" rel="noopener noreferrer">AWS Systems Manager</a>&nbsp;(formerly Amazon EC2 Systems Manager)</td> 
</tr> 
<tr> 
<td>• <a href="https://aws.amazon.com/macie/" target="_blank" rel="noopener noreferrer">Amazon Macie</a></td> 
<td>• <a href="https://aws.amazon.com/codepipeline/" target="_blank" rel="noopener noreferrer">AWS CodePipeline</a></td> 
<td>• <a href="https://aws.amazon.com/xray/" target="_blank" rel="noopener noreferrer">AWS X-Ray</a></td> 
</tr> 
<tr> 
<td>• <a href="https://quicksight.aws/" target="_blank" rel="noopener noreferrer">Amazon QuickSight</a></td> 
<td>• <a href="https://aws.amazon.com/iot-core/" target="_blank" rel="noopener noreferrer">AWS IoT Core</a></td> 
<td></td> 
</tr> 
</tbody> 
</table> 
<p>For the complete list of services under ISO compliance, see <a href="https://aws.amazon.com/compliance/services-in-scope/" target="_blank" rel="noopener noreferrer">AWS Services in Scope by Compliance Program</a>.</p> 
<p>AWS maintains certifications through extensive audits of its controls to ensure that information security risks that affect the confidentiality, integrity, and availability of company and customer information are appropriately managed.</p> 
<p>You can download copies of the AWS ISO certificates that contain AWS’s in-scope services and Regions, and use these certificates to jump-start your own certification efforts:</p> 
<li><a href="https://d1.awsstatic.com/certifications/iso_9001_certification.pdf" target="_blank" rel="noopener noreferrer">AWS ISO 9001 certificate</a></li> 
<li><a href="https://d1.awsstatic.com/certifications/iso_27001_global_certification.pdf" target="_blank" rel="noopener noreferrer">AWS ISO 27001 certificate</a></li> 
<li><a href="https://d1.awsstatic.com/certifications/iso_27017_certification.pdf" target="_blank" rel="noopener noreferrer">AWS ISO 27017 certificate</a></li> 
<li><a href="https://d1.awsstatic.com/certifications/iso_27018_certification.pdf" target="_blank" rel="noopener noreferrer">AWS ISO 27018 certificate</a></li> 
<p>AWS does not increase service costs in any AWS Region as a result of updating its certifications.</p> 
<p>To learn more about compliance in the AWS Cloud, see&nbsp;<a href="https://aws.amazon.com/compliance/" target="_blank" rel="noopener noreferrer">AWS Cloud Compliance</a>.</p> 
<p>– Chad</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6971');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/15/KW_1217_diagram-1149x630.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Set Up Continuous Golden AMI Vulnerability Assessments with Amazon Inspector</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Kanchan Waikar</span></span> and 
<span property="author" typeof="Person"><span property="name">David Aiken</span></span> | on 
<time property="datePublished" datetime="2017-12-20T07:50:06+00:00">20 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/compute/amazon-ec2/" title="View all posts in Amazon EC2*"><span property="articleSection">Amazon EC2*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/amazon-inspector/" title="View all posts in Amazon Inspector*"><span property="articleSection">Amazon Inspector*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-set-up-continuous-golden-ami-vulnerability-assessments-with-amazon-inspector/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6930" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6930&amp;disqus_title=How+to+Set+Up+Continuous+Golden+AMI+Vulnerability+Assessments+with+Amazon+Inspector&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-set-up-continuous-golden-ami-vulnerability-assessments-with-amazon-inspector/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6930');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>As companies mature in their cloud journey, they implement layered security capabilities and practices in their cloud architectures. One such practice is to continually assess golden <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html" target="_blank" rel="noopener noreferrer">Amazon Machine Images</a> (AMIs) for security vulnerabilities. AMIs provide the information required to launch an <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Instances.html" target="_blank" rel="noopener noreferrer">Amazon EC2 instance</a>, which is a virtual server in the AWS Cloud. A <em>golden AMI</em> is an AMI that contains the latest security patches, software, configuration, and software agents that you need to install for logging, security maintenance, and performance monitoring. You can build and deploy golden AMIs in your environment, but the AMIs quickly become dated as new vulnerabilities are discovered.</p> 
<p>A security best practice is to perform routine vulnerability assessments of your golden AMIs to identify if newly found vulnerabilities apply to them. If you identify a vulnerability, you can update your golden AMIs with the appropriate security patches, test the AMIs, and deploy the patched AMIs in your environment. In this blog post, I demonstrate how to use <a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector</a> to set up such continuous vulnerability assessments to scan your golden AMIs routinely.</p> 
<h3>Solution overview</h3> 
<p>Amazon Inspector performs security assessments of <a href="https://aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">Amazon EC2</a> instances by using AWS managed <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_rule-packages.html#InspectorRulePackages" target="_blank" rel="noopener noreferrer">rules packages</a> such as the <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_cves.html" target="_blank" rel="noopener noreferrer">Common Vulnerabilities and Exposures</a> (CVEs) package. The solution in this post creates EC2 instances from golden AMIs and then runs an Amazon Inspector security assessment on the created instances. When the assessment results are available, the solution consolidates the findings and advises you about next steps. Furthermore, the solution schedules an <a href="https://aws.amazon.com/cloudwatch/" target="_blank" rel="noopener noreferrer">Amazon CloudWatch Events</a> rule to run the golden AMI vulnerability assessments on a regular basis.</p> 
<p>The following solution diagram illustrates how this solution works.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/15/KW_1217_diagram.png" /></p> 
<p>Here’s how this solution works, as illustrated in the preceding diagram:</p> 
<ol> 
<li>A scheduled CloudWatch Events event triggers the <code>StartContinuousAssessment</code> <a href="http://aws.amazon.com/lambda/" target="_blank" rel="noopener noreferrer">AWS Lambda</a> function, which starts the security assessment of your golden AMIs.</li> 
<li>The <code>StartContinuousAssessment</code> Lambda function performs the following actions: 
<ol type="A"> 
<li>It reads a JSON parameter stored in the <a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/what-is-systems-manager.html" target="_blank" rel="noopener noreferrer">AWS Systems Manager</a> (Systems Manager) Parameter Store. This JSON parameter contains the following metadata for each golden AMI: 
<ol type="i"> 
<li><code>InstanceType</code> – A valid instance-type for launching an EC2 instance of the golden AMI.</li> 
<li><code>Ami-Id</code> – The ID of the golden AMI.</li> 
<li><code>UserData</code> – An operating system–compatible <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html" target="_blank" rel="noopener noreferrer">user-data script</a> for installing the <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_agents.html" target="_blank" rel="noopener noreferrer">Amazon Inspector agent</a>.</li> 
</ol> </li> 
</ol> </li> 
</ol> 
<p style="padding-left: 90px">Later in this blog post, I provide instructions for creating this JSON parameter.</p> 
<ol> 
<li style="list-style-type: none"> 
<ol start="2" type="A"> 
<li>For each AMI specified in the JSON parameter, the Lambda function creates an EC2 instance. When each instance starts, it installs the Amazon Inspector agent by using the user-data script provided in the JSON. The Lambda function then copies each golden AMI’s <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html" target="_blank" rel="noopener noreferrer">tags</a> (you will assign custom metadata in the form of tags to each golden AMI when you set up the solution) to the corresponding EC2 instance. The function also adds a tag with the <code>key</code> of <code>continuous-assessment-instance</code> and <code>value</code> as <code>true</code>. This tag identifies EC2 instances that require regular security assessments. The Lambda function copies the AMI’s tags to the instance (and later, to the security findings found for the instance) to help you identify the golden AMIs for each security finding. After you analyze security findings, you can patch your golden AMIs.</li> 
<li>The first time the <code>StartContinuousAssessment</code> function runs, it creates: 
<ol type="i"> 
<li>An <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_applications.html" target="_blank" rel="noopener noreferrer">Amazon Inspector assessment target</a>: The target identifies EC2 instances to assess by using the <code>continuous-assessment-instance</code> tag.</li> 
<li>An <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_assessments.html#inspector-assessment-templates" target="_blank" rel="noopener noreferrer">Amazon Inspector assessment template</a>: The template contains a reference to the Amazon Inspector assessment target created in the preceding step and the following AWS managed rules packages to evaluate: 
<li><a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_cves.html" target="_blank" rel="noopener noreferrer">Common Vulnerabilities and Exposures</a> (CVEs)</li> 
<li><a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_cis.html" target="_blank" rel="noopener noreferrer">Center for Internet Security (CIS) Benchmarks</a></li> 
<li><a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_security-best-practices.html" target="_blank" rel="noopener noreferrer">AWS Security Best Practices</a></li> 
<li><a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_runtime-behavior-analysis.html" target="_blank" rel="noopener noreferrer">Runtime Behavior Analysis</a></li> 
</ul> </li> 
</ol> </li> 
</ol> <p style="padding-left: 80px">For subsequent assessments, the <code>StartContinuousAssessment</code> function reuses the target and the template created during the first run of <code>StartContinuousAssessment</code> function.</p> <p style="padding-left: 80px"><strong>Note: </strong>Amazon Inspector can start an assessment only after it finds at least one running Amazon Inspector agent. To allow EC2 instances to boot and the Amazon inspector agent to start, the Lambda function waits four minutes. Because the assessment runs for approximately one hour and boot time for EC2 instances typically takes a few minutes, all Amazon Inspector agents start before the assessment ends.</p> 
<ol> 
<li style="list-style-type: none"> 
<ol start="3"> 
<li>The Lambda function then runs the assessment. The Amazon Inspector agents collect behavior and configuration data, and pass it to Amazon Inspector. Amazon Inspector analyzes the data and generates <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_findings.html" target="_blank" rel="noopener noreferrer">Amazon Inspector findings</a>, which are possible security findings you may need to address.</li> 
<li>After the Lambda function completes the assessment, Amazon Inspector publishes an assessment-completion notification message to an <a href="https://aws.amazon.com/sns/" target="_blank" rel="noopener noreferrer">Amazon SNS</a> topic called <code>ContinuousAssessmentCompleteTopic</code>. SNS uses&nbsp;<em>topics</em>, which are communication channels for sending messages and subscribing to notifications.</li> 
<li>The notification message published to SNS triggers the <code>AnalyzeInspectorFindings</code> Lambda function, which performs the following actions: 
<ol type="A"> 
<li>Associates the tags of each EC2 instance with security findings found for that EC2 instance. This enables you to identify the security findings using the <code>app-name</code> tag you specified for your golden AMIs. You can use the information provided in the findings to patch your golden AMIs.</li> 
<li>Terminates all instances associated with the <code>continuous-assessment-instance=true</code> tag.</li> 
<li>Aggregates the number of findings found for each EC2 instance by severity and then publishes a consolidated result to an SNS topic called <code>ContinuousAssessmentResultsTopic</code>.</li> 
</ol> </li> 
</ol> </li> 
</ol> </li> 
</ol> 
<b>How to deploy the solution</b> 
<p>To deploy this solution, you must set it up in the AWS Region where you build your golden AMIs. If that AWS Region does not <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_supported_os_regions.html#inspector_supported-regions" target="_blank" rel="noopener noreferrer">support Amazon Inspector</a>, at the end of your continuous integration pipeline, you can copy your AMIs to an AWS Region where Amazon Inspector assessments are supported. To learn more about continuous integration pipelines, see <a href="https://aws.amazon.com/devops/continuous-integration/" target="_blank" rel="noopener noreferrer">What is Continuous Integration?</a></p> 
<p>To deploy continuous golden AMI vulnerability assessments in your AWS account, follow these steps:</p> 
<ol> 
<li><strong>Tag your golden AMIs</strong> – Tagging your golden AMIs lets you search assessment result findings based on tags after Amazon Inspector completes an assessment.</li> 
<li><strong>Store your golden AMI metadata in the Systems Manager Parameter Store</strong> – Prepare and store the golden AMI metadata in the Systems Manager Parameter Store. The <code>StartContinuousAssessment</code> Lambda function reads golden AMI metadata and starts assessing for vulnerabilities.</li> 
<li><strong>Run the supplied AWS CloudFormation template and subscribe to an SNS topic to receive assessment results</strong> – Set up the infrastructure required to run vulnerability assessments and subscribe to an SNS topic to receive assessment results via email.</li> 
<li><strong>Test golden AMI </strong><strong>vulnerability assessments</strong> – Ensure you have successfully set up the required resources to run vulnerability assessments.</li> 
<li><strong>Set up a CloudWatch Events rule for triggering continuous golden AMI vulnerability assessments</strong> – Schedule the execution of vulnerability assessments on a regular basis.</li> 
</ol> 
<h3>1.&nbsp; Tag your golden AMIs</h3> 
<p>You can search assessment findings based on golden AMI tags after Amazon Inspector completes an assessment.</p> 
<p>To tag a golden AMI by using the AWS Management Console:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and then navigate to the <a href="https://console.aws.amazon.com/ec2/v2/home" target="_blank" rel="noopener noreferrer">EC2 console</a>.</li> 
<li>In the navigation pane, choose&nbsp;<strong>AMIs</strong>.</li> 
<li>Choose your AMI from the list, and then choose&nbsp;<strong>Actions</strong> &gt;&nbsp;<strong>Add/Edit Tags</strong>.</li> 
<li>Choose<strong> Create Tag. </strong>In the <strong>Key</strong> column, type <code>app-name</code>. In the <strong>Value</strong> column, type your application name. Following the same steps, create the <code>app-version</code> and <code>app-environment</code>&nbsp;tags. Choose <strong>Save</strong>.</li> 
</ol> 
<p>Now that you have tagged your golden AMIs, you need to create golden AMI metadata, which will be read by the <code>StartContinuousAssessment</code> function to initiate vulnerability assessments. You will store the golden AMI metadata in the Systems Manager Parameter Store.</p> 
<h3>2.&nbsp; Store your golden AMI metadata in the Systems Manager Parameter Store</h3> 
<p>This solution reads golden AMI metadata from a parameter stored in the Systems Manager Parameter Store. The metadata must be in JSON format and must contain the following information for each golden AMI:</p> 
<li><code>Ami-Id</code></li> 
<li><code>InstanceType</code></li> 
<li><code>UserData</code></li> 
<p><strong>Step A:</strong> Find the AMI ID of your golden AMI.</p> 
<p>An AMI ID uniquely identifies an AMI in an AWS Region and is a required parameter for launching an EC2 instance from a golden AMI. To find the AMI ID of your golden AMI:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">EC2 console</a>.</li> 
<li>In the navigation pane, choose&nbsp;<strong>AMIs</strong>.</li> 
<li>Choose your AMI from the list and then note the corresponding value in the <strong>AMI ID</strong> column.</li> 
</ol> 
<p><strong>Step B: </strong>Find a compatible <code>InstanceType</code> for your golden AMI.</p> 
<p>Each AMI has a list of compatible <code>InstanceTypes</code>. The <code>InstanceType</code> is a required parameter for launching an EC2 instance from a golden AMI. To find a compatible <code>InstanceType</code> for your golden AMI:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">EC2 console</a>.</li> 
<li>Choose&nbsp;<strong>Launch Instance</strong>. On the&nbsp;<strong>Choose an Amazon Machine Image</strong> (<strong>AMI</strong>)&nbsp;page, choose <strong>My AMIs</strong>.</li> 
<li>Type the <strong>AMI ID</strong> that you noted in Step A in the <strong>Search my AMIs</strong> box, and then choose <strong>Enter</strong>.</li> 
<li>The search result will contain your golden AMI. To choose it, choose <strong>Select</strong>.</li> 
<li>Locate any available <strong>Instance Type</strong> and then note the corresponding value in the <strong>Type</strong> column.</li> 
<li>Choose <strong>Cancel</strong>.</li> 
</ol> 
<p><strong>Note:</strong> Amazon Inspector will launch the chosen <code>InstanceType</code> every time the vulnerability assessment runs.</p> 
<p><strong>Step C: </strong>Create the <code>user-data</code> script to install and start the Amazon Inspector agent.</p> 
<p>The <code>user-data</code> script automates the installation of software packages when an EC2 instance launches for the first time. In this step, you create an operating system specific, JSON-compatible user-data script that installs and starts the Amazon Inspector agent.</p> 
<ol> 
<li>Identify the command that installs the Amazon Inspector agent</li> 
</ol> 
<p style="padding-left: 30px">Based on <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_installing-uninstalling-agents.html" target="_blank" rel="noopener noreferrer">Installing Amazon Inspector Agents</a>, the following shell command installs the Amazon Inspector agent on an Amazon Linux-based EC2 instance.</p> 
<code class="lang-text">wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install
bash install</code> 
<p style="padding-left: 30px">To find this command for other operating systems, see <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_installing-uninstalling-agents.html" target="_blank" rel="noopener noreferrer">Installing Amazon Inspector Agents</a>.</p> 
<ol start="2"> 
<li>Identify the command that starts the Amazon Inspector agent</li> 
</ol> 
<p style="padding-left: 30px">The following shell command starts the Amazon Inspector agent on an Amazon Linux-based EC2 instance.</p> 
<code class="lang-text">sudo /etc/init.d/awsagent start</code> 
<p style="padding-left: 30px">To find this command for other operating systems, see <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_agents.html" target="_blank" rel="noopener noreferrer">Amazon Inspector Agents</a>.</p> 
<ol start="3"> 
<li>Create a script by concatenating the commands from the preceding two steps</li> 
</ol> 
<p style="padding-left: 30px">The following is a sample concatenated script for the Amazon Linux operating system that installs and starts an Amazon Inspector agent.</p> 
<code class="lang-text">wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install
bash install
sudo /etc/init.d/awsagent start</code> 
<ol start="4"> 
<li>Make the script user-data compatible</li> 
</ol> 
<p style="padding-left: 30px">Based on <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html#user-data-api-cli" target="_blank" rel="noopener noreferrer">Running Commands on Your Linux Instance at Launch</a>, you make a Linux shell script user-data compatible by prefixing it with a <code>#!/bin/bash</code>. In this step, you add the <code>#!/bin/bash</code> prefix to the script from the preceding step. The following is the user-data compatible version of the script from the preceding step.<strong>&nbsp;</strong></p> 
<code class="lang-text">#!/bin/bash
wget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install
bash install
sudo /etc/init.d/awsagent start</code> 
<p style="padding-left: 30px">To make your script user-data compatible for Windows, see <a href="http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2-windows-user-data.html" target="_blank" rel="noopener noreferrer">Running Commands on Your Windows Instance at Launch</a>.</p> 
<p style="padding-left: 30px">The <code>user-data</code> script provided in the JSON metadata must be JSON-compatible, which you will do next.</p> 
<ol start="5"> 
<li>Make the user-data script JSON compatible</li> 
</ol> 
<p style="padding-left: 30px">To make the user-data script JSON compatible, you must replace all new-line characters with a <code>\r\n\r\n</code> sequence. The following is the JSON-compatible user-data script that you specify for your Amazon Linux-based golden AMI in Step D.</p> 
<p style="padding-left: 30px"><span style="text-decoration: underline"><strong><code>JSON-compatible-user-data-for-Amazon-Linux-AMI</code></strong></span></p> 
<code class="lang-text">#!/bin/bash \r\n\r\nwget https://d1wk0tztpsntt1.cloudfront.net/linux/latest/install \r\n\r\nbash install \r\n\r\nsudo /etc/init.d/awsagent start</code> 
<p style="padding-left: 30px">Repeat Steps A, B, and C to find the <code>Ami Id</code>, <code>InstanceType</code>, and <code>UserData</code> for each of your golden AMIs. When you have this metadata, you can create the JSON document of metadata for all your golden AMIs. The <code>StartContinuousAssessment</code> Lambda function reads this JSON to start golden AMI vulnerability assessments.<strong><br /> </strong></p> 
<p><strong>Step D</strong>: Create a JSON document of metadata of all your golden AMIs.</p> 
<p>Use the following template to create a JSON document:</p> 
<code class="lang-text">[	
{ 
&quot;instanceType&quot;: &quot;<span style="color: #ff0000"><strong>instance-type-of-first-AMI</strong></span>&quot;, 
&quot;ami-id&quot;: &quot;<span style="color: #ff0000"><strong>AMI-ID-of-first-AMI</strong></span>&quot;, 
&quot;userData&quot;: &quot;<span style="color: #ff0000"><strong>JSON-compatible-user-data-of-first-AMI</strong></span>&quot;
},
{ 
&quot;instanceType&quot;: &quot;<span style="color: #0000ff"><strong>instance-type-of-second-AMI</strong></span>&quot;,
&quot;ami-id&quot;: &quot;<span style="color: #0000ff"><strong>AMI-ID-of-second-AMI</strong></span>&quot;,
&quot;userData&quot;: &quot;<span style="color: #0000ff"><strong>JSON-compatible-user-data-of-second-AMI</strong></span>&quot; 
}
]</code> 
<p>Replace all <span style="color: #ff0000"><strong>placeholder values</strong></span> with values corresponding to your first golden AMI. If your golden AMI is Amazon Linux-based, you can specify the <code>userData</code> as the <code>JSON-compatible-user-data-for-Amazon-Linux-AMI</code> from Step C.5. Next, replace the <span style="color: #0000ff"><strong>placeholder values</strong></span> for your second golden AMI. You can add more entries to your JSON document, if you have more than two golden AMIs.</p> 
<p><strong>Note</strong><strong>:</strong> The total number of characters in the JSON document must be fewer than or equal to 4,096 characters, and the number of golden AMIs must be fewer than 500. You must verify whether your account has permissions to run one on-demand EC2 instance for each of your golden AMIs. For information about how to verify service limits, see <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-resource-limits.html" target="_blank" rel="noopener noreferrer">Amazon EC2 Service Limits</a>.</p> 
<p>Now that you have created the JSON document of your golden AMIs, you will store the JSON document in a Systems Manager parameter. The <code>StartContinuousAssessment</code> Lambda function will read the metadata from this parameter.</p> 
<p><strong>Step E:</strong> Store the JSON in a Systems Manager parameter.</p> 
<p>To store the JSON in a Systems Manager parameter:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">EC2 console</a>.</li> 
<li>Expand&nbsp;<strong>Systems Manager Shared Resources</strong>&nbsp;in the navigation pane, and then choose&nbsp;<strong>Parameter Store</strong>.</li> 
<li>Choose&nbsp;<strong>Create Parameter</strong>.</li> 
<li>For&nbsp;<strong>Name</strong>, type <code>ContinuousAssessmentInput</code>.</li> 
<li>In the&nbsp;<strong>Description</strong>&nbsp;field, type <code>Continuous golden AMI vulnerability assessment process metadata</code>.</li> 
<li>For&nbsp;<strong>Type</strong>, choose&nbsp;<strong>String</strong>.</li> 
<li>Paste the JSON that you created in <strong>Step D</strong> in the <strong>Value</strong> field.</li> 
<li>Choose&nbsp;<strong>Create Parameter</strong>. After the system creates the parameter, choose&nbsp;<strong>Close</strong>.<strong><br /> </strong></li> 
</ol> 
<p>To set up the remaining components required to run assessments, you will run a CloudFormation template and perform the configuration explained in the next section.</p> 
<h3>3.&nbsp; Run the CloudFormation template and subscribe to an SNS topic to receive assessment results</h3> 
<p>Next, create a CloudFormation stack using the provided <a href="https://s3.amazonaws.com/awsiammedia/public/sample/GoldenAMIContinuousVulnerabilityAssessment/GoldenAMIs_template.json" target="_blank" rel="noopener noreferrer">CloudFormation template</a>. Before you start, download the CloudFormation template to your computer.</p> 
<p>To create a stack:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and choose <strong>CloudFormation</strong> in the <strong>Services</strong> menu.</li> 
<li>Click&nbsp;<strong>Create Stack</strong>.</li> 
<li>On the&nbsp;<strong>Select Template&nbsp;</strong>page, choose <strong>Upload a template to Amazon S3</strong>.</li> 
<li>Choose <strong>Choose File&nbsp;</strong>and then choose the CloudFormation template you just downloaded. Choose <strong>Next</strong>.</li> 
<li>On the <strong>Specify Details</strong> page, specify the <strong>Stack Name</strong> as <code>AmazonInspectorAssessment</code>. Choose <strong>Next</strong>.</li> 
<li>On the <strong>Options</strong> page, choose <strong>Next</strong>.</li> 
<li>On the <strong>Review</strong> page, choose the check box next to the following message: “<strong>I acknowledge that AWS CloudFormation might create IAM resources</strong>.<strong>”</strong></li> 
<li>Choose <strong>Create</strong>. The CloudFormation template creates SNS topics, <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> (IAM) roles, and Lambda functions.</li> 
<li>On the <strong>Stacks</strong> page, choose <strong>AmazonInspectorAssessment</strong>.</li> 
<li>In the <strong>Detail</strong> pane, choose <strong>Outputs&nbsp;</strong>to view the output of your stack.</li> 
</ol> 
<p>After CloudFormation successfully creates a stack, the <strong>Outputs</strong> tab displays following results:</p> 
<li><code>StartContinuousAssessmentLambdaFunction</code> – The <strong>Value</strong> box displays the name of the <code>StartContinuousAssessment</code> function. You will run this function to trigger the entire workflow.</li> 
<li><code>ContinuousAssessmentResultsTopic</code> – The <strong>Value</strong> box displays the <code>ContinuousAssessmentResultsTopic</code> topic’s <a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">Amazon Resource Name</a> (ARN), which you will use later.</li> 
<p>To receive consolidated vulnerability assessment results in email, you must subscribe to <code>ContinuousAssessmentResultsTopic</code>.</p> 
<p>To subscribe to <code>ContinuousAssessmentResultsTopic</code>:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/sns/v2/home" target="_blank" rel="noopener noreferrer">SNS console</a>.</li> 
<li>Choose <strong>Create subscription</strong>. In the&nbsp;<strong>Topic ARN</strong>&nbsp;field, paste the ARN of <code>ContinuousAssessmentResultsTopic</code> that you noted in the previous section.</li> 
<li>In the&nbsp;<strong>Protocol</strong>&nbsp;drop-down, choose&nbsp;<strong>Email</strong>.</li> 
<li>In the&nbsp;<strong>Endpoint</strong>&nbsp;box, type the email address where you will receive notifications.</li> 
<li>Choose <strong>Create subscription</strong>.</li> 
<li>Navigate to your email application and open the message from AWS Notifications. Click the link to confirm your subscription to the SNS topic.<strong><br /> </strong></li> 
</ol> 
<h3>4.&nbsp; Test golden AMI vulnerability assessments</h3> 
<p>Before you schedule vulnerability assessments, you should test the process by running the <code>StartContinuousAssessment</code> function. In this test, you trigger a security assessment and monitor it. You then receive an email after the assessment has completed, which shows that vulnerability assessments have been successfully set up.</p> 
<p>To start golden AMI vulnerability assessments:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and choose&nbsp;<strong>Lambda </strong>in the&nbsp;<strong>Services&nbsp;</strong>menu.</li> 
<li>Choose <strong>Functions</strong>. In the <strong>Functions</strong> pane, choose the <strong>StartContinuousAssessment</strong> function.</li> 
<li>Choose the <strong>Select a test event</strong> drop-down, and choose <strong>Configure test events</strong>.</li> 
<li>On the <strong>Configure test event</strong> page, choose <strong>Create new test event</strong> and specify the event name as test.</li> 
<li>Paste the following JSON in the editor box. 
<code class="lang-text">{
&quot;AMIsParamName&quot;: &quot;ContinuousAssessmentInput&quot;
}</code> 
<li>Choose <strong>Create</strong>. Choose <strong>Test</strong>.</li> 
</ol> 
<p>The <code>StartContinuousAssessment</code> function runs for approximately five minutes and then displays the following message.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/15/KW_1_1217.png" /></p> 
<p>Next, open Amazon Inspector and monitor the progress of the assessment:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector console</a>.</li> 
<li>On <strong>Dashboard</strong> under <strong>Recent Assessment Runs</strong>, you will see an entry with the status, <strong>Collecting Data</strong>. This status indicates that Amazon Inspector agents are collecting data from instances running your golden AMIs. The agents collect data for an hour and then Amazon Inspector analyzes the collected data.</li> 
</ol> 
<p>After Amazon Inspector completes the assessment, the status in the console changes to <strong>Analysis complete</strong>. Amazon Inspector then publishes an SNS message that triggers the <code>AnalyzeInspectionReports</code> Lambda function. When <code>AnalyzeInspectionReports</code> publishes results, you will receive an email containing consolidated assessment results. You also will be able to see the findings.</p> 
<p>To see the findings in Amazon Inspector’s <strong>Findings</strong> section:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/inspector/home" target="_blank" rel="noopener noreferrer">Amazon Inspector console</a>.</li> 
<li>In the navigation pane, choose<strong> Assessment Runs</strong>. In the table on the<strong> Amazon Inspector – Assessment Runs </strong>page<strong>, </strong>choose the findings of the latest assessment run.</li> 
<li>Choose the settings (<img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/15/KW_2_1217.png" /></li> 
</ol> 
<p>Having verified that you have successfully set up all components of golden AMI vulnerability assessments, you now will schedule the vulnerability assessments to run on a regular basis to give you continual insight into the health of instances created from your golden AMIs.</p> 
<h3>5.&nbsp; Set up a CloudWatch Events rule for triggering continuous golden AMI vulnerability assessments</h3> 
<p>The last step is to create a CloudWatch Events rule to schedule the execution of the vulnerability assessments on a daily or weekly basis.</p> 
<p>To set up a CloudWatch Events rule:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/cloudwatch/" target="_blank" rel="noopener noreferrer">CloudWatch console</a>.</li> 
<li>In the navigation pane, choose&nbsp;<strong>Rules </strong>&gt;&nbsp;<strong>Create rule</strong>.</li> 
<li>On the <strong>Event Source </strong>page, choose&nbsp;<strong>Schedule</strong>. Choose&nbsp;<strong>Fixed rate of&nbsp;</strong>and specify the interval (for example, 1 day).</li> 
<li>For&nbsp;<strong>Targets</strong>, choose&nbsp;<strong>Add target&nbsp;</strong>and then choose&nbsp;<strong>Lambda function</strong>.</li> 
<li>For&nbsp;<strong>Function</strong>, choose the <strong>StartContinuousAssessment</strong> function.</li> 
<li>Choose<strong> Configure Input</strong>.</li> 
<li>Choose <strong>Constant (JSON text)</strong>.</li> 
<li>In the box, paste the following JSON code. 
<code class="lang-text">{
&quot;AMIsParamName&quot;: &quot;ContinuousAssessmentInput&quot;
}</code> 
<li>Choose&nbsp;<strong>Configure details</strong>.</li> 
<li>For&nbsp;<strong>Rule definition</strong>, type <code>ContinuousGoldenAMIAssessmentTrigger</code> for the name, and type as the description, <code>This rule triggers the continuous golden AMI vulnerability assessment process</code>.</li> 
<li>Choose&nbsp;<strong>Create rule</strong>.</li> 
</ol> 
<p>The vulnerability assessments are executed on the first occurrence of the schedule you chose while setting up the CloudWatch Events rule. After the vulnerability assessment <strong>is </strong>executed, you will receive an email to indicate that your continuous golden AMI vulnerability assessments are set up.<strong><br /> </strong></p> 
<h3>Summary</h3> 
<p>To get visibility into the security of your EC2 instances created from your golden AMIs, it is important that you perform security assessments of your golden AMIs on a regular basis. In this blog post, I have demonstrated how to set up vulnerability assessments, and the results of these continuous golden AMI vulnerability assessments can help you keep your environment up to date with security patches. To learn how to patch your golden AMIs, see <a href="https://aws.amazon.com/blogs/aws/streamline-ami-maintenance-and-patching-using-amazon-ec2-systems-manager-automation/" target="_blank" rel="noopener noreferrer">Streamline AMI Maintenance and Patching Using Amazon EC2 Systems Manager</a>.</p> 
<p>If you have comments about this blog post, submit them in the “Comments” section below. If you have questions about implementing the solution in this post, start a new thread on the&nbsp;<a href="https://forums.aws.amazon.com/forum.jspa?forumID=205" target="_blank" rel="noopener noreferrer">Amazon Inspector forum</a> or <a href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
<p>– Kanchan and David</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6930');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/19/AWSOrganizations.png" /> 
<b class="lb-b blog-post-title" property="name headline">AWS Organizations Now Supports Self-Service Removal of Accounts from an Organization</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Raymond Ma</span></span> | on 
<time property="datePublished" datetime="2017-12-19T15:22:23+00:00">19 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-identity-and-access-management-iam/" title="View all posts in AWS Identity and Access Management (IAM)*"><span property="articleSection">AWS Identity and Access Management (IAM)*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-organizations/" title="View all posts in AWS Organizations*"><span property="articleSection">AWS Organizations*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/aws-organizations-now-supports-self-service-removal-of-accounts-from-an-organization/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6638" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6638&amp;disqus_title=AWS+Organizations+Now+Supports+Self-Service+Removal+of+Accounts+from+an+Organization&amp;disqus_url=https://aws.amazon.com/blogs/security/aws-organizations-now-supports-self-service-removal-of-accounts-from-an-organization/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6638');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>Today, <a href="https://aws.amazon.com/organizations/" target="_blank" rel="noopener noreferrer">AWS Organizations</a> made it easier for you to remove AWS accounts from an organization. You can remove accounts from an organization without requiring assistance from AWS Support, and the accounts you remove can operate as standalone accounts or be invited to join another organization. For example, you could remove graduating students’ AWS accounts from your organization to become standalone accounts or move accounts into another organization after an acquisition.</p> 
<p>In this blog post, I explain the information and permissions required to remove accounts from an organization, and then I demonstrate how to remove an account from an organization.</p> 
<h3>Information and permissions required to remove accounts from an organization</h3> 
<p>In order to remove an AWS account from an organization, you must have permission to do so. To verify that your <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management (IAM)</a> user or role has the required permissions to remove an account from an organization, navigate to the <a href="https://console.aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">IAM console</a>. Though you also can remove an account from your organization after signing in as the root user, AWS recommends you follow <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html" target="_blank" rel="noopener noreferrer">IAM best practices</a> and use an IAM user or role instead.</p> 
<p>To remove an AWS account from an organization, your IAM user or role must have the following permissions:</p> 
<li><code>organizations:DescribeOrganization</code> (console only)</li> 
<li><code>organizations:LeaveOrganization</code></li> 
<p>In order for an AWS account in an organization to be removed and become a standalone account, the account must have the following:</p> 
<li>Contact information</li> 
<li>An accepted AWS Customer Agreement</li> 
<li>A valid payment method, such as a credit card</li> 
<li>A verified phone number</li> 
<li>A selected support plan option</li> 
<p>In certain situations, you may need to update some of this required information for the AWS account you want to remove and the Organizations console walks you through the steps to update it. If you need to update the payment method for the AWS account, the IAM user or role performing the action must have the following permissions:</p> 
<li><code>aws-portal:ModifyBilling</code></li> 
<li><code>aws-portal:ModifyPaymentMethods</code></li> 
<p>For a complete list of required permissions, steps to remove an account from an organization, and important information applicable to programmatically created accounts in Organizations, see <a href="http://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_accounts_remove.html" target="_blank" rel="noopener noreferrer">Removing a Member Account from Your Organization</a>.</p> 
<h3>How to remove an AWS account from an organization</h3> 
<p>Let’s say that I need to remove some students’ AWS accounts from one of my university’s organizations because the students are graduating and want to continue using their AWS accounts independently of the organization.</p> 
<p>To remove these student accounts from the organization:</p> 
<ol> 
<li>I navigate to the <a href="https://console.aws.amazon.com/organizations/home" target="_blank" rel="noopener noreferrer">Organizations console</a>, choose the accounts that I want to remove, and choose <strong>Remove accounts</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/05/step1c.png" /></li> 
<li>I confirm that I want to remove these accounts by choosing <strong>Remove</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/05/step2a1a.png" /></li> 
<li>The accounts for <code>Mary Major</code> and <code>Richard Roe</code> already had all of the information required to become standalone accounts and are removed from the organization. The accounts that require additional information to become standalone accounts show a status of <strong>Remove failed</strong>. In this example, I must complete the information for the <code>Jane Doe</code> and <code>Carlos Salazar</code> accounts before I can remove them.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/05/step3a1.png" /></li> 
</ol> 
<p style="padding-left: 40px">I will work on the <code>Jane Doe</code> and <code>Carlos Salazar</code> accounts one at a time. To see the sign-in options for the <code>Jane Doe</code> account, I choose <strong>Sign-in options</strong>.</p> 
<ol start="4"> 
<li>I want the students to provide their additional required information so that their accounts can become standalone accounts. To allow Jane, the student who owns the <code>Jane Doe</code> account, to sign in to her account and provide the missing information, I choose <strong>Copy link</strong> and email the link to Jane.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/09/step4a1b1.png" /></li> 
</ol> 
<p style="padding-left: 40px">To complete this process for the <code>Carlos Salazar</code> account, I return to the account list on the previous page and choose <strong>Sign-in options</strong> for the <code>Carlos Salazar</code> account. I email Carlos, the owner of the <code>Carlos Salazar</code> account, a self-service account removal link. Both account owners follow the same process to remove their accounts from the organization.</p> 
<ol start="5"> 
<li>After receiving the email from me with the sign-in link, Jane clicks the link to sign in to her <code>Jane Doe</code> account. After signing in, Jane provides and submits the information that is required to make her account a standalone account. Jane then is taken to the Organizations console where she chooses <strong>Leave organization</strong> to remove her account from the organization.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/09/step5a1a.png" /></li> 
<li>After Jane chooses <strong>Leave organization</strong>, she is redirected to the Organizations console, and a notification confirms that the <code>Jane Doe</code> account has been removed from the organization.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/05/step6a1.png" /></li> 
<li>As the administrator in the master account of the organization, I can verify the successful removal by checking that the <code>Jane Doe</code> account no longer shows up in the list of accounts. Alternatively, if CloudWatch Events has been set up for Organizations, notifications can be provided through additional channels. For information about how to set up CloudWatch Events for Organizations, see <a href="http://docs.aws.amazon.com/organizations/latest/userguide/orgs_tutorials_cwe.html" target="_blank" rel="noopener noreferrer">Tutorial: Monitor Important Changes to Your Organization with CloudWatch Events</a>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/05/step7a.png" /></li> 
</ol> 
<h3>Summary</h3> 
<p>Today, AWS Organizations made it easier for you to remove AWS accounts from your organization so that they can operate independently of your organization. To remove an AWS account from your organization, sign in to the <a href="https://console.aws.amazon.com/organizations/home" target="_blank" rel="noopener noreferrer">Organizations console</a>.</p> 
<p>If you have comments about this post, submit them in the “Comments” section below. If you have questions about or issues implementing this solution, start a new thread on the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=219" target="_blank" rel="noopener noreferrer">Organizations forum</a>.</p> 
<p>– Raymond</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6638');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/27/800x400_reinvent-2017_social_p-6ab2ad7c-84e4-4708-b7e9-647bf46cfc3d-1065306203_p1.jpg" /> 
<b class="lb-b blog-post-title" property="name headline">Videos and Slide Decks from the AWS re:Invent 2017 Security, Compliance, &amp; Identity Track</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><a href="https://aws.amazon.com/blogs/security/author/clieb/" title="Posts by Craig Liebendorfer" property="name">Craig Liebendorfer</a></span> | on 
<time property="datePublished" datetime="2017-12-18T07:56:41+00:00">18 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/events/reinvent/" title="View all posts in AWS re:Invent*"><span property="articleSection">AWS re:Invent*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/events/" title="View all posts in Events*"><span property="articleSection">Events*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/" title="View all posts in Security, Identity, &amp; Compliance*"><span property="articleSection">Security, Identity, &amp; Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/videos-and-slide-decks-from-the-aws-reinvent-2017-security-compliance-identity-track/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6616" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6616&amp;disqus_title=Videos+and+Slide+Decks+from+the+AWS+re%3AInvent+2017+Security%2C+Compliance%2C+%26amp%3B+Identity+Track&amp;disqus_url=https://aws.amazon.com/blogs/security/videos-and-slide-decks-from-the-aws-reinvent-2017-security-compliance-identity-track/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6616');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/27/800x400_reinvent-2017_social_p-6ab2ad7c-84e4-4708-b7e9-647bf46cfc3d-1065306203_p1.jpg" /></p> 
<p>Whether you want to review a Security, Compliance, &amp; Identity track session you attended at AWS re:Invent 2017, or you want to experience a session for the first time, videos and slide decks from the Security, Compliance, &amp; Identity track are now available.</p> 
<h3>Introductory</h3> 
<li>SID201:&nbsp;IAM for Enterprises: How Vanguard Strikes the Balance Between Agility, Governance, and Security 
<li><a href="https://www.youtube.com/watch?v=P9cwxcruCC0" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid201iam-for-enterprises-how-vanguard-strikes-the-balance-between-agility-governance-and-security-in-iam-design" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID202:&nbsp;Deep-Dive on How Capital One Automates the Delivery of Directory Services Across AWS Accounts 
<li><a href="https://www.youtube.com/watch?v=n1iFAa7dtuU" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid202deep-dive-on-how-capital-one-automates-the-delivery-of-directory-services-across-aws-accounts" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID205: Building the Largest Repo for Serverless Compliance-as-Code 
<li><a href="https://youtu.be/VR_4209ewIo" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/building-the-largest-repo-for-serverless-complianceascode-sid205-reinvent-2017?qid=d9bdbcf6-0f0f-432b-80bd-c475dff2d537&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID206: Best Practices for Managing Security Operation on AWS 
<li><a href="https://www.youtube.com/watch?v=gjrcoK8T3To" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid206best-practices-for-managing-security-operations-on-aws" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID207:&nbsp;Security Change Through Feedback 
<li><a href="https://www.youtube.com/watch?v=hzpOYPhSxwc" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid207security-change-through-feedback" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID210: A CISO’s Journey at Vonage: Achieving Unified Security at Scale 
<li><a href="https://youtu.be/9ll-lt6jqQw" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.youtube.com/watch?v=9ll-lt6jqQw" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID213: Managing Regulator Expectations – Lessons Learned on Positioning AWS Services from an Audit Perspective 
<li><a href="https://www.youtube.com/embed/tZRU2fmSRsc" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://youtu.be/tZRU2fmSRsc" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID214: Best Security Practices in the Intelligence Community 
<li><a href="https://www.slideshare.net/AmazonWebServices/best-security-practices-in-the-intelligence-community-sid214-reinvent-2017?qid=bd4c42a1-7394-4537-8afa-dcc0b593d5e2&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID216: Cloud-Native App Protection: Web Application Security at Pearson and other customers using services like AWS WAF and AWS Shield 
<li><a href="https://youtu.be/xtAXg7zll3w" target="_blank" rel="noopener noreferrer">Video</a></li> 
</ul> </li> 
<li>SID217:&nbsp;New&nbsp;Launch! Introduction to Managed Rules for AWS WAF 
<li><a href="https://www.slideshare.net/AmazonWebServices/new-launch-introduction-to-managed-rules-for-aws-waf-sid217-reinvent-2017?qid=80189b4f-4f04-4462-9b4b-1d28d50515bd&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<h3>Advanced</h3> 
<li>SID301:&nbsp;Using AWS Lambda as a Security Team 
<li><a href="https://www.youtube.com/watch?time_continue=1401&amp;v=oMlGHP8-yHU" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid301using-aws-lambda-as-a-security-team" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID302:&nbsp;Force Multiply Your Security Team with Automation and Alexa 
<li><a href="https://www.youtube.com/watch?v=e6sokCFRlns" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid302force-multiply-your-security-team-with-automation-and-alexa" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID303: How You Can Use AWS’s Identity Services to Be Successful on Your AWS Cloud Journey 
<li><a href="https://youtu.be/fx7WWYTBvXU" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid303how-you-can-use-aws-identity-services-to-be-successful-on-your-aws-cloud-journey" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID304: SecOps 2021 Today: Using AWS Services to Deliver SecOps 
<li><a href="https://youtu.be/ZoCJ_VIsLQs" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/secops-2021-today-using-aws-services-to-deliver-secops-sid304-reinvent-2017?qid=d92c08a2-20a3-4e26-ae88-fbe1eb82f6e2&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID306: How Chick-fil-A Embraces DevSecOps on AWS 
<li><a href="https://youtu.be/_0BCJLIxowQ" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/how-chickfila-embraces-devsecops-on-aws-sid306-reinvent-2017?qid=88872dc1-6919-45e3-8525-01b887521548&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID310: Moving from the Shadows to the Throne 
<li><a href="https://youtu.be/4M3TGcSua3k" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/moving-from-the-shadows-to-the-throne-sid310-reinvent-2017?qid=db098614-6af7-49c5-b769-299d9fa2b6b7&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID313: Continuous Compliance on AWS at Scale 
<li><a href="https://youtu.be/h4eClhXPvoc" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/continuous-compliance-on-aws-at-scale-sid313-reinvent-2017?qid=f2f45d4b-22e7-4592-bf31-362c28ca5b80&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID316: Using Access Advisor to Strike the Balance Between Security and Usability 
<li><a href="https://youtu.be/gp4z0dCRTS0" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/using-access-advisor-to-strike-the-balance-between-security-and-usability-sid316-reinvent-2017?qid=b219556b-c148-4c16-97cf-0db40439c3d2&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID318: From Obstacle to Advantage: The Changing Role of Security and Compliance in Your Organization 
<li><a href="https://youtu.be/PAqXrg_gKDU" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/from-obstacle-to-advantage-the-changing-role-of-security-compliance-in-your-organization-sid318-reinvent-2017?qid=5dc97e54-34ce-4ce5-8a89-198d7c63f4c7&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID319: Incident Response in the Cloud 
<li><a href="https://youtu.be/ufmgB9M2WII" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/incident-response-in-the-cloud-sid319-reinvent-2017?qid=1a7afa01-c735-453a-8a60-10690b01434b&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID320: Fraud Prevention, Detection, Lessons Learned, and Best Practices 
<li><a href="https://youtu.be/n89TdCrR1HQ" target="_blank" rel="noopener noreferrer">Video</a></li> 
</ul> </li> 
<li>SID321: How Capital One Applies AWS Organizations Best Practices to Manage Multiple AWS Accounts 
<li><a href="https://youtu.be/ZKpkF17d0Oo" target="_blank" rel="noopener noreferrer">Video</a></li> 
</ul> </li> 
<li>SID322: The AWS Philosophy of Security 
<li><a href="https://youtu.be/KJiCfPXOW-U" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/the-aws-philosophy-of-security-sid322-reinvent-2017?qid=6cdbe9b6-4673-4a54-8d45-cd32d5b70e16&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID324: Automating DDoS Response in the Cloud 
<li><a href="https://youtu.be/6pQ3j4IcpY8" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/automating-ddos-response-in-the-cloud-sid324-reinvent-2017?qid=9402a55f-ba7a-4561-9013-395632e725d5&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID325: Amazon Macie: Data Visibility Powered by Machine Learning for Security and Compliance Workloads 
<li><a href="https://youtu.be/LCjX2rsQ2wA" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/amazon-macie-data-visibility-powered-by-machine-learning-for-security-and-compliance-workloads-sid325-reinvent-2017?qid=1bc87bc3-eec7-415a-a4af-fd4af0b7cd6b&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID326: AWS Security State of the Union 
<li><a href="https://youtu.be/Wvyc-VEUOns" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/aws-security-state-of-the-union-sid326-reinvent-2017?qid=5e006ccf-00df-42b8-aee7-87f4221f475d&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID327: How Zocdoc Achieved Security and Compliance at Scale With Infrastructure as Code 
<li><a href="https://youtu.be/aEE4RLnpQU8" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/how-zocdoc-achieved-security-and-compliance-at-scale-with-infrastructure-as-code-sid327-reinvent-2017?qid=18817077-9eb2-4cec-8518-f167795825bb&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID328: Cloud Adoption in Regulated Financial Services 
<li><a href="https://youtu.be/goX61THbKuA" target="_blank" rel="noopener noreferrer">Video</a></li> 
</ul> </li> 
<li>SID329:&nbsp;A Deep Dive into AWS Encryption Services 
<li><a href="https://youtu.be/gTZgxsCTfbk" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid329a-deep-dive-into-aws-encryption-services" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID331: Architecting Security and Governance Across a Multi-Account Strategy 
<li><a href="https://www.youtube.com/watch?v=71fD8Oenwxc" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid331architecting-security-and-governance-across-a-multiaccount-strategy" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID332: Identity Management for Your Users and Apps: A Deep Dive on Amazon Cognito 
<li><a href="https://youtu.be/jLQjQpUYw6g" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/identity-management-for-your-users-and-apps-a-deep-dive-on-amazon-cognito-sid332-reinvent-2017?qid=8475811e-c5c5-4a64-8a73-b77343d05148&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID333: Security at Scale: How Autodesk Leverages Native AWS Technologies to Provide Uniformly Scalable Security Capabilities 
<li><a href="https://www.slideshare.net/AmazonWebServices/security-at-scale-how-autodesk-leverages-native-aws-technologies-to-provide-uniformly-scalable-security-capabilities-sid333-reinvent-2017" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID344:&nbsp;Soup to Nuts: Identity Federation for AWS 
<li><a href="https://www.youtube.com/watch?v=CJexxdv054c" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/sid344soup-to-nuts-identity-federation-for-aws" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<li>SID347: Embedding Security into DevOps on AWS with Automation Toolsets 
<li><a href="https://youtu.be/Gz68BlZm7ZQ" target="_blank" rel="noopener noreferrer">Video</a></li> 
<li><a href="https://www.slideshare.net/AmazonWebServices/embedding-security-into-devops-on-aws-with-automation-toolsets-sid347-reinvent-2017?qid=b2fec130-2fcf-43f1-ac90-194abafd3b12&amp;v=&amp;b=&amp;from_search=1" target="_blank" rel="noopener noreferrer">Slide deck</a></li> 
</ul> </li> 
<h3>Expert</h3> 
<li>SID405: Five New Security Automation Improvements You Can Make by Using Amazon CloudWatch Events and AWS Config Rules 
<li><a href="https://youtu.be/RWHBv1YgkE8" target="_blank" rel="noopener noreferrer">Video</a></li> 
</ul> </li> 
<p>– Craig</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6616');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/14/AmazonCloudFront_1024x512_new.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Enhance the Security of Sensitive Customer Data by Using Amazon CloudFront Field-Level Encryption</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Alex Tomic</span></span> and 
<span property="author" typeof="Person"><span property="name">Cameron Worrell</span></span> | on 
<time property="datePublished" datetime="2017-12-14T14:11:39+00:00">14 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/networking-content-delivery/amazon-cloudfront/" title="View all posts in Amazon CloudFront*"><span property="articleSection">Amazon CloudFront*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-enhance-the-security-of-sensitive-customer-data-by-using-amazon-cloudfront-field-level-encryption/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6863" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6863&amp;disqus_title=How+to+Enhance+the+Security+of+Sensitive+Customer+Data+by+Using+Amazon+CloudFront+Field-Level+Encryption&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-enhance-the-security-of-sensitive-customer-data-by-using-amazon-cloudfront-field-level-encryption/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6863');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><a href="https://aws.amazon.com/cloudfront/" target="_blank" rel="noopener noreferrer">Amazon CloudFront</a> is a web service that speeds up distribution of your static and dynamic web content to end users through a worldwide network of <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/HowCloudFrontWorks.html" target="_blank" rel="noopener noreferrer">edge locations</a>. CloudFront provides a number of benefits and capabilities that can help you secure your applications and content while meeting compliance requirements. For example, you can configure CloudFront to help enforce secure, end-to-end connections using HTTPS <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank" rel="noopener noreferrer">SSL/TLS</a> encryption. You also can take advantage of CloudFront integration with <a href="https://aws.amazon.com/shield/" target="_blank" rel="noopener noreferrer">AWS Shield</a> for DDoS protection and with <a href="https://aws.amazon.com/waf/" target="_blank" rel="noopener noreferrer">AWS WAF</a> (a web application firewall) for protection against application-layer attacks, such as <a href="http://docs.aws.amazon.com/waf/latest/developerguide/web-acl-sql-conditions.html" target="_blank" rel="noopener noreferrer">SQL injection</a> and <a href="http://docs.aws.amazon.com/waf/latest/developerguide/web-acl-xss-conditions.html" target="_blank" rel="noopener noreferrer">cross-site scripting</a>.</p> 
<p>Now, CloudFront <em>field-level encryption</em> helps secure sensitive data such as a customer phone numbers by adding another security layer to CloudFront HTTPS. Using this functionality, you can help ensure that sensitive information in a <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods" target="_blank" rel="noopener noreferrer">POST request</a> is encrypted at CloudFront edge locations. This information remains encrypted as it flows to and beyond your origin servers that terminate HTTPS connections with CloudFront and throughout the application environment.&nbsp;In this blog post, we demonstrate how you can enhance the security of sensitive data by using CloudFront field-level encryption.</p> 
<p><strong>Note:</strong> This post assumes that you understand concepts and services such as <a href="https://en.wikipedia.org/wiki/Content_delivery_network" target="_blank" rel="noopener noreferrer">content delivery networks</a>, <a href="https://en.wikipedia.org/wiki/Form_(HTML)" target="_blank" rel="noopener noreferrer">HTTP forms</a>, <a href="https://en.wikipedia.org/wiki/Public-key_cryptography" target="_blank" rel="noopener noreferrer">public-key cryptography</a>, <a href="https://aws.amazon.com/cloudfront/" target="_blank" rel="noopener noreferrer">CloudFront</a>,&nbsp;<a href="https://aws.amazon.com/lambda/" target="_blank" rel="noopener noreferrer">AWS Lambda</a>, and the <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a>. If necessary, you should familiarize yourself with these concepts and review the solution overview in the next section before proceeding with the deployment of this post’s solution.</p> 
<h3>How field-level encryption works</h3> 
<p>Many web applications collect and store data from users as those users interact with the applications. For example, a travel-booking website may ask for your passport number and less sensitive data such as your food preferences. This data is transmitted to web servers and also might travel among a number of services to perform tasks. However, this also means that your sensitive information may need to be accessed by only a small subset of these services (most other services do not need to access your data).</p> 
<p>User data is often stored in a database for retrieval at a later time. One approach to protecting stored sensitive data is to configure and code each service to protect that sensitive data. For example, you can develop safeguards in logging functionality to ensure sensitive data is masked or removed. However, this can add complexity to your code base and limit performance.</p> 
<p>Field-level encryption addresses this problem by ensuring sensitive data is encrypted at CloudFront edge locations. Sensitive data fields in HTTPS form POSTs are automatically encrypted with a user-provided <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" target="_blank" rel="noopener noreferrer">public RSA key</a>. After the data is encrypted, other systems in your architecture see only <a href="https://en.wikipedia.org/wiki/Ciphertext" target="_blank" rel="noopener noreferrer">ciphertext</a>. If this ciphertext unintentionally becomes externally available, the data is cryptographically protected and only designated systems with access to the private RSA key can decrypt the sensitive data.</p> 
<p>It is critical to secure private RSA key material to prevent unauthorized access to the protected data. <a href="https://en.wikipedia.org/wiki/Key_management" target="_blank" rel="noopener noreferrer">Management of cryptographic key material</a> is a larger topic that is out of scope for this blog post, but should be carefully considered when implementing encryption in your applications. For example, in this blog post we store private key material as a secure string in the <a href="https://aws.amazon.com/systems-manager/features/#Parameter_Store" target="_blank" rel="noopener noreferrer">AWS Systems Manager Parameter Store</a>. The Parameter Store provides a centralized location for managing your configuration data such as plaintext data (such as database strings) or secrets (such as passwords) that are encrypted using <a href="https://aws.amazon.com/kms/" target="_blank" rel="noopener noreferrer">AWS Key Management Service</a> (AWS KMS). You may have an existing <a href="https://en.wikipedia.org/wiki/Key_management" target="_blank" rel="noopener noreferrer">key management system</a> in place that you can use, or you can use <a href="https://aws.amazon.com/cloudhsm/" target="_blank" rel="noopener noreferrer">AWS CloudHSM</a>. CloudHSM is a cloud-based hardware security module (HSM) that enables you to easily generate and use your own encryption keys in the AWS Cloud.</p> 
<p>To illustrate field-level encryption, let’s look at a simple form submission where <code>Name</code> and <code>Phone</code> values are sent to a web server using an <code>HTTP POST</code>. A typical form <code>POST</code> would contain data such as the following.</p> 
<code class="lang-text">POST / HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded
Content-Length:60
Name=Jane+Doe&amp;<span style="color: #ff0000"><strong>Phone=404-555-0150</strong></span></code> 
<p>Instead of taking this typical approach, field-level encryption converts this data similar to the following.</p> 
<code class="lang-text">POST / HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 1713
Name=Jane+Doe&amp;<span style="color: #ff0000"><strong>Phone=AYABeHxZ0ZqWyysqxrB5pEBSYw4AAA...</strong></span></code> 
<p>To further demonstrate field-level encryption in action, this blog post includes a sample <a href="https://aws.amazon.com/serverless/" target="_blank" rel="noopener noreferrer">serverless application</a> that you can deploy by using a CloudFormation template, which creates an application environment using CloudFront, <a href="https://aws.amazon.com/api-gateway/" target="_blank" rel="noopener noreferrer">Amazon API Gateway</a>, and Lambda. The sample application is only intended to demonstrate field-level encryption functionality and is not intended for production use. The following diagram depicts the architecture and data flow of this sample application.</p> 
<h3>Sample application architecture and data flow</h3> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/FLE_finaldiagram1217.png" /></p> 
<p>Here is how the sample solution works:</p> 
<ol> 
<li>An application user submits an HTML form page with sensitive data, generating an <code>HTTPS POST</code> to CloudFront.</li> 
<li>Field-level encryption intercepts the form <code>POST</code> and encrypts sensitive data with the public RSA key and replaces fields in the form post with encrypted ciphertext. The form <code>POST</code> ciphertext is then sent to origin servers.</li> 
<li>The serverless&nbsp;application accepts the form post data containing ciphertext where sensitive data would normally be. If a malicious user were able to compromise your application and gain access to your data, such as the contents of a form, that user would see encrypted data.</li> 
<li>Lambda stores data in a&nbsp;<a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html#HowItWorks.CoreComponents.TablesItemsAttributes" target="_blank" rel="noopener noreferrer">DynamoDB&nbsp;table</a>, leaving sensitive data to remain safely encrypted at rest.</li> 
<li>An administrator uses the AWS Management Console and a <a href="http://docs.aws.amazon.com/lambda/latest/dg/lambda-introduction-function.html" target="_blank" rel="noopener noreferrer">Lambda function</a> to view the sensitive data.</li> 
<li>During the session, the administrator retrieves ciphertext from the DynamoDB table.</li> 
<li>The administrator decrypts sensitive data by using private key material stored in the <a href="https://aws.amazon.com/systems-manager/features/#Parameter_Store" target="_blank" rel="noopener noreferrer">AWS Systems Manager Parameter Store</a>.</li> 
<li>Decrypted sensitive data is transmitted over SSL/TLS via the AWS Management Console to the administrator for review.</li> 
</ol> 
<b>Deployment walkthrough</b> 
<p>The high-level steps to deploy this solution are as follows:</p> 
<ol> 
<li><strong>Stage the required artifacts<br /> </strong>When deployment packages are used with Lambda, the zipped artifacts have to be placed in an S3 bucket in the target AWS Region for deployment. This step is not required if you are deploying in the US East (N. Virginia) Region because the package has already been staged there.</li> 
<li><strong>Generate an RSA key</strong><strong> pair<br /> </strong>Create a public/private key pair that will be used to perform the encrypt/decrypt functionality.</li> 
<li><strong>Upload the public key to CloudFront and associate</strong><strong> it with the field-level encryption configuration</strong><strong><br /> </strong>After you create the key pair, the public key is uploaded to CloudFront so that it can be used by field-level encryption.</li> 
<li><strong>Launch the CloudFormation stack<br /> </strong>Deploy the sample application for demonstrating field-level encryption by using <a href="https://aws.amazon.com/cloudformation/" target="_blank" rel="noopener noreferrer">AWS CloudFormation</a>.</li> 
<li><strong>Add the field-level encryption configuration to the CloudFront distribution</strong><strong><br /> </strong>After you have provisioned the application, this step associates the field-level encryption configuration with the CloudFront distribution.</li> 
<li><strong>Store the RSA private key in the Parameter Store<br /> </strong>Store the private key in the Parameter Store as a&nbsp;<a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-about.html#sysman-paramstore-securestring" target="_blank" rel="noopener noreferrer">SecureString</a>&nbsp;data type, which uses&nbsp;AWS KMS&nbsp;to encrypt the parameter value.</li> 
</ol> 
<h3>Deploy the solution</h3> 
<h4><strong>1. Stage the required artifacts</strong></h4> 
<p>(If you are deploying in the US East [N. Virginia] Region, skip to Step 2, “Generate an RSA key pair.”)</p> 
<p>Stage the Lambda function deployment package in an <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a> bucket located in the AWS Region you are using for this solution. To do this, download the&nbsp;<a href="https://github.com/aws-samples/field-level-encryption-sample/raw/master/lambda/fle_decrypt_data.zip" target="_blank" rel="noopener noreferrer">zipped deployment package</a>&nbsp;and upload it to your in-region bucket. For additional information about uploading objects to S3, see&nbsp;<a href="http://docs.aws.amazon.com/AmazonS3/latest/UG/UploadingObjectsintoAmazonS3.html" target="_blank" rel="noopener noreferrer">Uploading Object into Amazon S3</a>.</p> 
<h4>2.&nbsp;<strong>Generate an RSA key pair</strong></h4> 
<p>In this section, you will generate an RSA key pair by using <a href="https://www.openssl.org/" target="_blank" rel="noopener noreferrer">OpenSSL</a>:</p> 
<ol type="a"> 
<li>Confirm access to OpenSSL. 
<code class="lang-text">$ openssl version</code> 
<code class="lang-text">OpenSSL &lt;version&gt; &lt;date&gt;</code> 
</ol> 
<ol start="2" type="a"> 
<li>Create a private key using the following command. <code class="lang-text">$ openssl genrsa -out private_key.pem 2048</code> <p>The command results should look similar to the following.</p> <code class="lang-text">Generating RSA private key, 2048 bit long modulus</code> <code class="lang-text">................................................................................+++</code> <code class="lang-text">..........................+++</code> <code class="lang-text">e is 65537 (0x10001)</code> </li> 
</ol> 
<ol start="3" type="a"> 
<li>Extract the public key from the private key by running the following command. 
<code class="lang-text">$ openssl rsa -pubout -in private_key.pem -out public_key.pem</code> 
</ol> 
<ol start="4" type="a"> 
<li>Restrict access to the private key.$ chmod 600 private_key.pem&nbsp;<strong>Note: </strong>You will use the public and private key material in Steps 3 and 6 to configure the sample application.</li> 
</ol> 
<h4>3.&nbsp;<strong>Upload the public key to CloudFront and associate it with the field-level encryption configuration</strong></h4> 
<p>Now that you have created the RSA key pair, you will use the AWS Management Console to upload the public key to CloudFront for use by field-level encryption. Complete the following steps to upload and configure the public key.</p> 
<p><strong>Note:</strong> Do not include spaces or special characters when providing the configuration values in this section.</p> 
<ol type="a"> 
<li>From the AWS Management Console, choose <strong>Services</strong> &gt; <strong>CloudFront</strong>.</li> 
<li>In the navigation pane, choose <strong>Public Key</strong> and choose <strong>Add Public Key</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_1a.png" /></li> 
</ol> 
<p style="padding-left: 30px">Complete the <strong>Add Public Key</strong> configuration boxes:</p> 
<ul style="margin-left: 20px"> 
<li><strong>Key Name:</strong> Type a name such as DemoPublicKey.</li> 
<li><strong>Encoded Key: </strong>Paste the contents of the public_key.pem file you created in Step 2c. Copy and paste the encoded key value for your public key, including the <code>-----BEGIN PUBLIC KEY-----</code> and <code>-----END PUBLIC KEY-----</code> lines.</li> 
<li><strong>Comment:</strong> Optionally add a comment.</li> 
<ol start="3" type="a"> 
<li>Choose <strong>Create</strong>.</li> 
<li>After adding at least one public key to CloudFront, the next step is to create a profile to tell CloudFront which fields of input you want to be encrypted. While still on the CloudFront console, choose <strong>Field-level encryption</strong> in the navigation pane.</li> 
<li>Under <strong>Profiles</strong>, choose <strong><strong>Create profile</strong></strong>.<strong><strong><br /> </strong></strong><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_2a.png" /></li> 
</ol> 
<p style="padding-left: 30px">Complete the <strong>Create profile</strong> configuration boxes:</p> 
<ul style="margin-left: 20px"> 
<li><strong>Name:</strong> Type a name such as FLEDemo.</li> 
<li><strong>Comment:</strong> Optionally add a comment.</li> 
<li><strong>Public key:</strong> Select the public key you configured in Step 4.b.</li> 
<li><strong>Provider name:</strong> Type a provider name such as FLEDemo.<br /> This information will be used when the form data is encrypted, and must be provided to applications that need to decrypt the data, along with the appropriate private key.</li> 
<li><strong>Pattern to match:</strong> Type phone. This configures field-level encryption to match based on the phone.</li> 
<ol start="6" type="a"> 
<li>Choose <strong>Save profile.</strong></li> 
<li>Configurations include options for whether to block or forward a query to your origin in scenarios where CloudFront can’t encrypt the data. Under <strong>Encryption Configurations</strong>, choose <strong>Create configuration</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_3a.png" /></li> 
</ol> 
<p style="padding-left: 30px">Complete the <strong>Create configuration</strong> boxes:</p> 
<ul style="margin-left: 20px"> 
<li><strong>Comment:</strong> Optionally add a comment.</li> 
<li><strong>Content type:</strong> Enter application/x-www-form-urlencoded. This is a <a href="https://en.wikipedia.org/wiki/Percent-encoding#The_application.2Fx-www-form-urlencoded_type" target="_blank" rel="noopener noreferrer">common media type</a> for encoding form data.</li> 
<li><strong>Default profile ID:</strong> Select the profile you added in Step 3e.</li> 
<ol start="8" type="a"> 
<li>Choose <strong>Save configuration</strong></li> 
</ol> 
<h4><strong>4. Launch the CloudFormation stack</strong></h4> 
<p>Launch the sample application by using a <a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=FLE-Sample-App&amp;templateURL=https://s3.amazonaws.com/awsiammedia/public/sample/CloudFrontFieldLevelEncryption/fle-sample.yaml" target="_blank" rel="noopener noreferrer">CloudFormation template</a> that automates the provisioning process.</p> 
<table border="1" cellspacing="0" cellpadding="5"> 
<tbody> 
<tr> 
<td width="238"><strong>Input parameter</strong></td> 
<td width="284"><strong>Input parameter description</strong></td> 
</tr> 
<tr> 
<td width="238"><code>ProviderID</code></td> 
<td width="284">Enter the <strong>Provider name</strong> you assigned in Step 3e. The <code>ProviderID</code> is used in field-level encryption configuration in CloudFront (letters and numbers only, no special characters)</td> 
</tr> 
<tr> 
<td width="238"><code>PublicKeyName</code></td> 
<td width="284">Enter the <strong>Key Name</strong> you assigned in Step 3b. This name is assigned to the public key in field-level encryption configuration in CloudFront (letters and numbers only, no special characters).</td> 
</tr> 
<tr> 
<td width="238"><code>PrivateKeySSMPath</code></td> 
<td width="284">Leave as the default: <code>/cloudfront/field-encryption-sample/private-key</code></td> 
</tr> 
<tr> 
<td width="238"><code>ArtifactsBucket</code></td> 
<td width="284">The S3 bucket with artifact files (<a href="https://github.com/aws-samples/field-level-encryption-sample/raw/master/lambda/fle_decrypt_data.zip" target="_blank" rel="noopener noreferrer">staged zip file with app code</a>). Leave as default if deploying in <code>us-east-1</code>.</td> 
</tr> 
<tr> 
<td width="238"><code>ArtifactsPrefix</code></td> 
<td width="284">The path in the S3 bucket containing artifact files. Leave as default if deploying in <code>us-east-1</code>.</td> 
</tr> 
</tbody> 
</table> 
<p>To finish creating the CloudFormation stack:</p> 
<ol> 
<li>Choose <strong>Next</strong> on the <strong>Select Template</strong> page, enter the input parameters and choose&nbsp;<strong>Next</strong>.<br /> <strong>Note:</strong> The <strong>Artifacts configuration</strong> needs to be updated only if you are deploying outside of <code>us-east-1</code> (US East [N. Virginia]). See Step 1 for artifact staging instructions.</li> 
<li>On the&nbsp;<strong>Options&nbsp;</strong>page, accept the defaults and choose&nbsp;<strong>Next</strong>.</li> 
<li>On the&nbsp;<strong>Review&nbsp;</strong>page, confirm the details, choose the <strong>I acknowledge that&nbsp;AWS CloudFormation might create IAM resources</strong> check box, and then choose&nbsp;<strong>Create</strong>. (The stack will be created in approximately 15 minutes.)</li> 
</ol> 
<h4><strong>5. Add the field-level encryption configuration to the CloudFront distribution</strong></h4> 
<p>While still on the CloudFront console, choose <strong>Distributions</strong> in the navigation pane, and then:</p> 
<ol type="a"> 
<li style="list-style-type: none"> 
<ol type="a"> 
<li>In the <strong>Outputs</strong> section of the <strong>FLE-Sample-App</strong> stack, look for <strong>CloudFrontDistribution</strong> and click the URL to open the CloudFront console.</li> 
<li>Choose <strong>Behaviors</strong>, choose the <strong>Default (*)</strong> behavior, and then choose <strong>Edit</strong>.</li> 
<li>For <strong>Field-level Encryption Config, </strong>choose the configuration you created in Step 3g.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_4a.png" /></li> 
<li>Choose <strong>Yes, Edit</strong>.</li> 
<li>While still in the CloudFront distribution configuration, choose the&nbsp;<strong>General</strong> Choose <strong>Edit</strong>, scroll down to&nbsp;<strong>Distribution State</strong>, and change it to&nbsp;<strong>Enabled.</strong></li> 
<li>Choose&nbsp;<strong>Yes, Edit</strong>.</li> 
</ol> </li> 
</ol> 
<h4>6.&nbsp;<strong>Store the RSA private key in the Parameter Store</strong></h4> 
<p>In this step, you store the private key in the AWS Systems Manager Parameter Store as a&nbsp;<a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-about.html#sysman-paramstore-securestring" target="_blank" rel="noopener noreferrer">SecureString</a>&nbsp;data type, which uses&nbsp;AWS KMS&nbsp;to encrypt the parameter value. For more information about AWS KMS, see the&nbsp;<a href="http://docs.aws.amazon.com/kms/latest/developerguide/" target="_blank" rel="noopener noreferrer">AWS Key Management Service Developer Guide</a>. You will need a working installation of the&nbsp;<a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a>&nbsp;to complete this step.</p> 
<ol type="a"> 
<li>Store the private key in the Parameter Store with the AWS CLI by running the following command. You will find the <code>&lt;KMSKeyID&gt;</code> in the <strong>KMSKeyID</strong> in the CloudFormation stack <strong>Outputs</strong>. Substitute it for the <span style="color: #ff0000"><strong>placeholder</strong> </span>in the following command. 
<code class="lang-text">$ aws ssm put-parameter --type &quot;SecureString&quot; --name /cloudfront/field-encryption-sample/private-key </code><code class="lang-text">--value file://private_key.pem --key-id &quot;<span style="color: #ff0000"><strong>&lt;KMSKeyID&gt;</strong></span>&quot;
------------------
|  PutParameter  |
+----------+-----+
|  Version |  1  |
+----------+-----+</code> 
</ol> 
<ol start="2" type="a"> 
<li>Verify the parameter. Your private key material should be accessible through the <code>ssm get-parameter</code> in the following command in the <code>Value</code> The key material has been truncated in the following output. 
<code class="lang-text">$ aws ssm get-parameter --name /cloudfront/field-encryption-sample/private-key --with-decryption
-----…
||  Value  |  -----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAwGRBGuhacmw+C73kM6Z…….</code> 
<p>Notice we use the <code>—with decryption</code> argument in this command. This returns the private key as cleartext.</p> 
<p>This completes the sample application deployment. Next, we show you how to see field-level encryption in action.</p> 
</ol> 
<ol start="3" type="a"> 
<li>Delete the private key from local storage. On Linux for example, using the <a href="https://en.wikipedia.org/wiki/Shred_(Unix)" target="_blank" rel="noopener noreferrer">shred command</a>, securely delete the private key material from your workstation as shown below. You may also wish to store the private key material within an <a href="https://aws.amazon.com/cloudhsm/" target="_blank" rel="noopener noreferrer">AWS CloudHSM</a> or other protected location suitable for your security requirements. For production implementations, you also should implement key rotation policies. 
<code class="lang-text">$ shred -zvu -n  100 private*.pem
shred: private_encrypted_key.pem: pass 1/101 (random)...
shred: private_encrypted_key.pem: pass 2/101 (dddddd)...
shred: private_encrypted_key.pem: pass 3/101 (555555)...
….</code> 
</ol> 
<h3>Test the sample application</h3> 
<p>Use the following steps to test the sample application with field-level encryption:</p> 
<ol> 
<li>Open sample application in your web browser by clicking the <strong>ApplicationURL</strong> link in the CloudFormation stack <strong>Outputs</strong>. (for example, <code>https:d199xe5izz82ea.cloudfront.net/prod/</code>). Note that it may take several minutes for the CloudFront distribution to reach the <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-returned.html" target="_blank" rel="noopener noreferrer">Deployed Status</a> from the previous step, during which time you may not be able to access the sample application.</li> 
<li>Fill out and submit the HTML form on the page: 
<ol type="a"> 
<li>Complete the three form fields: <strong>Full Name</strong>, <strong>Email Address</strong>, and <strong>Phone Number</strong>.</li> 
<li>Choose <strong>Submit</strong>.<br /> <span style="color: #ff0000"><span style="color: #ff0000"><strong><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_6.png" /><br /> </span></li> 
</ol> </li> 
<li>Execute the Lambda decryption function to download ciphertext from DynamoDB and decrypt the phone number using the private key: 
<ol type="a"> 
<li>In the CloudFormation stack <strong>Outputs</strong>, locate <strong>DecryptFunction</strong> and click the URL to open the Lambda console.</li> 
<li>Configure a test event using the “Hello World” template.</li> 
<li>Choose the <strong>Test</strong> button.</li> 
</ol> </li> 
<li>View the encrypted and decrypted phone number data.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_7.png" /></li> 
</ol> 
<h3>Summary</h3> 
<p>In this blog post, we showed you how to use CloudFront field-level encryption to encrypt sensitive data at edge locations and help prevent access from unauthorized systems. The source code for this solution is&nbsp;<a href="https://github.com/aws-samples/field-level-encryption-sample" target="_blank" rel="noopener noreferrer">available on GitHub</a>. For additional information about field-level encryption,&nbsp;see the <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/field-level-encryption.html" target="_blank" rel="noopener noreferrer">documentation</a>.</p> 
<p>If you have comments about this post, submit them in the “Comments” section below. If you have questions about or issues implementing this solution, please start a new thread on the&nbsp;<a href="https://forums.aws.amazon.com/forum.jspa?forumID=46" target="_blank" rel="noopener noreferrer">CloudFront forum</a>.</p> 
<p>– Alex and Cameron</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6863');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/12/AWSTrainingandCertification.png" /> 
<b class="lb-b blog-post-title" property="name headline">Now Available: New Digital Training to Help You Learn About AWS Cloud Security</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Janna Pellegrino</span></span> | on 
<time property="datePublished" datetime="2017-12-14T07:32:58+00:00">14 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/security/" title="View all posts in Security"><span property="articleSection">Security</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/now-available-new-digital-training-to-help-you-learn-about-aws-cloud-security/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6852" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6852&amp;disqus_title=Now+Available%3A+New+Digital+Training+to+Help+You+Learn+About+AWS+Cloud+Security&amp;disqus_url=https://aws.amazon.com/blogs/security/now-available-new-digital-training-to-help-you-learn-about-aws-cloud-security/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6852');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/12/AWSTrainingandCertification_750x375.png" /></p> 
<p>Cloud security with scalability and innovation: at AWS, this is our top priority. To help you securely architect cloud solutions,&nbsp;<a href="https://www.aws.training/" target="_blank" rel="noopener noreferrer">AWS Training and Certification</a>&nbsp;recently added new <a href="https://www.aws.training/Training?searchPhrase=Security%2C%20Identity%20%26%20Compliance" target="_blank" rel="noopener noreferrer">free digital training</a> about security, including a new course about&nbsp;<a href="https://aws.amazon.com/guardduty/" target="_blank" rel="noopener noreferrer">Amazon GuardDuty</a>, a new managed threat-detection service.</p> 
<p>These introductory courses, built by AWS experts, are suitable for users and decision makers alike. Each course lasts 10–15 minutes, and you can learn at your own pace.</p> 
<h3>Digital training courses about security</h3> 
<p>To find these free courses, navigate to the <a href="https://www.aws.training/Training?searchPhrase=Security%2C%20Identity%20%26%20Compliance" target="_blank" rel="noopener noreferrer">Security, Identity &amp; Compliance page</a>. I suggest the following introductory courses:</p> 
<li><a href="https://www.aws.training/learningobject/video?id=16379" target="_blank" rel="noopener noreferrer">Introduction to Amazon Cloud Directory</a> (10 minutes)<br /> Learn how to use <a href="https://aws.amazon.com/clouddirectory/" target="_blank" rel="noopener noreferrer">Amazon Cloud Directory</a> to build flexible, cloud-native directories for organizing hierarchies of data along multiple dimensions.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16501" target="_blank" rel="noopener noreferrer">Introduction to Amazon Cognito</a> (10 minutes)<br /> Learn how to use <a href="https://aws.amazon.com/cognito/" target="_blank" rel="noopener noreferrer">Amazon Cognito</a> to add user sign-up and sign-in to your mobile and web applications.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16620" target="_blank" rel="noopener noreferrer">Introduction to Amazon GuardDuty</a> (10 minutes)<br /> Learn how to use <a href="https://aws.amazon.com/guardduty/" target="_blank" rel="noopener noreferrer">Amazon GuardDuty</a>, a new AWS managed threat-detection service that continuously monitors your account to detect known and unknown threats.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16455" target="_blank" rel="noopener noreferrer">Introduction to Amazon Macie</a> (10 minutes)<br /> Learn how <a href="http://aws.amazon.com/macie" target="_blank" rel="noopener noreferrer">Amazon Macie</a> uses machine learning to automatically discover, classify, and protect sensitive data in the AWS Cloud.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=15872" target="_blank" rel="noopener noreferrer">Introduction to AWS Artifact</a> (10 minutes)<br /> Get a brief overview of this service, including the definition of an audit artifact and a demonstration of <a href="https://aws.amazon.com/artifact/" target="_blank" rel="noopener noreferrer">AWS Artifact</a>.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=15890" target="_blank" rel="noopener noreferrer">Introduction to AWS Certificate Manager</a> (10 minutes)<br /> Get a high-level overview of how to use <a href="https://aws.amazon.com/acm/" target="_blank" rel="noopener noreferrer">AWS Certificate Manager</a> to issue and configure SSL certificates for your applications.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16448" target="_blank" rel="noopener noreferrer">Introduction to AWS Identity and Access Management</a> (10 minutes)<br /> Learn how you can use <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> (IAM) for authentication and authorization to AWS services. Discussions about IAM policies and roles also are included.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=15879" target="_blank" rel="noopener noreferrer">Introduction to Amazon Inspector</a> (15 minutes)<br /> Get an overview of how you can use <a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector</a> to analyze AWS resources and help identify potential security issues.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16451" target="_blank" rel="noopener noreferrer">Introduction to AWS Organizations</a> (10 minutes)<br /> <a href="https://aws.amazon.com/organizations/" target="_blank" rel="noopener noreferrer">AWS Organizations</a> offers policy-based management for multiple AWS accounts. In this course, learn how to access and use Organizations.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16024" target="_blank" rel="noopener noreferrer">Introduction to AWS WAF</a> (15 minutes)<br /> Review common <a href="https://aws.amazon.com/waf/" target="_blank" rel="noopener noreferrer">AWS WAF</a> use cases and learn which conditions AWS WAF (a web application firewall) can detect. A brief demonstration shows how to configure AWS WAF filters and rules.</li> 
<h3>Go deeper with AWS security courses</h3> 
<p>To supplement your foundational training, take these security-focused courses:</p> 
<li><a href="https://aws.amazon.com/training/course-descriptions/security-fundamentals/" target="_blank" rel="noopener noreferrer">AWS Security Fundamentals</a> (3 hours) is a self-paced digital course. This course introduces you to fundamental cloud computing and AWS security concepts, including AWS access control and management, governance, logging, and encryption methods. The course also covers security-related compliance protocols and risk management strategies, as well as procedures related to auditing your AWS security infrastructure.</li> 
<li><a href="https://aws.amazon.com/training/course-descriptions/security-operations/" target="_blank" rel="noopener noreferrer">Security Operations on AWS</a> (3 days) is an instructor-led course that offers in-depth classroom instruction. This course demonstrates how to use AWS security services to help remain secure and compliant in the AWS Cloud. The course focuses on AWS security best practices that you can implement to enhance the security of your data and systems in the cloud.</li> 
<p><a href="http://aws.training" target="_blank" rel="noopener noreferrer">AWS Training and Certification</a> continually&nbsp;evaluates and expands the training courses available to you, so be sure to visit the website regularly&nbsp;to explore the latest offerings.</p> 
<p>– Janna</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6852');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/SecuritybyDesignAWS_800x400.png" /> 
<b class="lb-b blog-post-title" property="name headline">A New AWS Government, Education, and Nonprofits Blog Post: “AWS Achieves Full Empanelment for the Delivery of Cloud Services by India’s Ministry of Electronics and Information Technology”</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><a href="https://aws.amazon.com/blogs/security/author/clieb/" title="Posts by Craig Liebendorfer" property="name">Craig Liebendorfer</a></span> | on 
<time property="datePublished" datetime="2017-12-13T09:55:58+00:00">13 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/a-new-aws-government-education-nonprofits-blog-post-aws-achieves-full-empanelment-for-the-delivery-of-cloud-services-by-indias-ministry-of-electronics-and-information-technology/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6891" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6891&amp;disqus_title=A+New+AWS+Government%2C+Education%2C+and+Nonprofits+Blog+Post%3A+%26%238220%3BAWS+Achieves+Full+Empanelment+for+the+Delivery+of+Cloud+Services+by+India%E2%80%99s+Ministry+of+Electronics+and+Information+Technology%26%238221%3B&amp;disqus_url=https://aws.amazon.com/blogs/security/a-new-aws-government-education-nonprofits-blog-post-aws-achieves-full-empanelment-for-the-delivery-of-cloud-services-by-indias-ministry-of-electronics-and-information-technology/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6891');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p style="text-align: center"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/SecuritybyDesignAWS.png" /></p> 
<p>AWS recently announced that Amazon Internet Services Private Limited (AISPL), an Indian subsidiary of the Amazon Group that undertakes the resale and marketing of AWS Cloud services in India, has achieved full Cloud Service Provider (CSP) empanelment and successfully completed the Standardization Testing and Quality Certification (STQC) audit from the Indian Ministry of Electronics and Information Technology (MeitY) for cloud services delivered from the AWS Asia Pacific (Mumbai) Region.</p> 
<p>With this certification, AISPL joins a list of approved providers that meet predefined government standards of quality, availability, and security. With 52 global security certifications, attestations, assurance programs, and quality audits already achieved, such as ISO 9001, SOC1, SOC2, and SOC3, AWS is the first global cloud service provider to earn this status in India.</p> 
<p>To read the full blog post, see <a href="https://aws.amazon.com/blogs/publicsector/aws-achieves-full-empanelment-for-the-delivery-of-cloud-services-by-indias-ministry-of-electronics-and-information-technology/" target="_blank" rel="noopener noreferrer">AWS Achieves Full Empanelment for the Delivery of Cloud Services by India’s Ministry of Electronics and Information Technology</a>.</p> 
<p>– Craig</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6891');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/12/EUFlag_600x399.png" /> 
<b class="lb-b blog-post-title" property="name headline">Introducing the New GDPR Center and “Navigating GDPR Compliance on AWS” Whitepaper</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Chad Woolf</span></span> | on 
<time property="datePublished" datetime="2017-12-13T08:58:00+00:00">13 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/introducing-the-new-gdpr-center-and-navigating-gdpr-compliance-on-aws-whitepaper/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6827" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6827&amp;disqus_title=Introducing+the+New+GDPR+Center+and+%E2%80%9CNavigating+GDPR+Compliance+on+AWS%E2%80%9D+Whitepaper&amp;disqus_url=https://aws.amazon.com/blogs/security/introducing-the-new-gdpr-center-and-navigating-gdpr-compliance-on-aws-whitepaper/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6827');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p style="text-align: center"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/12/EUFlag_400x266.png" /></p> 
<p>At AWS re:Invent 2017, the AWS Compliance team participated in excellent engagements with AWS customers about the <a href="https://www.eugdpr.org/" target="_blank" rel="noopener noreferrer">General Data Protection Regulation</a> (GDPR), including discussions that generated helpful input. Today, I am announcing resulting enhancements to our recently launched <a href="https://aws.amazon.com/compliance/gdpr-center/" target="_blank" rel="noopener noreferrer">GDPR Center</a> and the release of a new whitepaper, <a href="https://d1.awsstatic.com/whitepapers/compliance/GDPR_Compliance_on_AWS.pdf" target="_blank" rel="noopener noreferrer">Navigating GDPR Compliance on AWS</a>. The resources available on the GDPR Center are designed to give you GDPR basics, and provide some ideas as you work out the details of the regulation and find a path to compliance.</p> 
<p>In this post, I focus on two of these new GDPR requirements&nbsp;in terms&nbsp;of articles in the GDPR, and explain some of the AWS services and other resources that can help you meet these requirements.</p> 
<h3>Background about the GDPR</h3> 
<p>The GDPR is a European privacy law that will become enforceable on May 25, 2018, and is intended to harmonize data protection laws throughout the European Union (EU) by applying a single data protection law that is binding throughout each EU member state. The GDPR not only applies to organizations located within the EU, but also to organizations located outside the EU if they offer goods or services to, or monitor the behavior of, EU data subjects. All AWS services will comply with the GDPR in advance of the May 25, 2018, enforcement date.</p> 
<p>We are already seeing customers move personal data to AWS to help solve challenges in complying with the&nbsp;EU’s GDPR because of AWS’s advanced toolset for identifying, securing, and managing all types of data, including personal data. Steve Schmidt, the AWS CISO, <a href="https://aws.amazon.com/blogs/security/aws-and-the-general-data-protection-regulation/" target="_blank" rel="noopener noreferrer">has already written</a> about the <a href="https://cispe.cloud/#code-of-conduct" target="_blank" rel="noopener noreferrer">internal </a>and external work we have been undertaking to help you use AWS services to meet your own GDPR compliance goals.</p> 
<h3>Article 25 – Data Protection by Design and by Default (Privacy by Design)</h3> 
<p>Privacy by Design is the integration of data privacy and compliance into the systems development process, enabling applications, systems, and accounts, among other things, to be secure by default. To secure your AWS account, we offer a script to evaluate your AWS account against the full <a href="https://www.cisecurity.org/benchmark/amazon_web_services/" target="_blank" rel="noopener noreferrer">Center for Internet Security (CIS) Amazon Web Services Foundations Benchmark 1.1</a>. You can access this public benchmark on <a href="https://github.com/awslabs/aws-security-benchmark" target="_blank" rel="noopener noreferrer">GitHub</a>. Additionally, <a href="https://aws.amazon.com/premiumsupport/trustedadvisor/" target="_blank" rel="noopener noreferrer">AWS Trusted Advisor</a> is an online resource to help you improve security by optimizing your AWS environment. Among other things, Trusted Advisor lists a number of security-related controls you should be monitoring. AWS also offers <a href="https://aws.amazon.com/cloudtrail/" target="_blank" rel="noopener noreferrer">AWS CloudTrail</a>,&nbsp;a logging tool to track usage and API activity. Another example of tooling that enables data protection is <a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector</a>, which includes a knowledge base of hundreds of rules (regularly updated by AWS security researchers) mapped to common security best practices and vulnerability definitions. Examples of built-in rules include checking for remote root login being enabled or vulnerable software versions installed. These and other tools enable you to design an environment that protects customer data by design.</p> 
<p>An accurate inventory of all the GDPR-impacting data is important but sometimes difficult to assess. AWS has some advanced tooling, such as <a href="https://aws.amazon.com/macie/" target="_blank" rel="noopener noreferrer">Amazon Macie</a>, to help you determine where customer data is present in your AWS resources. Macie uses advanced machine learning to automatically discover and classify data so that you can protect data, per Article 25.</p> 
<h3>Article 32 – Security of Processing</h3> 
<p>You can use many AWS services and features to secure the processing of data regulated by the GDPR. <a href="https://aws.amazon.com/vpc/" target="_blank" rel="noopener noreferrer">Amazon Virtual Private Cloud (Amazon VPC)</a> lets you provision a logically isolated section of the AWS Cloud where you can launch resources in a virtual network that you define. You have complete control over your virtual networking environment, including the selection of your own IP address range, creation of subnets, and configuration of route tables and network gateways. With Amazon VPC, you can make the Amazon Cloud a seamless extension of your existing on-premises resources.</p> 
<p><a href="https://aws.amazon.com/kms" target="_blank" rel="noopener noreferrer">AWS Key Management Service (AWS KMS)</a> is a managed service that makes it easy for you to create and control the encryption keys used to encrypt your data, and uses hardware security modules (HSMs) to help protect your keys. Managing keys with&nbsp;AWS KMS&nbsp;allows you to choose to encrypt data either on the server side or the client side. AWS KMS is integrated with several other AWS services to help you protect the data you store with these services. AWS KMS is also integrated with CloudTrail to provide you with logs of all key usage to help meet your regulatory and compliance needs. You can also use the AWS Encryption SDK to correctly generate and use encryption keys, as well as protect keys after they have been used.</p> 
<p>We also recently announced <a href="https://aws.amazon.com/blogs/aws/new-amazon-s3-encryption-security-features/" target="_blank" rel="noopener noreferrer">new encryption and security features for Amazon S3</a>, including default encryption and a detailed inventory report. Services of this type as well as additional GDPR enablers will be published regularly on our&nbsp;<a href="https://aws.amazon.com/compliance/gdpr-center/" target="_blank" rel="noopener noreferrer">GDPR Center</a>.</p> 
<h3><strong>Other resources</strong></h3> 
<p>As you prepare for GDPR, you may want to visit our <a href="https://aws.amazon.com/compliance/customer-center/" target="_blank" rel="noopener noreferrer">AWS Customer Compliance Center</a> or <a href="https://aws.amazon.com/tools/" target="_blank" rel="noopener noreferrer">Tools for Amazon Web Services</a>&nbsp;to learn about options for building anything from small scripts that delete data to a full orchestration framework that uses <a href="https://aws.amazon.com/products/developer-tools/" target="_blank" rel="noopener noreferrer">AWS Code services</a>.</p> 
<p>-Chad</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6827');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/AmazonGuardDuty.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Manage Amazon GuardDuty Security Findings Across Multiple Accounts</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Tom Stickle</span></span> | on 
<time property="datePublished" datetime="2017-12-13T07:59:26+00:00">13 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/amazon-guardduty/" title="View all posts in Amazon GuardDuty"><span property="articleSection">Amazon GuardDuty</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-manage-amazon-guardduty-security-findings-across-multiple-accounts/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6785" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6785&amp;disqus_title=How+to+Manage+Amazon+GuardDuty+Security+Findings+Across+Multiple+Accounts&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-manage-amazon-guardduty-security-findings-across-multiple-accounts/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6785');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>Introduced at AWS re:Invent 2017,&nbsp;<a href="https://aws.amazon.com/guardduty/" target="_blank" rel="noopener noreferrer">Amazon GuardDuty</a> is a managed threat detection service that continuously monitors for malicious or unauthorized behavior to help you protect your AWS accounts and workloads. In an <a href="https://aws.amazon.com/blogs/aws/amazon-guardduty-continuous-security-monitoring-threat-detection/" target="_blank" rel="noopener noreferrer">AWS Blog post</a>, Jeff Barr shows you how to enable GuardDuty to monitor your AWS resources continuously. That blog post shows how to get started with a single GuardDuty account and provides an overview of the features of the service. Your security team, though, will probably want to use GuardDuty to monitor a <em>group</em> of AWS accounts continuously.</p> 
<p>In this post, I demonstrate how to use GuardDuty to monitor a group of AWS accounts and have their findings routed to another AWS account—the <em>master account</em>—that is owned by a security team. The method I demonstrate in this post is especially useful if your security team is responsible for monitoring a group of AWS accounts over which it does not have direct access—known as <em>member accounts</em>. In this solution, I simplify the work needed to enable GuardDuty in member accounts and configure findings by simplifying the process, which I do by enabling GuardDuty in the master account and inviting member accounts.</p> 
<h3>Enable GuardDuty in a master account and invite member accounts</h3> 
<p>To get started, you must enable GuardDuty in the master account, which will receive GuardDuty findings. The master account should be managed by your security team, and it will display the findings from all member accounts. The master account can be reverted later by removing any member accounts you add to it. Adding member accounts is a two-way handshake mechanism to ensure that administrators from both the master and member accounts formally agree to establish the relationship.</p> 
<p>To enable GuardDuty in the master account and add member accounts:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/guardduty" target="_blank" rel="noopener noreferrer">GuardDuty console</a>.</li> 
<li>In the navigation pane, choose <strong>Accounts</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/1_multiple_accounts.png" /></li> 
</ol> 
<ol start="3"> 
<li>To designate this account as the GuardDuty master account, start adding member accounts: 
<li>You can add individual accounts by choosing <strong>Add Account</strong>, or you can add a list of accounts by choosing <strong>Upload List (.csv)</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/2_account_accountList.png" /></li> 
</ul> </li> 
</ol> 
<ol start="4"> 
<li>Now, add the account ID and email address of the member account, and choose <strong>Add</strong>. (If you are uploading a list of accounts, choose <strong>Browse</strong>, choose the .csv file with the member accounts [one email address and account ID per line], and choose <strong>Add accounts</strong>.)<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/3_addMember.png" /></li> 
</ol> 
<p style="padding-left: 40px">For security reasons, AWS checks to make sure each account ID is valid and that you’ve entered each member account’s email address that was used to create the account. If a member account’s account ID and email address do not match, GuardDuty does not send an invitation.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/4_invite.png" /></p> 
<ol start="5"> 
<li>After you add all the member accounts you want to add, you will see them listed in the <strong>Member&nbsp;accounts</strong> table with a <strong>Status</strong> of <strong>Invite</strong>. You don’t have to individually invite each account—you can choose a group of accounts and when you choose to invite one account in the group, all accounts are invited.</li> 
<li>When you choose <strong>Invite </strong>for each member account: 
<ol type="a"> 
<li>AWS checks to make sure the account ID is valid and the email address provided is the email address of the member account.</li> 
<li>AWS sends an email to the member account email address with a link to the GuardDuty console, where the member account owner can accept the invitation. You can add a customized message from your security team. Account owners who receive the invitation must sign in to their AWS account to accept the invitation. The service also sends an invitation through the <a href="https://aws.amazon.com/premiumsupport/phd/" target="_blank" rel="noopener noreferrer">AWS Personal Health Dashboard</a> in case the member email address is not monitored. This invitation appears in the member account under the AWS Personal Health Dashboard alert bell on the AWS Management Console.</li> 
<li>A pending-invitation indicator is shown on the GuardDuty console of the member account, as shown in the following screenshot.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/5_invitations.png" /></li> 
</ol> </li> 
</ol> 
<p style="padding-left: 70px">When the invitation is sent by email, it is sent to the account owner of the GuardDuty member account.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/6_email_invite.png" /></p> 
<p style="padding-left: 70px">The account owner can click the link in the email invitation or the AWS Personal Health Dashboard message, or the account owner can sign in to their account and navigate to the GuardDuty console. In all cases, the member account displays the pending invitation in the member account’s GuardDuty console with instructions for accepting the invitation. The GuardDuty console walks the account owner through accepting the invitation, including enabling GuardDuty if it is not already enabled.</p> 
<p style="padding-left: 70px">If you prefer to work in the <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a>, you can enable GuardDuty and accept the invitation. To do this, call <code>CreateDetector</code> to enable GuardDuty, and then call <code>AcceptInvitation</code>, which serves the same purpose as accepting the invitation in the GuardDuty console.</p> 
<ol start="7"> 
<li>After the member account owner accepts the invitation, the <strong>Status</strong> in the master account is changed to <strong>Monitored</strong>. The status helps you track the status of each AWS account that you invite.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/7_monitored.png" /></li> 
</ol> 
<p style="padding-left: 40px">You have enabled GuardDuty on the member account, and all findings will be forwarded to the master account. You can now monitor the findings about GuardDuty member accounts from the GuardDuty console in the master account.</p> 
<p>The member account owner can see GuardDuty findings by default and can control all aspects of the experience in the member account with <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> (IAM) permissions. Users with the appropriate permissions can end the multi-account relationship at any time by toggling the <strong>Accept</strong> button on the <strong>Accounts</strong> page. Note that ending the relationship changes the <strong>Status</strong> of the account to <strong>Resigned</strong> and also triggers a security finding on the side of the master account so that the security team knows the member account is no longer linked to the master account.</p> 
<h3>Working with GuardDuty findings</h3> 
<p>Most security teams have ticketing systems, chat operations, security information event management (SIEM) systems, or other security automation systems to which they would like to push GuardDuty findings. For this purpose, GuardDuty sends all findings as JSON-based messages through <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/events/WhatIsCloudWatchEvents.html" target="_blank" rel="noopener noreferrer">Amazon CloudWatch Events</a>, a scalable service to which you can subscribe and to which AWS services can stream system events. To access these events, navigate to the <a href="https://console.aws.amazon.com/cloudwatch/home" target="_blank" rel="noopener noreferrer">CloudWatch Events console</a> and <a href="http://docs.aws.amazon.com/guardduty/latest/ug/guardduty_findings_cloudwatch.html" target="_blank" rel="noopener noreferrer">create a rule</a> that subscribes to the GuardDuty-related findings. You then can assign a target such as <a href="https://aws.amazon.com/kinesis/data-firehose/" target="_blank" rel="noopener noreferrer">Amazon Kinesis Data Firehose</a> that can place the findings in a number of services such as <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a>. The following screenshot is of the CloudWatch Events console, where I have a rule that pulls all events from GuardDuty and pushes them to a preconfigured <a href="https://aws.amazon.com/lambda/" target="_blank" rel="noopener noreferrer">AWS Lambda</a> function.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/eventsToLambda_120717.jpg" /></p> 
<p>The following example is a subset of GuardDuty findings that includes relevant context and information about the nature of a threat that was detected. In this example, the <code>instanceId</code>, <code>i-00bb62b69b7004a4c</code>, is performing <a href="https://en.wikipedia.org/wiki/Secure_Shell" target="_blank" rel="noopener noreferrer">Secure Shell</a> (SSH) <a href="https://en.wikipedia.org/wiki/Brute-force_attack" target="_blank" rel="noopener noreferrer">brute-force attacks</a> against IP address <code>172.16.0.28</code>. From a Lambda function, you can access any of the following fields such as the title of the finding and its description, and send those directly to your ticketing system.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/9_findingsubset.png" /></p> 
<p>You can use other AWS services to build custom analytics and visualizations of your security findings. For example, you can connect Kinesis Data Firehose to CloudWatch Events and write events to an S3 bucket in a standard format, which can be encrypted with <a href="https://aws.amazon.com/kms/" target="_blank" rel="noopener noreferrer">AWS Key Management Service</a> and then compressed. You also can use <a href="https://aws.amazon.com/quicksight/" target="_blank" rel="noopener noreferrer">Amazon QuickSight</a> to build ad hoc dashboards by using <a href="https://aws.amazon.com/glue" target="_blank" rel="noopener noreferrer">AWS Glue</a> and <a href="http://aws.amazon.com/athena" target="_blank" rel="noopener noreferrer">Amazon Athena</a>. Similarly, you can place the data from Kinesis Data Firehose in <a href="http://aws.amazon.com/elasticsearch-service" target="_blank" rel="noopener noreferrer">Amazon Elasticsearch Service</a>, with which you can use tools such as <a href="https://aws.amazon.com/blogs/security/tag/kibana/" target="_blank" rel="noopener noreferrer">Kibana</a> to build your own visualizations and dashboards.</p> 
<p>Like most other AWS services, GuardDuty is a regional service. This means that when you enable GuardDuty in an <a href="https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/" target="_blank" rel="noopener noreferrer">AWS Region</a>, all findings are generated and delivered in that region. If you are regulated by a compliance regime, this is often an important requirement to ensure that security findings remain in a specific jurisdiction. Because customers have let us know they would prefer to be able to enable GuardDuty globally and have all findings aggregated in one place, we intend to give the choice of regional or global isolation as we evolve this new service.</p> 
<h3>Summary</h3> 
<p>In this blog post, I have demonstrated how to use GuardDuty to monitor a group of GuardDuty member accounts and aggregate security findings in a central master GuardDuty account. You can use this solution whether or not you have direct control over the member accounts.</p> 
<p>If you have comments about this blog post, submit them in the “Comments” section below. If you have questions about using GuardDuty, start a thread in the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=288" target="_blank" rel="noopener noreferrer">GuardDuty forum</a> or <a href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
<p>-Tom</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6785');
});
</script> 
</article> 
<p>
© 2018 Amazon Web Services, Inc. or its affiliates. All rights reserved.
</p>

    </div>
  </div>
</div>


    <div id="footer" class="navigation hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <ul class="footer-links nav navbar-nav">
              <li><a href="../aws.html">AWS</a></li>
              <li><a href="../linux.html">Linux</a></li>
              <li><a href="../docker.html">Docker</a></li>
              <li><a href="../ibmpower.html">IBM Power</a></li>
              <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
            </ul>
            <ul class="footer-links nav navbar-nav navbar-right">
              <li><a href="../comments.html">Comments?</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
