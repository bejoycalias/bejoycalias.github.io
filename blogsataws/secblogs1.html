<!DOCTYPE html>
<html lang="en">
  <head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-593498H');</script>
<!-- End Google Tag Manager -->

    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">

    <meta name="msapplication-config" content="/microsoft-tile.xml" />
    <meta name="theme-color" content="#ffffff">

    <meta property="og:url" content="https://bejoycalias.github.io/blogsataws/secblogs1.html" />
    <meta property="og:site_name" content="Bejoy's TechNotes"/>
    <meta property="og:title" content="Bejoy's TechNotes - Kindle Friendly AWS Security Blogs" />
    <meta property="og:image" content="https://bejoycalias.github.io/assets/images/og-image.png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="1200"/>
    <meta property="og:description" content="" />

    <title>Bejoy's TechNotes - Kindle Friendly AWS Security Blogs</title>
    <link href="../assets/stylesheets/application-832aa42c.css" rel="stylesheet" />

    <!--[if lt IE 9]>
      <script src="../assets/javascripts/ie-compat-c141a02d.js"></script>
    <![endif]-->
    <script src="../assets/javascripts/application-ff53d307.js"></script>

    <!-- Typekit script to import Klavika font -->
    <script src="https://use.typekit.net/wxf7mfi.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-100043608-1', 'auto');
  ga('send', 'pageview');

</script>

    
  </head>

  <body id="uh-oh-" class="layout-inner page-uh-oh-">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-593498H"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


    <div id="header" class="navigation navbar-static-top hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <div class="navbar-header">
              <div class="navbar-brand">
                <a href="/">
                  <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="135.000000pt" height="50" viewbox="0 0 135.000000 45.000000" preserveaspectratio="xMidYMid meet" class="logo">

<g transform="translate(0.000000,45.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
<path class="text" fill="#000000" d="M527 384 c-4 -4 -7 -18 -7 -31 0 -21 4 -24 28 -21 21 2 27 8 27 28 0
18 -6 26 -20 28 -12 2 -24 0 -28 -4z"></path>
<path class="text" fill="#000000" d="M1080 335 c0 -48 2 -55 20 -55 18 0 20 7 20 55 0 48 -2 55 -20 55
-18 0 -20 -7 -20 -55z"></path>
<path class="text" fill="#000000" d="M54 357 c-2 -7 -3 -69 -2 -138 l3 -124 65 -3 c90 -3 130 20 130 77 0
29 -6 44 -20 54 -20 14 -20 15 -3 45 14 25 15 34 5 56 -6 15 -23 31 -38 36
-38 15 -134 13 -140 -3z m110 -33 c19 -7 21 -45 4 -62 -7 -7 -22 -12 -35 -12
-20 0 -23 5 -23 40 0 41 13 50 54 34z m20 -130 c19 -18 19 -20 6 -45 -8 -13
-21 -19 -45 -19 -34 0 -35 1 -35 40 0 38 2 40 29 40 16 0 37 -7 45 -16z"></path>
<path class="text" fill="#000000" d="M319 271 c-23 -24 -29 -38 -29 -74 0 -25 3 -53 6 -62 20 -50 164 -64
164 -15 0 15 -7 17 -45 12 -46 -5 -75 8 -75 34 0 11 16 14 65 14 l65 0 0 35
c0 80 -92 114 -151 56z m99 -33 c3 -15 -4 -18 -37 -18 -43 0 -50 7 -29 28 18
18 62 11 66 -10z"></path>
<path class="text" fill="#000000" d="M520 184 c0 -107 -1 -116 -20 -121 -11 -3 -20 -12 -20 -19 0 -21 76
-19 84 2 3 9 6 69 6 135 l0 119 -25 0 -25 0 0 -116z"></path>
<path class="text" fill="#000000" d="M649 271 c-24 -25 -29 -37 -29 -78 1 -70 34 -103 105 -103 55 0 95
44 95 103 0 60 -7 75 -41 92 -47 25 -96 19 -130 -14z m111 -30 c25 -48 2 -111
-40 -111 -45 0 -69 80 -34 114 21 22 61 20 74 -3z"></path>
<path class="text" fill="#000000" d="M850 287 c0 -8 16 -57 36 -110 28 -76 33 -100 25 -116 -16 -28 -14
-31 18 -31 27 0 29 4 70 123 23 67 41 128 41 135 0 6 -11 12 -24 12 -21 0 -26
-8 -41 -65 -10 -36 -21 -68 -25 -70 -3 -2 -16 27 -29 66 -19 60 -25 69 -47 69
-13 0 -24 -6 -24 -13z"></path>
<path class="text" fill="#000000" d="M1192 284 c-17 -12 -22 -24 -20 -47 2 -26 10 -36 45 -52 49 -23 59
-55 17 -55 -14 0 -34 5 -45 10 -16 9 -19 7 -19 -13 0 -17 7 -27 23 -31 69 -18
117 6 117 60 0 32 -4 37 -45 55 -60 26 -62 54 -4 46 37 -5 40 -3 37 16 -2 18
-11 23 -43 25 -25 2 -49 -3 -63 -14z"></path>
</g>
</svg>

                </a>
              </div>
              <button class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="buttons hidden-xs">
              <nav class="navigation-links" role="navigation">
                <ul class="main-links nav navbar-nav navbar-right">
                  <li><a href="../aws.html">AWS</a></li>
                  <li><a href="../linux.html">Linux</a></li>
                  <li><a href="../docker.html">Docker</a></li>
                  <li><a href="../ibmpower.html">IBM Power</a></li>
                  <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sidebar-overlay"></div>

<aside class="sidebar" role="navigation">
  <div class="sidebar-header">
    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="135.000000pt" height="42" viewbox="0 0 135.000000 45.000000" preserveaspectratio="xMidYMid meet">

<g transform="translate(0.000000,45.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
<path class="text" fill="#000000" d="M527 384 c-4 -4 -7 -18 -7 -31 0 -21 4 -24 28 -21 21 2 27 8 27 28 0
18 -6 26 -20 28 -12 2 -24 0 -28 -4z"></path>
<path class="text" fill="#000000" d="M1080 335 c0 -48 2 -55 20 -55 18 0 20 7 20 55 0 48 -2 55 -20 55
-18 0 -20 -7 -20 -55z"></path>
<path class="text" fill="#000000" d="M54 357 c-2 -7 -3 -69 -2 -138 l3 -124 65 -3 c90 -3 130 20 130 77 0
29 -6 44 -20 54 -20 14 -20 15 -3 45 14 25 15 34 5 56 -6 15 -23 31 -38 36
-38 15 -134 13 -140 -3z m110 -33 c19 -7 21 -45 4 -62 -7 -7 -22 -12 -35 -12
-20 0 -23 5 -23 40 0 41 13 50 54 34z m20 -130 c19 -18 19 -20 6 -45 -8 -13
-21 -19 -45 -19 -34 0 -35 1 -35 40 0 38 2 40 29 40 16 0 37 -7 45 -16z"></path>
<path class="text" fill="#000000" d="M319 271 c-23 -24 -29 -38 -29 -74 0 -25 3 -53 6 -62 20 -50 164 -64
164 -15 0 15 -7 17 -45 12 -46 -5 -75 8 -75 34 0 11 16 14 65 14 l65 0 0 35
c0 80 -92 114 -151 56z m99 -33 c3 -15 -4 -18 -37 -18 -43 0 -50 7 -29 28 18
18 62 11 66 -10z"></path>
<path class="text" fill="#000000" d="M520 184 c0 -107 -1 -116 -20 -121 -11 -3 -20 -12 -20 -19 0 -21 76
-19 84 2 3 9 6 69 6 135 l0 119 -25 0 -25 0 0 -116z"></path>
<path class="text" fill="#000000" d="M649 271 c-24 -25 -29 -37 -29 -78 1 -70 34 -103 105 -103 55 0 95
44 95 103 0 60 -7 75 -41 92 -47 25 -96 19 -130 -14z m111 -30 c25 -48 2 -111
-40 -111 -45 0 -69 80 -34 114 21 22 61 20 74 -3z"></path>
<path class="text" fill="#000000" d="M850 287 c0 -8 16 -57 36 -110 28 -76 33 -100 25 -116 -16 -28 -14
-31 18 -31 27 0 29 4 70 123 23 67 41 128 41 135 0 6 -11 12 -24 12 -21 0 -26
-8 -41 -65 -10 -36 -21 -68 -25 -70 -3 -2 -16 27 -29 66 -19 60 -25 69 -47 69
-13 0 -24 -6 -24 -13z"></path>
<path class="text" fill="#000000" d="M1192 284 c-17 -12 -22 -24 -20 -47 2 -26 10 -36 45 -52 49 -23 59
-55 17 -55 -14 0 -34 5 -45 10 -16 9 -19 7 -19 -13 0 -17 7 -27 23 -31 69 -18
117 6 117 60 0 32 -4 37 -45 55 -60 26 -62 54 -4 46 37 -5 40 -3 37 16 -2 18
-11 23 -43 25 -25 2 -49 -3 -63 -14z"></path>
</g>
</svg>

  </div>

  <ul class="nav sidebar-nav">
    <li><a href="../aws.html">AWS</a></li>
    <li><a href="../linux.html">Linux</a></li>
    <li><a href="../docker.html">Docker</a></li>
    <li><a href="../ibmpower.html">IBM Power</a></li>
    <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
  </ul>
</aside>


    <div class="container">
  <div class="row">
    <div id="docs-sidebar" class="col-sm-3 col-md-3 col-xs-12 hidden-print" role="complementary">
      <ul class="nav docs-sidenav">
      <li><a href="blogsataws1.html">Blogs @ AWS</a></li>
      <li><a href="whatsnew1.html">What's New @ AWS</a></li>
      <li class="active"><a href="secblogs1.html">Security Blogs @ AWS</a></li>
      <li><a href="computeblogs1.html">Compute Blogs @ AWS</a></li>
      <li><a href="apnblogs1.html">APN Blogs @ AWS</a></li>
      <li><a href="devopsblogs1.html">DevOps Blogs @ AWS</a></li>
      <li><a href="mgmtblogs1.html">Management Tools Blogs @ AWS</a></li>

    </ul>
    </div>

    <div id="inner" class="col-sm-9 col-md-9 col-xs-12" role="main">
<p></p>
<p><i>Contents of this page is copied directly from AWS blog sites to make it Kindle friendly. Some styles & sections from these pages are removed to render this properly in 'Article Mode' of Kindle e-Reader browser. All the contents of this page is property of AWS.</i></p>
<p><a href="secblogs1.html">Page 1</a>|<a href="secblogs2.html">Page 2</a>|<a href="secblogs3.html">Page 3</a>|<a href="secblogs4.html">Page 4</a</p>
<br>
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/14/AmazonCloudFront_1024x512_new.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Enhance the Security of Sensitive Customer Data by Using Amazon CloudFront Field-Level Encryption</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Alex Tomic</span></span> and 
<span property="author" typeof="Person"><span property="name">Cameron Worrell</span></span> | on 
<time property="datePublished" datetime="2017-12-14T14:11:39+00:00">14 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/networking-content-delivery/amazon-cloudfront/" title="View all posts in Amazon CloudFront*"><span property="articleSection">Amazon CloudFront*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-enhance-the-security-of-sensitive-customer-data-by-using-amazon-cloudfront-field-level-encryption/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6863" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6863&amp;disqus_title=How+to+Enhance+the+Security+of+Sensitive+Customer+Data+by+Using+Amazon+CloudFront+Field-Level+Encryption&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-enhance-the-security-of-sensitive-customer-data-by-using-amazon-cloudfront-field-level-encryption/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6863');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><a href="https://aws.amazon.com/cloudfront/" target="_blank" rel="noopener noreferrer">Amazon CloudFront</a> is a web service that speeds up distribution of your static and dynamic web content to end users through a worldwide network of <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/HowCloudFrontWorks.html" target="_blank" rel="noopener noreferrer">edge locations</a>. CloudFront provides a number of benefits and capabilities that can help you secure your applications and content while meeting compliance requirements. For example, you can configure CloudFront to help enforce secure, end-to-end connections using HTTPS <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank" rel="noopener noreferrer">SSL/TLS</a> encryption. You also can take advantage of CloudFront integration with <a href="https://aws.amazon.com/shield/" target="_blank" rel="noopener noreferrer">AWS Shield</a> for DDoS protection and with <a href="https://aws.amazon.com/waf/" target="_blank" rel="noopener noreferrer">AWS WAF</a> (a web application firewall) for protection against application-layer attacks, such as <a href="http://docs.aws.amazon.com/waf/latest/developerguide/web-acl-sql-conditions.html" target="_blank" rel="noopener noreferrer">SQL injection</a> and <a href="http://docs.aws.amazon.com/waf/latest/developerguide/web-acl-xss-conditions.html" target="_blank" rel="noopener noreferrer">cross-site scripting</a>.</p> 
<p>Now, CloudFront <em>field-level encryption</em> helps secure sensitive data such as a customer phone numbers by adding another security layer to CloudFront HTTPS. Using this functionality, you can help ensure that sensitive information in a <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods" target="_blank" rel="noopener noreferrer">POST request</a> is encrypted at CloudFront edge locations. This information remains encrypted as it flows to and beyond your origin servers that terminate HTTPS connections with CloudFront and throughout the application environment.&nbsp;In this blog post, we demonstrate how you can enhance the security of sensitive data by using CloudFront field-level encryption.</p> 
<p><strong>Note:</strong> This post assumes that you understand concepts and services such as <a href="https://en.wikipedia.org/wiki/Content_delivery_network" target="_blank" rel="noopener noreferrer">content delivery networks</a>, <a href="https://en.wikipedia.org/wiki/Form_(HTML)" target="_blank" rel="noopener noreferrer">HTTP forms</a>, <a href="https://en.wikipedia.org/wiki/Public-key_cryptography" target="_blank" rel="noopener noreferrer">public-key cryptography</a>, <a href="https://aws.amazon.com/cloudfront/" target="_blank" rel="noopener noreferrer">CloudFront</a>,&nbsp;<a href="https://aws.amazon.com/lambda/" target="_blank" rel="noopener noreferrer">AWS Lambda</a>, and the <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a>. If necessary, you should familiarize yourself with these concepts and review the solution overview in the next section before proceeding with the deployment of this post’s solution.</p> 
<h3>How field-level encryption works</h3> 
<p>Many web applications collect and store data from users as those users interact with the applications. For example, a travel-booking website may ask for your passport number and less sensitive data such as your food preferences. This data is transmitted to web servers and also might travel among a number of services to perform tasks. However, this also means that your sensitive information may need to be accessed by only a small subset of these services (most other services do not need to access your data).</p> 
<p>User data is often stored in a database for retrieval at a later time. One approach to protecting stored sensitive data is to configure and code each service to protect that sensitive data. For example, you can develop safeguards in logging functionality to ensure sensitive data is masked or removed. However, this can add complexity to your code base and limit performance.</p> 
<p>Field-level encryption addresses this problem by ensuring sensitive data is encrypted at CloudFront edge locations. Sensitive data fields in HTTPS form POSTs are automatically encrypted with a user-provided <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" target="_blank" rel="noopener noreferrer">public RSA key</a>. After the data is encrypted, other systems in your architecture see only <a href="https://en.wikipedia.org/wiki/Ciphertext" target="_blank" rel="noopener noreferrer">ciphertext</a>. If this ciphertext unintentionally becomes externally available, the data is cryptographically protected and only designated systems with access to the private RSA key can decrypt the sensitive data.</p> 
<p>It is critical to secure private RSA key material to prevent unauthorized access to the protected data. <a href="https://en.wikipedia.org/wiki/Key_management" target="_blank" rel="noopener noreferrer">Management of cryptographic key material</a> is a larger topic that is out of scope for this blog post, but should be carefully considered when implementing encryption in your applications. For example, in this blog post we store private key material as a secure string in the <a href="https://aws.amazon.com/ec2/systems-manager/parameter-store/" target="_blank" rel="noopener noreferrer">Amazon EC2 Systems Manager Parameter Store</a>. The Parameter Store provides a centralized location for managing your configuration data such as plaintext data (such as database strings) or secrets (such as passwords) that are encrypted using <a href="https://aws.amazon.com/kms/" target="_blank" rel="noopener noreferrer">AWS Key Management Service</a> (AWS KMS). You may have an existing <a href="https://en.wikipedia.org/wiki/Key_management" target="_blank" rel="noopener noreferrer">key management system</a> in place that you can use, or you can use <a href="https://aws.amazon.com/cloudhsm/" target="_blank" rel="noopener noreferrer">AWS CloudHSM</a>. CloudHSM is a cloud-based hardware security module (HSM) that enables you to easily generate and use your own encryption keys in the AWS Cloud.</p> 
<p>To illustrate field-level encryption, let’s look at a simple form submission where <code>Name</code> and <code>Phone</code> values are sent to a web server using an <code>HTTP POST</code>. A typical form <code>POST</code> would contain data such as the following.</p> 
<pre class="unlimited-height-code"><code class="lang-text">POST / HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded
Content-Length:60
Name=Jane+Doe&amp;<span style="color: #ff0000"><strong>Phone=404-555-0150</strong></span></code></pre> 
<p>Instead of taking this typical approach, field-level encryption converts this data similar to the following.</p> 
<pre class="unlimited-height-code"><code class="lang-text">POST / HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 1713
Name=Jane+Doe&amp;<span style="color: #ff0000"><strong>Phone=AYABeHxZ0ZqWyysqxrB5pEBSYw4AAA...</strong></span></code></pre> 
<p>To further demonstrate field-level encryption in action, this blog post includes a sample <a href="https://aws.amazon.com/serverless/" target="_blank" rel="noopener noreferrer">serverless application</a> that you can deploy by using a CloudFormation template, which creates an application environment using CloudFront, <a href="https://aws.amazon.com/api-gateway/" target="_blank" rel="noopener noreferrer">Amazon API Gateway</a>, and Lambda. The sample application is only intended to demonstrate field-level encryption functionality and is not intended for production use. The following diagram depicts the architecture and data flow of this sample application.</p> 
<h3>Sample application architecture and data flow</h3> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/FLE_finaldiagram1217.png" /></p> 
<p>Here is how the sample solution works:</p> 
<ol> 
<li>An application user submits an HTML form page with sensitive data, generating an <code>HTTPS POST</code> to CloudFront.</li> 
<li>Field-level encryption intercepts the form <code>POST</code> and encrypts sensitive data with the public RSA key and replaces fields in the form post with encrypted ciphertext. The form <code>POST</code> ciphertext is then sent to origin servers.</li> 
<li>The serverless&nbsp;application accepts the form post data containing ciphertext where sensitive data would normally be. If a malicious user were able to compromise your application and gain access to your data, such as the contents of a form, that user would see encrypted data.</li> 
<li>Lambda stores data in a&nbsp;<a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html#HowItWorks.CoreComponents.TablesItemsAttributes" target="_blank" rel="noopener noreferrer">DynamoDB&nbsp;table</a>, leaving sensitive data to remain safely encrypted at rest.</li> 
<li>An administrator uses the AWS Management Console and a <a href="http://docs.aws.amazon.com/lambda/latest/dg/lambda-introduction-function.html" target="_blank" rel="noopener noreferrer">Lambda function</a> to view the sensitive data.</li> 
<li>During the session, the administrator retrieves ciphertext from the DynamoDB table.</li> 
<li>The administrator decrypts sensitive data by using private key material stored in the <a href="https://aws.amazon.com/ec2/systems-manager/parameter-store/" target="_blank" rel="noopener noreferrer">EC2 Systems Manager Parameter Store</a>.</li> 
<li>Decrypted sensitive data is transmitted over SSL/TLS via the AWS Management Console to the administrator for review.</li> 
</ol> 
<b>Deployment walkthrough</b> 
<p>The high-level steps to deploy this solution are as follows:</p> 
<ol> 
<li><strong>Stage the required artifacts<br /> </strong>When deployment packages are used with Lambda, the zipped artifacts have to be placed in an S3 bucket in the target AWS Region for deployment. This step is not required if you are deploying in the US East (N. Virginia) Region because the package has already been staged there.</li> 
<li><strong>Generate an RSA key</strong><strong> pair<br /> </strong>Create a public/private key pair that will be used to perform the encrypt/decrypt functionality.</li> 
<li><strong>Upload the public key to CloudFront and associate</strong><strong> it with the field-level encryption configuration</strong><strong><br /> </strong>After you create the key pair, the public key is uploaded to CloudFront so that it can be used by field-level encryption.</li> 
<li><strong>Launch the CloudFormation stack<br /> </strong>Deploy the sample application for demonstrating field-level encryption by using <a href="https://aws.amazon.com/cloudformation/" target="_blank" rel="noopener noreferrer">AWS CloudFormation</a>.</li> 
<li><strong>Add the field-level encryption configuration to the CloudFront distribution</strong><strong><br /> </strong>After you have provisioned the application, this step associates the field-level encryption configuration with the CloudFront distribution.</li> 
<li><strong>Store the RSA private key in the Parameter Store<br /> </strong>Store the private key in the Parameter Store as a&nbsp;<a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-about.html#sysman-paramstore-securestring" target="_blank" rel="noopener noreferrer">SecureString</a>&nbsp;data type, which uses&nbsp;AWS KMS&nbsp;to encrypt the parameter value.</li> 
</ol> 
<h3>Deploy the solution</h3> 
<h4><strong>1. Stage the required artifacts</strong></h4> 
<p>(If you are deploying in the US East [N. Virginia] Region, skip to Step 2, “Generate an RSA key pair.”)</p> 
<p>Stage the Lambda function deployment package in an <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a> bucket located in the AWS Region you are using for this solution. To do this, download the&nbsp;<a href="https://github.com/aws-samples/field-level-encryption-sample/raw/master/lambda/fle_decrypt_data.zip" target="_blank" rel="noopener noreferrer">zipped deployment package</a>&nbsp;and upload it to your in-region bucket. For additional information about uploading objects to S3, see&nbsp;<a href="http://docs.aws.amazon.com/AmazonS3/latest/UG/UploadingObjectsintoAmazonS3.html" target="_blank" rel="noopener noreferrer">Uploading Object into Amazon S3</a>.</p> 
<h4>2.&nbsp;<strong>Generate an RSA key pair</strong></h4> 
<p>In this section, you will generate an RSA key pair by using <a href="https://www.openssl.org/" target="_blank" rel="noopener noreferrer">OpenSSL</a>:</p> 
<ol type="a"> 
<li>Confirm access to OpenSSL. 
<pre><code class="lang-text">$ openssl version</code></pre> 
<pre><code class="lang-text">OpenSSL &lt;version&gt; &lt;date&gt;</code></pre> 
</ol> 
<ol start="2" type="a"> 
<li>Create a private key using the following command. <pre><code class="lang-text">$ openssl genrsa -out private_key.pem 2048</code></pre> <p>The command results should look similar to the following.</p> <pre><code class="lang-text">Generating RSA private key, 2048 bit long modulus</code></pre> <pre><code class="lang-text">................................................................................+++</code></pre> <pre><code class="lang-text">..........................+++</code></pre> <pre><code class="lang-text">e is 65537 (0x10001)</code></pre> </li> 
</ol> 
<ol start="3" type="a"> 
<li>Extract the public key from the private key by running the following command. 
<pre><code class="lang-text">$ openssl rsa -pubout -in private_key.pem -out public_key.pem</code></pre> 
</ol> 
<ol start="4" type="a"> 
<li>Restrict access to the private key.$ chmod 600 private_key.pem&nbsp;<strong>Note: </strong>You will use the public and private key material in Steps 3 and 6 to configure the sample application.</li> 
</ol> 
<h4>3.&nbsp;<strong>Upload the public key to CloudFront and associate it with the field-level encryption configuration</strong></h4> 
<p>Now that you have created the RSA key pair, you will use the AWS Management Console to upload the public key to CloudFront for use by field-level encryption. Complete the following steps to upload and configure the public key.</p> 
<p><strong>Note:</strong> Do not include spaces or special characters when providing the configuration values in this section.</p> 
<ol type="a"> 
<li>From the AWS Management Console, choose <strong>Services</strong> &gt; <strong>CloudFront</strong>.</li> 
<li>In the navigation pane, choose <strong>Public Key</strong> and choose <strong>Add Public Key</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_1a.png" /></li> 
</ol> 
<p style="padding-left: 30px">Complete the <strong>Add Public Key</strong> configuration boxes:</p> 
<ul style="margin-left: 20px"> 
<li><strong>Key Name:</strong> Type a name such as DemoPublicKey.</li> 
<li><strong>Encoded Key: </strong>Paste the contents of the public_key.pem file you created in Step 2c. Copy and paste the encoded key value for your public key, including the <code>-----BEGIN PUBLIC KEY-----</code> and <code>-----END PUBLIC KEY-----</code> lines.</li> 
<li><strong>Comment:</strong> Optionally add a comment.</li> 
<ol start="3" type="a"> 
<li>Choose <strong>Create</strong>.</li> 
<li>After adding at least one public key to CloudFront, the next step is to create a profile to tell CloudFront which fields of input you want to be encrypted. While still on the CloudFront console, choose <strong>Field-level encryption</strong> in the navigation pane.</li> 
<li>Under <strong>Profiles</strong>, choose <strong><strong>Create profile</strong></strong>.<strong><strong><br /> </strong></strong><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_2a.png" /></li> 
</ol> 
<p style="padding-left: 30px">Complete the <strong>Create profile</strong> configuration boxes:</p> 
<ul style="margin-left: 20px"> 
<li><strong>Name:</strong> Type a name such as FLEDemo.</li> 
<li><strong>Comment:</strong> Optionally add a comment.</li> 
<li><strong>Public key:</strong> Select the public key you configured in Step 4.b.</li> 
<li><strong>Provider name:</strong> Type a provider name such as FLEDemo.<br /> This information will be used when the form data is encrypted, and must be provided to applications that need to decrypt the data, along with the appropriate private key.</li> 
<li><strong>Pattern to match:</strong> Type phone. This configures field-level encryption to match based on the phone.</li> 
<ol start="6" type="a"> 
<li>Choose <strong>Save profile.</strong></li> 
<li>Configurations include options for whether to block or forward a query to your origin in scenarios where CloudFront can’t encrypt the data. Under <strong>Encryption Configurations</strong>, choose <strong>Create configuration</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_3a.png" /></li> 
</ol> 
<p style="padding-left: 30px">Complete the <strong>Create configuration</strong> boxes:</p> 
<ul style="margin-left: 20px"> 
<li><strong>Comment:</strong> Optionally add a comment.</li> 
<li><strong>Content type:</strong> Enter application/x-www-form-urlencoded. This is a <a href="https://en.wikipedia.org/wiki/Percent-encoding#The_application.2Fx-www-form-urlencoded_type" target="_blank" rel="noopener noreferrer">common media type</a> for encoding form data.</li> 
<li><strong>Default profile ID:</strong> Select the profile you added in Step 3e.</li> 
<ol start="8" type="a"> 
<li>Choose <strong>Save configuration</strong></li> 
</ol> 
<h4><strong>4. Launch the CloudFormation stack</strong></h4> 
<p>Launch the sample application by using a <a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=FLE-Sample-App&amp;templateURL=https://s3.amazonaws.com/awsiammedia/public/sample/CloudFrontFieldLevelEncryption/fle-sample.yaml" target="_blank" rel="noopener noreferrer">CloudFormation template</a> that automates the provisioning process.</p> 
<table border="1" cellspacing="0" cellpadding="5"> 
<tbody> 
<tr> 
<td width="238"><strong>Input parameter</strong></td> 
<td width="284"><strong>Input parameter description</strong></td> 
</tr> 
<tr> 
<td width="238"><code>ProviderID</code></td> 
<td width="284">Enter the <strong>Provider name</strong> you assigned in Step 3e. The <code>ProviderID</code> is used in field-level encryption configuration in CloudFront (letters and numbers only, no special characters)</td> 
</tr> 
<tr> 
<td width="238"><code>PublicKeyName</code></td> 
<td width="284">Enter the <strong>Key Name</strong> you assigned in Step 3b. This name is assigned to the public key in field-level encryption configuration in CloudFront (letters and numbers only, no special characters).</td> 
</tr> 
<tr> 
<td width="238"><code>PrivateKeySSMPath</code></td> 
<td width="284">Leave as the default: <code>/cloudfront/field-encryption-sample/private-key</code></td> 
</tr> 
<tr> 
<td width="238"><code>ArtifactsBucket</code></td> 
<td width="284">The S3 bucket with artifact files (<a href="https://github.com/aws-samples/field-level-encryption-sample/raw/master/lambda/fle_decrypt_data.zip" target="_blank" rel="noopener noreferrer">staged zip file with app code</a>). Leave as default if deploying in <code>us-east-1</code>.</td> 
</tr> 
<tr> 
<td width="238"><code>ArtifactsPrefix</code></td> 
<td width="284">The path in the S3 bucket containing artifact files. Leave as default if deploying in <code>us-east-1</code>.</td> 
</tr> 
</tbody> 
</table> 
<p>To finish creating the CloudFormation stack:</p> 
<ol> 
<li>Choose <strong>Next</strong> on the <strong>Select Template</strong> page, enter the input parameters and choose&nbsp;<strong>Next</strong>.<br /> <strong>Note:</strong> The <strong>Artifacts configuration</strong> needs to be updated only if you are deploying outside of <code>us-east-1</code> (US East [N. Virginia]). See Step 1 for artifact staging instructions.</li> 
<li>On the&nbsp;<strong>Options&nbsp;</strong>page, accept the defaults and choose&nbsp;<strong>Next</strong>.</li> 
<li>On the&nbsp;<strong>Review&nbsp;</strong>page, confirm the details, choose the <strong>I acknowledge that&nbsp;AWS CloudFormation might create IAM resources</strong> check box, and then choose&nbsp;<strong>Create</strong>. (The stack will be created in approximately 15 minutes.)</li> 
</ol> 
<h4><strong>5. Add the field-level encryption configuration to the CloudFront distribution</strong></h4> 
<p>While still on the CloudFront console, choose <strong>Distributions</strong> in the navigation pane, and then:</p> 
<ol type="a"> 
<li style="list-style-type: none"> 
<ol type="a"> 
<li>In the <strong>Outputs</strong> section of the <strong>FLE-Sample-App</strong> stack, look for <strong>CloudFrontDistribution</strong> and click the URL to open the CloudFront console.</li> 
<li>Choose <strong>Behaviors</strong>, choose the <strong>Default (*)</strong> behavior, and then choose <strong>Edit</strong>.</li> 
<li>For <strong>Field-level Encryption Config, </strong>choose the configuration you created in Step 3g.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_4a.png" /></li> 
<li>Choose <strong>Yes, Edit</strong>.</li> 
<li>While still in the CloudFront distribution configuration, choose the&nbsp;<strong>General</strong> Choose <strong>Edit</strong>, scroll down to&nbsp;<strong>Distribution State</strong>, and change it to&nbsp;<strong>Enabled.</strong></li> 
<li>Choose&nbsp;<strong>Yes, Edit</strong>.</li> 
</ol> </li> 
</ol> 
<h4>6.&nbsp;<strong>Store the RSA private key in the Parameter Store</strong></h4> 
<p>In this step, you store the private key in the EC2 Systems Manager Parameter Store as a&nbsp;<a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-about.html#sysman-paramstore-securestring" target="_blank" rel="noopener noreferrer">SecureString</a>&nbsp;data type, which uses&nbsp;AWS KMS&nbsp;to encrypt the parameter value. For more information about AWS KMS, see the&nbsp;<a href="http://docs.aws.amazon.com/kms/latest/developerguide/" target="_blank" rel="noopener noreferrer">AWS Key Management Service Developer Guide</a>. You will need a working installation of the&nbsp;<a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a>&nbsp;to complete this step.</p> 
<ol type="a"> 
<li>Store the private key in the Parameter Store with the AWS CLI by running the following command. You will find the <code>&lt;KMSKeyID&gt;</code> in the <strong>KMSKeyID</strong> in the CloudFormation stack <strong>Outputs</strong>. Substitute it for the <span style="color: #ff0000"><strong>placeholder</strong> </span>in the following command. 
<pre><code class="lang-text">$ aws ssm put-parameter --type &quot;SecureString&quot; --name /cloudfront/field-encryption-sample/private-key </code><code class="lang-text">--value file://private_key.pem --key-id &quot;<span style="color: #ff0000"><strong>&lt;KMSKeyID&gt;</strong></span>&quot;
------------------
|  PutParameter  |
+----------+-----+
|  Version |  1  |
+----------+-----+</code></pre> 
</ol> 
<ol start="2" type="a"> 
<li>Verify the parameter. Your private key material should be accessible through the <code>ssm get-parameter</code> in the following command in the <code>Value</code> The key material has been truncated in the following output. 
<pre><code class="lang-text">$ aws ssm get-parameter --name /cloudfront/field-encryption-sample/private-key --with-decryption
-----…
||  Value  |  -----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAwGRBGuhacmw+C73kM6Z…….</code></pre> 
<p>Notice we use the <code>—with decryption</code> argument in this command. This returns the private key as cleartext.</p> 
<p>This completes the sample application deployment. Next, we show you how to see field-level encryption in action.</p> 
</ol> 
<ol start="3" type="a"> 
<li>Delete the private key from local storage. On Linux for example, using the <a href="https://en.wikipedia.org/wiki/Shred_(Unix)" target="_blank" rel="noopener noreferrer">shred command</a>, securely delete the private key material from your workstation as shown below. You may also wish to store the private key material within an <a href="https://aws.amazon.com/cloudhsm/" target="_blank" rel="noopener noreferrer">AWS CloudHSM</a> or other protected location suitable for your security requirements. For production implementations, you also should implement key rotation policies. 
<pre><code class="lang-text">$ shred -zvu -n  100 private*.pem
shred: private_encrypted_key.pem: pass 1/101 (random)...
shred: private_encrypted_key.pem: pass 2/101 (dddddd)...
shred: private_encrypted_key.pem: pass 3/101 (555555)...
….</code></pre> 
</ol> 
<h3>Test the sample application</h3> 
<p>Use the following steps to test the sample application with field-level encryption:</p> 
<ol> 
<li>Open sample application in your web browser by clicking the <strong>ApplicationURL</strong> link in the CloudFormation stack <strong>Outputs</strong>. (for example, <code>https:d199xe5izz82ea.cloudfront.net/prod/</code>). Note that it may take several minutes for the CloudFront distribution to reach the <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-returned.html" target="_blank" rel="noopener noreferrer">Deployed Status</a> from the previous step, during which time you may not be able to access the sample application.</li> 
<li>Fill out and submit the HTML form on the page: 
<ol type="a"> 
<li>Complete the three form fields: <strong>Full Name</strong>, <strong>Email Address</strong>, and <strong>Phone Number</strong>.</li> 
<li>Choose <strong>Submit</strong>.<br /> <span style="color: #ff0000"><span style="color: #ff0000"><strong><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_6.png" /><br /> </span></li> 
</ol> </li> 
<li>Execute the Lambda decryption function to download ciphertext from DynamoDB and decrypt the phone number using the private key: 
<ol type="a"> 
<li>In the CloudFormation stack <strong>Outputs</strong>, locate <strong>DecryptFunction</strong> and click the URL to open the Lambda console.</li> 
<li>Configure a test event using the “Hello World” template.</li> 
<li>Choose the <strong>Test</strong> button.</li> 
</ol> </li> 
<li>View the encrypted and decrypted phone number data.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/ATCW_7.png" /></li> 
</ol> 
<h3>Summary</h3> 
<p>In this blog post, we showed you how to use CloudFront field-level encryption to encrypt sensitive data at edge locations and help prevent access from unauthorized systems. The source code for this solution is&nbsp;<a href="https://github.com/aws-samples/field-level-encryption-sample" target="_blank" rel="noopener noreferrer">available on GitHub</a>. For additional information about field-level encryption,&nbsp;see the <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/field-level-encryption.html" target="_blank" rel="noopener noreferrer">documentation</a>.</p> 
<p>If you have comments about this post, submit them in the “Comments” section below. If you have questions about or issues implementing this solution, please start a new thread on the&nbsp;<a href="https://forums.aws.amazon.com/forum.jspa?forumID=46" target="_blank" rel="noopener noreferrer">CloudFront forum</a>.</p> 
<p>– Alex and Cameron</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/field-level-encryption/" rel="tag">field-level encryption</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6863');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/12/AWSTrainingandCertification.png" /> 
<b class="lb-b blog-post-title" property="name headline">Now Available: New Digital Training to Help You Learn About AWS Cloud Security</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Janna Pellegrino</span></span> | on 
<time property="datePublished" datetime="2017-12-14T07:32:58+00:00">14 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/security/" title="View all posts in Security"><span property="articleSection">Security</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/now-available-new-digital-training-to-help-you-learn-about-aws-cloud-security/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6852" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6852&amp;disqus_title=Now+Available%3A+New+Digital+Training+to+Help+You+Learn+About+AWS+Cloud+Security&amp;disqus_url=https://aws.amazon.com/blogs/security/now-available-new-digital-training-to-help-you-learn-about-aws-cloud-security/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6852');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/12/AWSTrainingandCertification_750x375.png" /></p> 
<p>Cloud security with scalability and innovation: at AWS, this is our top priority. To help you securely architect cloud solutions,&nbsp;<a href="https://www.aws.training/" target="_blank" rel="noopener noreferrer">AWS Training and Certification</a>&nbsp;recently added new <a href="https://www.aws.training/Training?searchPhrase=Security%2C%20Identity%20%26%20Compliance" target="_blank" rel="noopener noreferrer">free digital training</a> about security, including a new course about&nbsp;<a href="https://aws.amazon.com/guardduty/" target="_blank" rel="noopener noreferrer">Amazon GuardDuty</a>, a new managed threat-detection service.</p> 
<p>These introductory courses, built by AWS experts, are suitable for users and decision makers alike. Each course lasts 10–15 minutes, and you can learn at your own pace.</p> 
<h3>Digital training courses about security</h3> 
<p>To find these free courses, navigate to the <a href="https://www.aws.training/Training?searchPhrase=Security%2C%20Identity%20%26%20Compliance" target="_blank" rel="noopener noreferrer">Security, Identity &amp; Compliance page</a>. I suggest the following introductory courses:</p> 
<li><a href="https://www.aws.training/learningobject/video?id=16379" target="_blank" rel="noopener noreferrer">Introduction to Amazon Cloud Directory</a> (10 minutes)<br /> Learn how to use <a href="https://aws.amazon.com/clouddirectory/" target="_blank" rel="noopener noreferrer">Amazon Cloud Directory</a> to build flexible, cloud-native directories for organizing hierarchies of data along multiple dimensions.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16501" target="_blank" rel="noopener noreferrer">Introduction to Amazon Cognito</a> (10 minutes)<br /> Learn how to use <a href="https://aws.amazon.com/cognito/" target="_blank" rel="noopener noreferrer">Amazon Cognito</a> to add user sign-up and sign-in to your mobile and web applications.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16620" target="_blank" rel="noopener noreferrer">Introduction to Amazon GuardDuty</a> (10 minutes)<br /> Learn how to use <a href="https://aws.amazon.com/guardduty/" target="_blank" rel="noopener noreferrer">Amazon GuardDuty</a>, a new AWS managed threat-detection service that continuously monitors your account to detect known and unknown threats.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16455" target="_blank" rel="noopener noreferrer">Introduction to Amazon Macie</a> (10 minutes)<br /> Learn how <a href="http://aws.amazon.com/macie" target="_blank" rel="noopener noreferrer">Amazon Macie</a> uses machine learning to automatically discover, classify, and protect sensitive data in the AWS Cloud.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=15872" target="_blank" rel="noopener noreferrer">Introduction to AWS Artifact</a> (10 minutes)<br /> Get a brief overview of this service, including the definition of an audit artifact and a demonstration of <a href="https://aws.amazon.com/artifact/" target="_blank" rel="noopener noreferrer">AWS Artifact</a>.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=15890" target="_blank" rel="noopener noreferrer">Introduction to AWS Certificate Manager</a> (10 minutes)<br /> Get a high-level overview of how to use <a href="https://aws.amazon.com/acm/" target="_blank" rel="noopener noreferrer">AWS Certificate Manager</a> to issue and configure SSL certificates for your applications.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16448" target="_blank" rel="noopener noreferrer">Introduction to AWS Identity and Access Management</a> (10 minutes)<br /> Learn how you can use <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> (IAM) for authentication and authorization to AWS services. Discussions about IAM policies and roles also are included.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=15879" target="_blank" rel="noopener noreferrer">Introduction to Amazon Inspector</a> (15 minutes)<br /> Get an overview of how you can use <a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector</a> to analyze AWS resources and help identify potential security issues.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16451" target="_blank" rel="noopener noreferrer">Introduction to AWS Organizations</a> (10 minutes)<br /> <a href="https://aws.amazon.com/organizations/" target="_blank" rel="noopener noreferrer">AWS Organizations</a> offers policy-based management for multiple AWS accounts. In this course, learn how to access and use Organizations.</li> 
<li><a href="https://www.aws.training/learningobject/video?id=16024" target="_blank" rel="noopener noreferrer">Introduction to AWS WAF</a> (15 minutes)<br /> Review common <a href="https://aws.amazon.com/waf/" target="_blank" rel="noopener noreferrer">AWS WAF</a> use cases and learn which conditions AWS WAF (a web application firewall) can detect. A brief demonstration shows how to configure AWS WAF filters and rules.</li> 
<h3>Go deeper with AWS security courses</h3> 
<p>To supplement your foundational training, take these security-focused courses:</p> 
<li><a href="https://aws.amazon.com/training/course-descriptions/security-fundamentals/" target="_blank" rel="noopener noreferrer">AWS Security Fundamentals</a> (3 hours) is a self-paced digital course. This course introduces you to fundamental cloud computing and AWS security concepts, including AWS access control and management, governance, logging, and encryption methods. The course also covers security-related compliance protocols and risk management strategies, as well as procedures related to auditing your AWS security infrastructure.</li> 
<li><a href="https://aws.amazon.com/training/course-descriptions/security-operations/" target="_blank" rel="noopener noreferrer">Security Operations on AWS</a> (3 days) is an instructor-led course that offers in-depth classroom instruction. This course demonstrates how to use AWS security services to help remain secure and compliant in the AWS Cloud. The course focuses on AWS security best practices that you can implement to enhance the security of your data and systems in the cloud.</li> 
<p><a href="http://aws.training" target="_blank" rel="noopener noreferrer">AWS Training and Certification</a> continually&nbsp;evaluates and expands the training courses available to you, so be sure to visit the website regularly&nbsp;to explore the latest offerings.</p> 
<p>– Janna</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/acm/" rel="tag">ACM</a>, <a href="https://aws.amazon.com/blogs/security/tag/amazon-cloud-directory/" rel="tag">Amazon Cloud Directory</a>, <a href="https://aws.amazon.com/blogs/security/tag/amazon-cognito/" rel="tag">Amazon Cognito</a>, <a href="https://aws.amazon.com/blogs/security/tag/amazon-inspector/" rel="tag">Amazon Inspector</a>, <a href="https://aws.amazon.com/blogs/security/tag/artifact/" rel="tag">Artifact</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-iam/" rel="tag">AWS IAM</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-organizations/" rel="tag">AWS Organizations</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-training-and-cetification/" rel="tag">AWS Training and Cetification</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-waf/" rel="tag">AWS WAF</a>, <a href="https://aws.amazon.com/blogs/security/tag/guardduty/" rel="tag">GuardDuty</a>, <a href="https://aws.amazon.com/blogs/security/tag/macie/" rel="tag">Macie</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6852');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/SecuritybyDesignAWS_800x400.png" /> 
<b class="lb-b blog-post-title" property="name headline">A New AWS Government, Education, and Nonprofits Blog Post: “AWS Achieves Full Empanelment for the Delivery of Cloud Services by India’s Ministry of Electronics and Information Technology”</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><a href="https://aws.amazon.com/blogs/security/author/clieb/" title="Posts by Craig Liebendorfer" property="name">Craig Liebendorfer</a></span> | on 
<time property="datePublished" datetime="2017-12-13T09:55:58+00:00">13 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/a-new-aws-government-education-nonprofits-blog-post-aws-achieves-full-empanelment-for-the-delivery-of-cloud-services-by-indias-ministry-of-electronics-and-information-technology/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6891" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6891&amp;disqus_title=A+New+AWS+Government%2C+Education%2C+and+Nonprofits+Blog+Post%3A+%26%238220%3BAWS+Achieves+Full+Empanelment+for+the+Delivery+of+Cloud+Services+by+India%E2%80%99s+Ministry+of+Electronics+and+Information+Technology%26%238221%3B&amp;disqus_url=https://aws.amazon.com/blogs/security/a-new-aws-government-education-nonprofits-blog-post-aws-achieves-full-empanelment-for-the-delivery-of-cloud-services-by-indias-ministry-of-electronics-and-information-technology/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6891');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p style="text-align: center"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/SecuritybyDesignAWS.png" /></p> 
<p>AWS recently announced that Amazon Internet Services Private Limited (AISPL), an Indian subsidiary of the Amazon Group that undertakes the resale and marketing of AWS Cloud services in India, has achieved full Cloud Service Provider (CSP) empanelment and successfully completed the Standardization Testing and Quality Certification (STQC) audit from the Indian Ministry of Electronics and Information Technology (MeitY) for cloud services delivered from the AWS Asia Pacific (Mumbai) Region.</p> 
<p>With this certification, AISPL joins a list of approved providers that meet predefined government standards of quality, availability, and security. With 52 global security certifications, attestations, assurance programs, and quality audits already achieved, such as ISO 9001, SOC1, SOC2, and SOC3, AWS is the first global cloud service provider to earn this status in India.</p> 
<p>To read the full blog post, see <a href="https://aws.amazon.com/blogs/publicsector/aws-achieves-full-empanelment-for-the-delivery-of-cloud-services-by-indias-ministry-of-electronics-and-information-technology/" target="_blank" rel="noopener noreferrer">AWS Achieves Full Empanelment for the Delivery of Cloud Services by India’s Ministry of Electronics and Information Technology</a>.</p> 
<p>– Craig</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/aispl/" rel="tag">AISPL</a>, <a href="https://aws.amazon.com/blogs/security/tag/amazon-internet-services-private-limited/" rel="tag">Amazon Internet Services Private Limited</a>, <a href="https://aws.amazon.com/blogs/security/tag/cloud-service-provider/" rel="tag">Cloud Service Provider</a>, <a href="https://aws.amazon.com/blogs/security/tag/csp-empanelment/" rel="tag">CSP empanelment</a>, <a href="https://aws.amazon.com/blogs/security/tag/meity/" rel="tag">MeitY</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6891');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/12/EUFlag_600x399.png" /> 
<b class="lb-b blog-post-title" property="name headline">Introducing the New GDPR Center and “Navigating GDPR Compliance on AWS” Whitepaper</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Chad Woolf</span></span> | on 
<time property="datePublished" datetime="2017-12-13T08:58:00+00:00">13 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/introducing-the-new-gdpr-center-and-navigating-gdpr-compliance-on-aws-whitepaper/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6827" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6827&amp;disqus_title=Introducing+the+New+GDPR+Center+and+%E2%80%9CNavigating+GDPR+Compliance+on+AWS%E2%80%9D+Whitepaper&amp;disqus_url=https://aws.amazon.com/blogs/security/introducing-the-new-gdpr-center-and-navigating-gdpr-compliance-on-aws-whitepaper/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6827');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p style="text-align: center"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/12/EUFlag_400x266.png" /></p> 
<p>At AWS re:Invent 2017, the AWS Compliance team participated in excellent engagements with AWS customers about the <a href="https://www.eugdpr.org/" target="_blank" rel="noopener noreferrer">General Data Protection Regulation</a> (GDPR), including discussions that generated helpful input. Today, I am announcing resulting enhancements to our recently launched <a href="https://aws.amazon.com/compliance/gdpr-center/" target="_blank" rel="noopener noreferrer">GDPR Center</a> and the release of a new whitepaper, <a href="https://d1.awsstatic.com/whitepapers/compliance/GDPR_Compliance_on_AWS.pdf" target="_blank" rel="noopener noreferrer">Navigating GDPR Compliance on AWS</a>. The resources available on the GDPR Center are designed to give you GDPR basics, and provide some ideas as you work out the details of the regulation and find a path to compliance.</p> 
<p>In this post, I focus on two of these new GDPR requirements&nbsp;in terms&nbsp;of articles in the GDPR, and explain some of the AWS services and other resources that can help you meet these requirements.</p> 
<h3>Background about the GDPR</h3> 
<p>The GDPR is a European privacy law that will become enforceable on May 25, 2018, and is intended to harmonize data protection laws throughout the European Union (EU) by applying a single data protection law that is binding throughout each EU member state. The GDPR not only applies to organizations located within the EU, but also to organizations located outside the EU if they offer goods or services to, or monitor the behavior of, EU data subjects. All AWS services will comply with the GDPR in advance of the May 25, 2018, enforcement date.</p> 
<p>We are already seeing customers move personal data to AWS to help solve challenges in complying with the&nbsp;EU’s GDPR because of AWS’s advanced toolset for identifying, securing, and managing all types of data, including personal data. Steve Schmidt, the AWS CISO, <a href="https://aws.amazon.com/blogs/security/aws-and-the-general-data-protection-regulation/" target="_blank" rel="noopener noreferrer">has already written</a> about the <a href="https://cispe.cloud/#code-of-conduct" target="_blank" rel="noopener noreferrer">internal </a>and external work we have been undertaking to help you use AWS services to meet your own GDPR compliance goals.</p> 
<h3>Article 25 – Data Protection by Design and by Default (Privacy by Design)</h3> 
<p>Privacy by Design is the integration of data privacy and compliance into the systems development process, enabling applications, systems, and accounts, among other things, to be secure by default. To secure your AWS account, we offer a script to evaluate your AWS account against the full <a href="https://www.cisecurity.org/benchmark/amazon_web_services/" target="_blank" rel="noopener noreferrer">Center for Internet Security (CIS) Amazon Web Services Foundations Benchmark 1.1</a>. You can access this public benchmark on <a href="https://github.com/awslabs/aws-security-benchmark" target="_blank" rel="noopener noreferrer">GitHub</a>. Additionally, <a href="https://aws.amazon.com/premiumsupport/trustedadvisor/" target="_blank" rel="noopener noreferrer">AWS Trusted Advisor</a> is an online resource to help you improve security by optimizing your AWS environment. Among other things, Trusted Advisor lists a number of security-related controls you should be monitoring. AWS also offers <a href="https://aws.amazon.com/cloudtrail/" target="_blank" rel="noopener noreferrer">AWS CloudTrail</a>,&nbsp;a logging tool to track usage and API activity. Another example of tooling that enables data protection is <a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector</a>, which includes a knowledge base of hundreds of rules (regularly updated by AWS security researchers) mapped to common security best practices and vulnerability definitions. Examples of built-in rules include checking for remote root login being enabled or vulnerable software versions installed. These and other tools enable you to design an environment that protects customer data by design.</p> 
<p>An accurate inventory of all the GDPR-impacting data is important but sometimes difficult to assess. AWS has some advanced tooling, such as <a href="https://aws.amazon.com/macie/" target="_blank" rel="noopener noreferrer">Amazon Macie</a>, to help you determine where customer data is present in your AWS resources. Macie uses advanced machine learning to automatically discover and classify data so that you can protect data, per Article 25.</p> 
<h3>Article 32 – Security of Processing</h3> 
<p>You can use many AWS services and features to secure the processing of data regulated by the GDPR. <a href="https://aws.amazon.com/vpc/" target="_blank" rel="noopener noreferrer">Amazon Virtual Private Cloud (Amazon VPC)</a> lets you provision a logically isolated section of the AWS Cloud where you can launch resources in a virtual network that you define. You have complete control over your virtual networking environment, including the selection of your own IP address range, creation of subnets, and configuration of route tables and network gateways. With Amazon VPC, you can make the Amazon Cloud a seamless extension of your existing on-premises resources.</p> 
<p><a href="https://aws.amazon.com/kms" target="_blank" rel="noopener noreferrer">AWS Key Management Service (AWS KMS)</a> is a managed service that makes it easy for you to create and control the encryption keys used to encrypt your data, and uses hardware security modules (HSMs) to help protect your keys. Managing keys with&nbsp;AWS KMS&nbsp;allows you to choose to encrypt data either on the server side or the client side. AWS KMS is integrated with several other AWS services to help you protect the data you store with these services. AWS KMS is also integrated with CloudTrail to provide you with logs of all key usage to help meet your regulatory and compliance needs. You can also use the AWS Encryption SDK to correctly generate and use encryption keys, as well as protect keys after they have been used.</p> 
<p>We also recently announced <a href="https://aws.amazon.com/blogs/aws/new-amazon-s3-encryption-security-features/" target="_blank" rel="noopener noreferrer">new encryption and security features for Amazon S3</a>, including default encryption and a detailed inventory report. Services of this type as well as additional GDPR enablers will be published regularly on our&nbsp;<a href="https://aws.amazon.com/compliance/gdpr-center/" target="_blank" rel="noopener noreferrer">GDPR Center</a>.</p> 
<h3><strong>Other resources</strong></h3> 
<p>As you prepare for GDPR, you may want to visit our <a href="https://aws.amazon.com/compliance/customer-center/" target="_blank" rel="noopener noreferrer">AWS Customer Compliance Center</a> or <a href="https://aws.amazon.com/tools/" target="_blank" rel="noopener noreferrer">Tools for Amazon Web Services</a>&nbsp;to learn about options for building anything from small scripts that delete data to a full orchestration framework that uses <a href="https://aws.amazon.com/products/developer-tools/" target="_blank" rel="noopener noreferrer">AWS Code services</a>.</p> 
<p>-Chad</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/amazon-inspector/" rel="tag">Amazon Inspector</a>, <a href="https://aws.amazon.com/blogs/security/tag/amazon-macie/" rel="tag">Amazon Macie</a>, <a href="https://aws.amazon.com/blogs/security/tag/amazon-vpc/" rel="tag">Amazon VPC</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-cloudtrail/" rel="tag">AWS CloudTrail</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-kms/" rel="tag">AWS KMS</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-trusted-advisor/" rel="tag">AWS Trusted Advisor</a>, <a href="https://aws.amazon.com/blogs/security/tag/center-for-internet-security/" rel="tag">Center for Internet Security</a>, <a href="https://aws.amazon.com/blogs/security/tag/cis/" rel="tag">CIS</a>, <a href="https://aws.amazon.com/blogs/security/tag/gdpr/" rel="tag">GDPR</a>, <a href="https://aws.amazon.com/blogs/security/tag/general-data-protection-regulation/" rel="tag">General Data Protection Regulation</a>, <a href="https://aws.amazon.com/blogs/security/tag/prvacy-by-design/" rel="tag">Prvacy by Design</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6827');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/13/AmazonGuardDuty.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Manage Amazon GuardDuty Security Findings Across Multiple Accounts</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Tom Stickle</span></span> | on 
<time property="datePublished" datetime="2017-12-13T07:59:26+00:00">13 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/amazon-guardduty/" title="View all posts in Amazon GuardDuty"><span property="articleSection">Amazon GuardDuty</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-manage-amazon-guardduty-security-findings-across-multiple-accounts/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6785" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6785&amp;disqus_title=How+to+Manage+Amazon+GuardDuty+Security+Findings+Across+Multiple+Accounts&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-manage-amazon-guardduty-security-findings-across-multiple-accounts/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6785');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>Introduced at AWS re:Invent 2017,&nbsp;<a href="https://aws.amazon.com/guardduty/" target="_blank" rel="noopener noreferrer">Amazon GuardDuty</a> is a managed threat detection service that continuously monitors for malicious or unauthorized behavior to help you protect your AWS accounts and workloads. In an <a href="https://aws.amazon.com/blogs/aws/amazon-guardduty-continuous-security-monitoring-threat-detection/" target="_blank" rel="noopener noreferrer">AWS Blog post</a>, Jeff Barr shows you how to enable GuardDuty to monitor your AWS resources continuously. That blog post shows how to get started with a single GuardDuty account and provides an overview of the features of the service. Your security team, though, will probably want to use GuardDuty to monitor a <em>group</em> of AWS accounts continuously.</p> 
<p>In this post, I demonstrate how to use GuardDuty to monitor a group of AWS accounts and have their findings routed to another AWS account—the <em>master account</em>—that is owned by a security team. The method I demonstrate in this post is especially useful if your security team is responsible for monitoring a group of AWS accounts over which it does not have direct access—known as <em>member accounts</em>. In this solution, I simplify the work needed to enable GuardDuty in member accounts and configure findings by simplifying the process, which I do by enabling GuardDuty in the master account and inviting member accounts.</p> 
<h3>Enable GuardDuty in a master account and invite member accounts</h3> 
<p>To get started, you must enable GuardDuty in the master account, which will receive GuardDuty findings. The master account should be managed by your security team, and it will display the findings from all member accounts. The master account can be reverted later by removing any member accounts you add to it. Adding member accounts is a two-way handshake mechanism to ensure that administrators from both the master and member accounts formally agree to establish the relationship.</p> 
<p>To enable GuardDuty in the master account and add member accounts:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/guardduty" target="_blank" rel="noopener noreferrer">GuardDuty console</a>.</li> 
<li>In the navigation pane, choose <strong>Accounts</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/1_multiple_accounts.png" /></li> 
</ol> 
<ol start="3"> 
<li>To designate this account as the GuardDuty master account, start adding member accounts: 
<li>You can add individual accounts by choosing <strong>Add Account</strong>, or you can add a list of accounts by choosing <strong>Upload List (.csv)</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/2_account_accountList.png" /></li> 
</ul> </li> 
</ol> 
<ol start="4"> 
<li>Now, add the account ID and email address of the member account, and choose <strong>Add</strong>. (If you are uploading a list of accounts, choose <strong>Browse</strong>, choose the .csv file with the member accounts [one email address and account ID per line], and choose <strong>Add accounts</strong>.)<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/3_addMember.png" /></li> 
</ol> 
<p style="padding-left: 40px">For security reasons, AWS checks to make sure each account ID is valid and that you’ve entered each member account’s email address that was used to create the account. If a member account’s account ID and email address do not match, GuardDuty does not send an invitation.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/4_invite.png" /></p> 
<ol start="5"> 
<li>After you add all the member accounts you want to add, you will see them listed in the <strong>Member&nbsp;accounts</strong> table with a <strong>Status</strong> of <strong>Invite</strong>. You don’t have to individually invite each account—you can choose a group of accounts and when you choose to invite one account in the group, all accounts are invited.</li> 
<li>When you choose <strong>Invite </strong>for each member account: 
<ol type="a"> 
<li>AWS checks to make sure the account ID is valid and the email address provided is the email address of the member account.</li> 
<li>AWS sends an email to the member account email address with a link to the GuardDuty console, where the member account owner can accept the invitation. You can add a customized message from your security team. Account owners who receive the invitation must sign in to their AWS account to accept the invitation. The service also sends an invitation through the <a href="https://aws.amazon.com/premiumsupport/phd/" target="_blank" rel="noopener noreferrer">AWS Personal Health Dashboard</a> in case the member email address is not monitored. This invitation appears in the member account under the AWS Personal Health Dashboard alert bell on the AWS Management Console.</li> 
<li>A pending-invitation indicator is shown on the GuardDuty console of the member account, as shown in the following screenshot.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/5_invitations.png" /></li> 
</ol> </li> 
</ol> 
<p style="padding-left: 70px">When the invitation is sent by email, it is sent to the account owner of the GuardDuty member account.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/6_email_invite.png" /></p> 
<p style="padding-left: 70px">The account owner can click the link in the email invitation or the AWS Personal Health Dashboard message, or the account owner can sign in to their account and navigate to the GuardDuty console. In all cases, the member account displays the pending invitation in the member account’s GuardDuty console with instructions for accepting the invitation. The GuardDuty console walks the account owner through accepting the invitation, including enabling GuardDuty if it is not already enabled.</p> 
<p style="padding-left: 70px">If you prefer to work in the <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">AWS CLI</a>, you can enable GuardDuty and accept the invitation. To do this, call <code>CreateDetector</code> to enable GuardDuty, and then call <code>AcceptInvitation</code>, which serves the same purpose as accepting the invitation in the GuardDuty console.</p> 
<ol start="7"> 
<li>After the member account owner accepts the invitation, the <strong>Status</strong> in the master account is changed to <strong>Monitored</strong>. The status helps you track the status of each AWS account that you invite.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/7_monitored.png" /></li> 
</ol> 
<p style="padding-left: 40px">You have enabled GuardDuty on the member account, and all findings will be forwarded to the master account. You can now monitor the findings about GuardDuty member accounts from the GuardDuty console in the master account.</p> 
<p>The member account owner can see GuardDuty findings by default and can control all aspects of the experience in the member account with <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> (IAM) permissions. Users with the appropriate permissions can end the multi-account relationship at any time by toggling the <strong>Accept</strong> button on the <strong>Accounts</strong> page. Note that ending the relationship changes the <strong>Status</strong> of the account to <strong>Resigned</strong> and also triggers a security finding on the side of the master account so that the security team knows the member account is no longer linked to the master account.</p> 
<h3>Working with GuardDuty findings</h3> 
<p>Most security teams have ticketing systems, chat operations, security information event management (SIEM) systems, or other security automation systems to which they would like to push GuardDuty findings. For this purpose, GuardDuty sends all findings as JSON-based messages through <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/events/WhatIsCloudWatchEvents.html" target="_blank" rel="noopener noreferrer">Amazon CloudWatch Events</a>, a scalable service to which you can subscribe and to which AWS services can stream system events. To access these events, navigate to the <a href="https://console.aws.amazon.com/cloudwatch/home" target="_blank" rel="noopener noreferrer">CloudWatch Events console</a> and <a href="http://docs.aws.amazon.com/guardduty/latest/ug/guardduty_findings_cloudwatch.html" target="_blank" rel="noopener noreferrer">create a rule</a> that subscribes to the GuardDuty-related findings. You then can assign a target such as <a href="https://aws.amazon.com/kinesis/data-firehose/" target="_blank" rel="noopener noreferrer">Amazon Kinesis Data Firehose</a> that can place the findings in a number of services such as <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a>. The following screenshot is of the CloudWatch Events console, where I have a rule that pulls all events from GuardDuty and pushes them to a preconfigured <a href="https://aws.amazon.com/lambda/" target="_blank" rel="noopener noreferrer">AWS Lambda</a> function.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/eventsToLambda_120717.jpg" /></p> 
<p>The following example is a subset of GuardDuty findings that includes relevant context and information about the nature of a threat that was detected. In this example, the <code>instanceId</code>, <code>i-00bb62b69b7004a4c</code>, is performing <a href="https://en.wikipedia.org/wiki/Secure_Shell" target="_blank" rel="noopener noreferrer">Secure Shell</a> (SSH) <a href="https://en.wikipedia.org/wiki/Brute-force_attack" target="_blank" rel="noopener noreferrer">brute-force attacks</a> against IP address <code>172.16.0.28</code>. From a Lambda function, you can access any of the following fields such as the title of the finding and its description, and send those directly to your ticketing system.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/9_findingsubset.png" /></p> 
<p>You can use other AWS services to build custom analytics and visualizations of your security findings. For example, you can connect Kinesis Data Firehose to CloudWatch Events and write events to an S3 bucket in a standard format, which can be encrypted with <a href="https://aws.amazon.com/kms/" target="_blank" rel="noopener noreferrer">AWS Key Management Service</a> and then compressed. You also can use <a href="https://aws.amazon.com/quicksight/" target="_blank" rel="noopener noreferrer">Amazon QuickSight</a> to build ad hoc dashboards by using <a href="https://aws.amazon.com/glue" target="_blank" rel="noopener noreferrer">AWS Glue</a> and <a href="http://aws.amazon.com/athena" target="_blank" rel="noopener noreferrer">Amazon Athena</a>. Similarly, you can place the data from Kinesis Data Firehose in <a href="http://aws.amazon.com/elasticsearch-service" target="_blank" rel="noopener noreferrer">Amazon Elasticsearch Service</a>, with which you can use tools such as <a href="https://aws.amazon.com/blogs/security/tag/kibana/" target="_blank" rel="noopener noreferrer">Kibana</a> to build your own visualizations and dashboards.</p> 
<p>Like most other AWS services, GuardDuty is a regional service. This means that when you enable GuardDuty in an <a href="https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/" target="_blank" rel="noopener noreferrer">AWS Region</a>, all findings are generated and delivered in that region. If you are regulated by a compliance regime, this is often an important requirement to ensure that security findings remain in a specific jurisdiction. Because customers have let us know they would prefer to be able to enable GuardDuty globally and have all findings aggregated in one place, we intend to give the choice of regional or global isolation as we evolve this new service.</p> 
<h3>Summary</h3> 
<p>In this blog post, I have demonstrated how to use GuardDuty to monitor a group of GuardDuty member accounts and aggregate security findings in a central master GuardDuty account. You can use this solution whether or not you have direct control over the member accounts.</p> 
<p>If you have comments about this blog post, submit them in the “Comments” section below. If you have questions about using GuardDuty, start a thread in the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=288" target="_blank" rel="noopener noreferrer">GuardDuty forum</a> or <a href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
<p>-Tom</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/aws-cli/" rel="tag">AWS CLI</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-personal-health-dashboard/" rel="tag">AWS Personal Health Dashboard</a>, <a href="https://aws.amazon.com/blogs/security/tag/master-accounts/" rel="tag">master accounts</a>, <a href="https://aws.amazon.com/blogs/security/tag/member-accounts/" rel="tag">member accounts</a>, <a href="https://aws.amazon.com/blogs/security/tag/multiple-accounts/" rel="tag">Multiple accounts</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6785');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/IAM_social.png" /> 
<b class="lb-b blog-post-title" property="name headline">Attend This Free December 14 Online Tech Talk: “Centralized AWS IAM Governance Using AWS CloudFormation StackSets and AWS Organizations”</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><a href="https://aws.amazon.com/blogs/security/author/clieb/" title="Posts by Craig Liebendorfer" property="name">Craig Liebendorfer</a></span> | on 
<time property="datePublished" datetime="2017-12-12T11:11:22+00:00">12 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/management-tools/aws-cloudformation/" title="View all posts in AWS CloudFormation*"><span property="articleSection">AWS CloudFormation*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-identity-and-access-management-iam/" title="View all posts in AWS Identity and Access Management (IAM)*"><span property="articleSection">AWS Identity and Access Management (IAM)*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/events/webinars/" title="View all posts in Webinars*"><span property="articleSection">Webinars*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/attend-this-free-december-14-tech-talk-centralized-iam-governance-using-cloudformation-stacksets-and-aws-organizations/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6819" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6819&amp;disqus_title=Attend+This+Free+December+14+Online+Tech+Talk%3A+%E2%80%9CCentralized+AWS+IAM+Governance+Using+AWS+CloudFormation+StackSets+and+AWS+Organizations%E2%80%9D&amp;disqus_url=https://aws.amazon.com/blogs/security/attend-this-free-december-14-tech-talk-centralized-iam-governance-using-cloudformation-stacksets-and-aws-organizations/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6819');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d0.awsstatic.com/Digital%20Marketing/Webinar/webinar_banner.png" /></p> 
<p>As part of the AWS Online Tech Talks series, AWS will present&nbsp;<a href="https://pages.awscloud.com/registration_121417_Centralized-IAM-Governance-using-CloudFormation-StackSets.html" target="_blank" rel="noopener noreferrer">Centralized AWS IAM Governance Using AWS CloudFormation StackSets and AWS Organizations</a>&nbsp;on Thursday, December 14. This tech talk will start at 9:00 A.M. Pacific Time and end at 9:40 A.M. Pacific Time.</p> 
<p>With the introduction of AWS Organizations and AWS CloudFormation StackSets,&nbsp;you can&nbsp;create and manage standard AWS Identity and Access Management (IAM) roles, customer managed policies, and federated identity providers across a set of accounts in your organization. This tech talk goes through the details of setting up a CloudFormation StackSet in your master account, and creating stack instances in each account that set up roles and policies in each account in an organizational unit (OU). We also will discuss how to update the stacks and how to integrate StackSets into your account creation process. This tech talk is a followup to a set of blog posts on the AWS Security Blog published during the summer of 2017.</p> 
<p>This tech talk is free.&nbsp;<a href="https://pages.awscloud.com/registration_121417_Centralized-IAM-Governance-using-CloudFormation-StackSets.html" target="_blank" rel="noopener noreferrer">Register today</a>.</p> 
<p>–&nbsp;Craig</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/stacksets/" rel="tag">StackSets</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6819');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/11/awsshield_100517_600x300-b.jpg" /> 
<b class="lb-b blog-post-title" property="name headline">Attend This Free December 13 Tech Talk: “Cloud-Native DDoS Mitigation with AWS Shield”</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><a href="https://aws.amazon.com/blogs/security/author/clieb/" title="Posts by Craig Liebendorfer" property="name">Craig Liebendorfer</a></span> | on 
<time property="datePublished" datetime="2017-12-11T15:07:28+00:00">11 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/events/webinars/" title="View all posts in Webinars*"><span property="articleSection">Webinars*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/register-for-and-attend-this-december-14-aws-shield-tech-talk-cloud-native-ddos-mitigation/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6810" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6810&amp;disqus_title=Attend+This+Free+December+13+Tech+Talk%3A+%26%238220%3BCloud-Native+DDoS+Mitigation+with+AWS+Shield%26%238221%3B&amp;disqus_url=https://aws.amazon.com/blogs/security/register-for-and-attend-this-december-14-aws-shield-tech-talk-cloud-native-ddos-mitigation/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6810');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d0.awsstatic.com/Digital%20Marketing/Webinar/webinar_banner.png" /></p> 
<p>As part of the AWS Online Tech Talks series, AWS will present&nbsp;<a href="https://pages.awscloud.com/registration_121317_Cloud-Native-DDoS-Mitigation.html" target="_blank" rel="noopener noreferrer">Cloud-Native DDoS Mitigation with AWS Shield</a>&nbsp;on Wednesday, December 13. This tech talk will start at 9:00 A.M. Pacific Time and end at 9:40 A.M. Pacific Time.</p> 
<p>Distributed Denial of Service (DDoS) mitigation can help you maintain application availability, but traditional solutions are hard to scale and require expensive hardware. AWS Shield is a managed DDoS protection service that helps you safeguard web applications running in the AWS Cloud. In this tech talk, you will learn simple techniques for using AWS Shield to help you build scalable DDoS defenses into your applications without investing in costly infrastructure.&nbsp;You also will learn&nbsp;how AWS Shield helps you monitor your applications to detect DDoS attempts and how to respond to in-progress events.</p> 
<p>This tech talk is free.&nbsp;<a href="https://pages.awscloud.com/registration_121317_Cloud-Native-DDoS-Mitigation.html" target="_blank" rel="noopener noreferrer">Register today</a>.</p> 
<p>–&nbsp;Craig</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/aws-shield/" rel="tag">AWS Shield</a>, <a href="https://aws.amazon.com/blogs/security/tag/ddos-mitigation/" rel="tag">DDoS mitigation</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6810');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/05/CJIS_Logo-1.jpg" /> 
<b class="lb-b blog-post-title" property="name headline">Now Available: A New AWS Quick Start Reference Deployment for CJIS</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Emil Lerch</span></span> | on 
<time property="datePublished" datetime="2017-12-08T07:56:33+00:00">08 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/now-available-a-new-aws-quick-start-reference-deployment-for-cjis/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6664" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6664&amp;disqus_title=Now+Available%3A+A+New+AWS+Quick+Start+Reference+Deployment+for+CJIS&amp;disqus_url=https://aws.amazon.com/blogs/security/now-available-a-new-aws-quick-start-reference-deployment-for-cjis/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6664');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p style="text-align: center"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/05/CJIS_Logo.jpg" /></p> 
<p>As part of the <a href="https://aws.amazon.com/quickstart/#security" target="_blank" rel="noopener noreferrer">AWS Compliance Quick Start program</a>, AWS has published a new Quick Start reference deployment for customers who need to align with <a href="https://www.fbi.gov/services/cjis/cjis-security-policy-resource-center" target="_blank" rel="noopener noreferrer">Criminal Justice Information Services (CJIS) Security Policy 5.6</a> and process Criminal Justice Information (CJI) in accordance with this policy. The new Quick Start is <a href="https://aws.amazon.com/quickstart/architecture/accelerator-cjis/" target="_blank" rel="noopener noreferrer">AWS Enterprise Accelerator – Compliance: CJIS</a>, and it makes it easier for you to address the list of supported controls you will find in the <a href="https://github.com/aws-quickstart/quickstart-enterprise-accelerator-cjis/raw/master/assets/CJISD-ITS-DOC-08140-5.6-Controls-Mapping.xlsx" target="_blank" rel="noopener noreferrer">security controls matrix</a> that accompanies the Quick Start.</p> 
<p>As all AWS Quick Starts do, this Quick Start helps you automate the building of a recommended architecture that, when deployed as a package, provides a baseline AWS configuration. The Quick Start uses sets of nested <a href="https://aws.amazon.com/cloudformation/" target="_blank" rel="noopener noreferrer">AWS CloudFormation</a> templates and <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html" target="_blank" rel="noopener noreferrer">user data scripts</a> to create an example environment with a two-VPC, multi-tiered web service.</p> 
<p>The new Quick Start also includes:</p> 
<li><a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> resources – Policies, groups, roles, and instance profiles.</li> 
<li><a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a> buckets – Encrypted web content, logging, and backup.</li> 
<li><a href="https://aws.amazon.com/blogs/security/controlling-network-access-to-ec2-instances-using-a-bastion-server/" target="_blank" rel="noopener noreferrer">A bastion host</a> for troubleshooting and administration.</li> 
<li>An encrypted <a href="https://aws.amazon.com/rds/" target="_blank" rel="noopener noreferrer">Amazon Relational Database Service</a> database instance running in multiple <a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html" target="_blank" rel="noopener noreferrer">Availability Zones</a>.</li> 
<li>A configuration that makes use of <a href="https://aws.amazon.com/cloudtrail/" target="_blank" rel="noopener noreferrer">AWS CloudTrail</a>, <a href="https://aws.amazon.com/cloudwatch/" target="_blank" rel="noopener noreferrer">Amazon CloudWatch</a>, and <a href="https://aws.amazon.com/config/" target="_blank" rel="noopener noreferrer">AWS Config Rules</a> to log, monitor, and alert.</li> 
<p>The recommended architecture built by the Quick Start supports a wide variety of AWS best practices (all of which are detailed in the Quick Start), including the use of multiple Availability Zones, isolation using public and private subnets, load balancing, and <a href="http://aws.amazon.com/autoscaling" target="_blank" rel="noopener noreferrer">Auto Scaling</a>.</p> 
<p>The Quick Start package also includes a deployment guide with detailed instructions and a security controls matrix that describes how the deployment addresses CJIS Security Policy 5.6 controls. You should have your IT security assessors and risk decision makers review the security controls matrix so that they can understand the extent of the implementation of the controls within the architecture. The matrix also identifies the specific resources in the CloudFormation templates that affect each control, and contains cross-references to the CJIS Security Policy 5.6 security controls.</p> 
<p>If you have questions about this new Quick Start, contact the <a href="mailto:compliance-accelerator@amazon.com" target="_blank" rel="noopener noreferrer">AWS Compliance Quick Start team</a>. For more information about the AWS CJIS program, see <a href="https://aws.amazon.com/compliance/cjis/" target="_blank" rel="noopener noreferrer">CJIS Compliance</a>.</p> 
<p>– Emil</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/cjis/" rel="tag">CJIS</a>, <a href="https://aws.amazon.com/blogs/security/tag/cloudformation-templates/" rel="tag">CloudFormation templates</a>, <a href="https://aws.amazon.com/blogs/security/tag/quick-start/" rel="tag">Quick Start</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6664');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/05/AM_AWSSSOUseCases_1217-1080x630.png" /> 
<b class="lb-b blog-post-title" property="name headline">Introducing AWS Single Sign-On</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Anand Murugesan</span></span> | on 
<time property="datePublished" datetime="2017-12-07T18:15:25+00:00">07 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-identity-and-access-management-iam/" title="View all posts in AWS Identity and Access Management (IAM)*"><span property="articleSection">AWS Identity and Access Management (IAM)*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-single-sign-on-sso/" title="View all posts in AWS Single Sign-On (SSO)"><span property="articleSection">AWS Single Sign-On (SSO)</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/introducing-aws-single-sign-on/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6680" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6680&amp;disqus_title=Introducing+AWS+Single+Sign-On&amp;disqus_url=https://aws.amazon.com/blogs/security/introducing-aws-single-sign-on/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6680');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>Today, AWS introduced <a href="https://aws.amazon.com/single-sign-on/" target="_blank" rel="noopener noreferrer">AWS Single Sign-On</a> (AWS SSO), a service that makes it easy for you to centrally manage SSO access to multiple AWS accounts and business applications. AWS SSO provides a user portal so that your users can find and access all of their assigned accounts and applications from one place, using their existing corporate credentials. AWS SSO is integrated with <a href="https://aws.amazon.com/organizations/" target="_blank" rel="noopener noreferrer">AWS Organizations</a> to enable you to manage access to AWS accounts in your organization. In addition, AWS SSO supports <a href="https://aws.amazon.com/iam/details/saml/" target="_blank" rel="noopener noreferrer">Security Assertion Markup Language</a> (SAML) 2.0, which means you can extend SSO access to your SAML-enabled applications by using the AWS SSO application configuration wizard. AWS SSO also includes built-in SSO integrations with many business applications, such as Salesforce, Box, and Office 365.</p> 
<p>In this blog post, I help you get started with AWS SSO by answering three main questions:</p> 
<ol> 
<li>What benefits does AWS SSO provide?</li> 
<li>What are the key features of AWS SSO?</li> 
<li>How do I get started?</li> 
</ol> 
<h3>1. What benefits does AWS SSO provide?</h3> 
<p>You can connect your corporate Microsoft Active Directory to AWS SSO so that your users can sign in to the user portal with their user names and passwords to access the AWS accounts and applications to which you have granted them access. The following screenshot shows an example of the AWS SSO user portal.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/07/am_userportal_new_a.png" /></p> 
<p>You can use AWS SSO to centrally assign, manage, and audit your users’ access to multiple AWS accounts and SAML-enabled business applications. You can add new users to the appropriate Active Directory group, which automatically gives them access to the AWS accounts and applications assigned for members of that group. AWS SSO also provides better visibility into which users accessed which accounts and applications from the user portal by recording all user portal sign-in activities in <a href="https://aws.amazon.com/cloudtrail/" target="_blank" rel="noopener noreferrer">AWS CloudTrail</a>. AWS SSO records details such as the IP address, user name, date, and time of the sign-in request. Any changes made by administrators in the AWS SSO console also are recorded in CloudTrail, and you can use security information and event management (SIEM) solutions such as Splunk and Sumo Logic to analyze the associated CloudTrail logs.</p> 
<h3>2. What are the key features of AWS SSO?</h3> 
<p>AWS SSO includes the following key features.</p> 
<p><strong>AWS SSO user portal:</strong> In the user portal, your users can easily find and access all applications and AWS accounts to which you have granted them access. Users can access the user portal with their corporate Active Directory credentials and access these applications without needing to enter their user name and password again.<strong>&nbsp;</strong></p> 
<p><strong>Integration with AWS Organizations: </strong>AWS SSO is integrated with Organizations to enable you to manage access to all AWS accounts in your organization. When you enable AWS SSO in your organization’s master account, AWS SSO lists all the accounts managed in your organization for which you can enable SSO access to AWS consoles.</p> 
<p><strong>Integration with on-premises Active Directory: </strong>AWS SSO integrates with your on-premises Active Directory by using <a href="https://aws.amazon.com/directoryservice/" target="_blank" rel="noopener noreferrer">AWS Directory Service</a>. Users can access AWS accounts and business applications by using their Active Directory credentials. You can manage which users or groups in your corporate directory can access which AWS accounts.</p> 
<p><strong>Centralized permissions management: </strong>With AWS SSO, you can centrally manage the permissions granted to users when they access AWS accounts via the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a>. You define users’ permissions as <em>permission sets</em>, which are collections of permissions that are based on a combination of AWS managed policies or AWS managed policies for job functions. AWS managed policies are designed to provide permissions for many common use cases, and AWS managed policies for job functions are designed to closely align with common job functions in the IT industry.</p> 
<p>With AWS SSO, you can configure all the necessary user permissions to your AWS resources in your AWS accounts by applying permission sets. For example, you can grant database administrators broad permissions to <a href="https://aws.amazon.com/rds/" target="_blank" rel="noopener noreferrer">Amazon Relational Database Service</a> in your development accounts, but limit their permissions in your production accounts. As you change these permission sets, AWS SSO helps you keep them updated in all relevant AWS accounts, allowing you to manage permissions centrally.</p> 
<p><strong>Application configuration wizard:</strong> You can configure SSO access to any SAML-enabled business application by using the AWS SSO application configuration wizard.</p> 
<p><strong>Built-in SSO integrations:</strong> AWS SSO provides built-in SSO integrations and step-by-step configuration instructions for many commonly used business applications such as Office 365, Salesforce, and Box.</p> 
<p><strong>Centralized auditing:</strong> AWS SSO logs all sign-in and administrative activities in CloudTrail. You can send these logs to SIEM solutions such as Splunk and Sumo Logic to analyze them.</p> 
<p><strong>Highly available multi-tenant SSO infrastructure: </strong>AWS SSO is built on a highly available, AWS managed SSO infrastructure. The AWS SSO multi-tenant architecture enables you to start using the service quickly without needing to procure hardware or install software.</p> 
<h3>3. How do I get started?</h3> 
<p style="text-align: center"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/07/AM_AWSSSOUseCases_120717a.png" /></p> 
<p>To get started, connect your corporate Active Directory to AWS SSO by using <a href="https://aws.amazon.com/directoryservice/" target="_blank" rel="noopener noreferrer">AWS Directory Service</a>. You have two choices to connect your corporate directory: use <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/directory_ad_connector.html" target="_blank" rel="noopener noreferrer">AD Connector</a>, or configure an&nbsp;<a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/tutorial_setup_trust.html" target="_blank" rel="noopener noreferrer">Active Directory trust</a> with your on-premises Active Directory. After connecting your corporate directory, you can set up accounts and applications for SSO access. You also can use <a href="https://aws.amazon.com/directoryservice/" target="_blank" rel="noopener noreferrer">AWS Managed Microsoft AD</a> in the cloud to manage your users and groups in the cloud, if you don’t have an on-premises Active Directory or don’t want to connect to on-premises Active Directory.</p> 
<p>The preceding diagram shows how AWS SSO helps connect your users to the AWS accounts and business applications to which they need access. The numbers in the diagram correspond to the following use cases.</p> 
<h4>Use case 1: Manage SSO access to AWS accounts</h4> 
<p>With AWS SSO, you can grant your users access to AWS accounts in your organization. You can do this by adding your users to groups in your corporate Active Directory. In AWS SSO, specify which Active Directory groups can access which AWS accounts, and then pick a permission set to specify the level of SSO access you are granting these Active Directory groups. AWS SSO then sets up AWS account access for the users in the groups. Going forward, you can add new users to your Active Directory groups, and AWS SSO automatically provides the users access to the configured accounts. You also can grant Active Directory users direct access to AWS accounts (without needing to add users to Active Directory groups).</p> 
<p>To configure AWS account access for your users:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/singlesignon" target="_blank" rel="noopener noreferrer">AWS SSO console</a>, and choose <strong>AWS accounts</strong> from the navigation pane. Choose which accounts you want users to access from the list of accounts. For this example, I am choosing three accounts from my <strong>MarketingBU </strong>organizational unit.&nbsp;I then choose <strong>Assign users</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot1a.png" /></li> 
<li>Choose <strong>Users</strong>, start typing to search for users, and then choose <strong>Search connected directory</strong>. This search will return a list of users from your connected directory. You can also search for groups.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot2a.png" /></li> 
<li>To select permission sets, you first have to create one. Choose <strong>Create new permission set</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot3a.png" /></li> 
<li>You can use an existing job function policy to create a permission set. This type of policy allows you to apply predefined AWS managed policies to a permission set that are based on common job functions in the IT industry. Alternatively, you can create a custom permission set based on custom policies.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot4.png" /></li> 
<li>For this example, I choose the <strong>SecurityAudit</strong> job function policy and then choose <strong>Create</strong>. As a result, this permission set will be available for me to pick on the next screen.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot5.png" /></li> 
<li>Choose a permission set to indicate what level of access you want to grant your users. For this example, I assign the <strong>SecurityAudit</strong> permission set I created in the previous step to the users I chose. I then choose <strong>Finish</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot6c.png" /></li> 
<li>Your users can sign in to the user portal and access the accounts to which you gave them access. AWS SSO automatically sets up the necessary trust between accounts to enable SSO. AWS SSO also sets up the necessary permissions in each account. This helps you scale your administrative tasks across multiple AWS accounts.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shotbetween6and7a.png" /></li> 
<li>The users can choose an account and a permission set to sign in to that account without needing to provide a password again. For example, if you grant a user two permission sets—one that is more restrictive and one that is less restrictive—the user can choose which permission set to use for a specific session. In the following screenshot, John has signed in to the AWS SSO user portal. He can see all the accounts to which he has access. For example, he can sign in to the <strong>Production Account</strong> with <strong>SecurityAudit</strong> permissions.<strong><br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot7.png" /><br /> </strong></li> 
</ol> 
<h4>Use case 2: Manage SSO access to business applications</h4> 
<p>AWS SSO has built-in support for SSO access to commonly used business applications such as Salesforce, Office 365, and Box. You can find these applications in the AWS SSO console and easily configure SSO access by using the application configuration wizard. After you configure an application for SSO access, you can grant users access by searching for users and groups in your corporate directory. For a complete list of supported applications, navigate to the <a href="https://console.aws.amazon.com/singlesignon" target="_blank" rel="noopener noreferrer">AWS SSO console</a>.</p> 
<p>To configure SSO access to business applications:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/singlesignon" target="_blank" rel="noopener noreferrer">AWS SSO console</a> and choose <strong>Applications</strong> from the navigation pane.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot8a.png" /></li> 
<li>Choose <strong>Add a new application</strong> and choose one or more of the applications in the list. For this example, I have chosen <strong>Dropbox</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/07/am_shot9a2.png" /></li> 
<li>Depending on which application you choose, you will be asked to complete step-by-step instructions to configure the application for SSO access. The instructions guide you to use the details provided in the <strong>AWS SSO metadata</strong> section to configure your application, and then to provide your application details in the <strong>Application metadata</strong>&nbsp;section. Choose <strong>Save changes</strong> when you are done.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot10a.png" /></li> 
<li>Optionally, you can provide additional SAML attribute mappings by choosing the <strong>Attribute mappings</strong> tab. You need to do this only if you want to pass user attributes from your corporate directory to the application.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot11a.png" /></li> 
<li>To give your users access to this application, choose the <strong>Assigned users</strong>&nbsp;tab. Choose <strong>Assign users</strong> to search your connected directory, and choose a user or group that can access this application.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot12a.png" /></li> 
</ol> 
<h4>Use case 3: Manage SSO access to custom SAML-enabled applications</h4> 
<p>You also can enable SSO access to your custom-built or partner-built SAML applications by using the AWS SSO application configuration wizard.</p> 
<p>To configure SSO access to SAML-enabled applications:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/singlesignon" target="_blank" rel="noopener noreferrer">AWS SSO console</a> and choose <strong>Applications</strong> from the navigation pane.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot8a.png" /></li> 
<li>Choose <strong>Add a new application</strong>, choose <strong>Custom SAML 2.0 application</strong>, and choose <strong>Add</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/07/am_shot13a2.png" /></li> 
<li>On the <strong>Custom SAML 2.0 application </strong>page<strong>,</strong> copy or download the AWS SSO metadata from the <strong>AWS SSO metadata</strong> section to configure your custom SAML-enabled application to recognize AWS SSO as an identity provider.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot14a-1.png" /></li> 
<li>On the same page, complete the application configuration details in the <strong>Application metadata</strong> section, and choose <strong>Save changes</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot15a.png" /></li> 
<li>You can provide additional SAML attribute mappings to be passed to your application in the SAML assertion by choosing the <strong>Attribute mappings</strong>&nbsp;tab. See the <a href="http://docs.aws.amazon.com/singlesignon/latest/userguide/attributemappingsconcept.html" target="_blank" rel="noopener noreferrer">documentation </a>for list of all available attributes.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot16a.png" /></li> 
<li>To give your users access to this application, choose the <strong>Assigned users</strong>&nbsp;tab. Choose <strong>Assign users</strong> to search your connected directory, and choose a user or group that can access this application.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/12/06/am_shot17a.png" /></li> 
</ol> 
<h3>Summary</h3> 
<p>In this blog post, I introduced AWS SSO and explained its key features, benefits, and use cases. With AWS SSO, you can centrally manage and audit SSO access to all your AWS accounts, cloud applications, and custom applications. To start using AWS SSO, navigate to the <a href="https://console.aws.amazon.com/singlesignon" target="_blank" rel="noopener noreferrer">AWS SSO console</a>.</p> 
<p>If you have feedback or questions about AWS SSO, start a new thread on the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=277" target="_blank" rel="noopener noreferrer">AWS SSO forum</a>.</p> 
<p>– Anand</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/aws-accounts/" rel="tag">AWS Accounts</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-directory-service/" rel="tag">AWS Directory Service</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-management-console/" rel="tag">AWS Management Console</a>, <a href="https://aws.amazon.com/blogs/security/tag/aws-sso/" rel="tag">AWS SSO</a>, <a href="https://aws.amazon.com/blogs/security/tag/cloud-applications/" rel="tag">Cloud applications</a>, <a href="https://aws.amazon.com/blogs/security/tag/cloud-apps/" rel="tag">Cloud apps</a>, <a href="https://aws.amazon.com/blogs/security/tag/google/" rel="tag">Google</a>, <a href="https://aws.amazon.com/blogs/security/tag/google-apps/" rel="tag">Google Apps</a>, <a href="https://aws.amazon.com/blogs/security/tag/gsuite/" rel="tag">GSuite</a>, <a href="https://aws.amazon.com/blogs/security/tag/idaas/" rel="tag">IDaaS</a>, <a href="https://aws.amazon.com/blogs/security/tag/identity/" rel="tag">Identity</a>, <a href="https://aws.amazon.com/blogs/security/tag/identity-as-a-service/" rel="tag">Identity as a Service</a>, <a href="https://aws.amazon.com/blogs/security/tag/microsoft-active-directory/" rel="tag">Microsoft Active Directory</a>, <a href="https://aws.amazon.com/blogs/security/tag/microsoft-ad/" rel="tag">Microsoft AD</a>, <a href="https://aws.amazon.com/blogs/security/tag/office-365/" rel="tag">Office 365</a>, <a href="https://aws.amazon.com/blogs/security/tag/oidc/" rel="tag">OIDC</a>, <a href="https://aws.amazon.com/blogs/security/tag/openid-connect/" rel="tag">OpenID Connect</a>, <a href="https://aws.amazon.com/blogs/security/tag/saas/" rel="tag">SaaS</a>, <a href="https://aws.amazon.com/blogs/security/tag/salesforce/" rel="tag">Salesforce</a>, <a href="https://aws.amazon.com/blogs/security/tag/saml/" rel="tag">SAML</a>, <a href="https://aws.amazon.com/blogs/security/tag/security-assertion-markup-language/" rel="tag">Security Assertion Markup Language</a>, <a href="https://aws.amazon.com/blogs/security/tag/single-sign-on/" rel="tag">Single sign-on</a>, <a href="https://aws.amazon.com/blogs/security/tag/sso/" rel="tag">SSO</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6680');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/Diagram6_1117_MC-a_900.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Easily Apply Amazon Cloud Directory Schema Changes with In-Place Schema Upgrades</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Mahendra Chheda</span></span> | on 
<time property="datePublished" datetime="2017-12-06T16:28:29+00:00">06 DEC 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/amazon-cloud-directory/" title="View all posts in Amazon Cloud Directory*"><span property="articleSection">Amazon Cloud Directory*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-easily-apply-amazon-cloud-directory-schema-changes-with-in-place-schema-upgrades/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6267" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6267&amp;disqus_title=How+to+Easily+Apply+Amazon+Cloud+Directory+Schema+Changes+with+In-Place+Schema+Upgrades&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-easily-apply-amazon-cloud-directory-schema-changes-with-in-place-schema-upgrades/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6267');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>Now, <a href="https://aws.amazon.com/clouddirectory/" target="_blank" rel="noopener noreferrer">Amazon Cloud Directory</a> makes it easier for you to apply schema changes across your directories with in-place schema upgrades. Your directory now remains available while Cloud Directory applies <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/inplaceschemaupgrade.html" target="_blank" rel="noopener noreferrer">backward-compatible schema changes</a> such as the addition of new fields. Without migrating data between directories or applying code changes to your applications, you can upgrade your schemas. You also can view the history of your schema changes in Cloud Directory by using version identifiers, which help you track and audit schema versions across directories. If you have multiple instances of a directory with the same schema, you can view the version history of schema changes to manage your directory fleet and ensure that all directories are running with the same schema version.</p> 
<p>In this blog post, I demonstrate how to perform an in-place schema upgrade and use schema versions in Cloud Directory. I add additional attributes to an existing facet and add a new facet to a schema. I then publish the new schema and apply it to running directories, upgrading the schema in place. I also show how to view the version history of a directory schema, which helps me to ensure my directory fleet is running the same version of the schema and has the correct history of schema changes applied to it.</p> 
<p><strong>Note:</strong> I share Java code examples in this post. I assume that you are familiar with the <a href="https://aws.amazon.com/tools/#sdk" target="_blank" rel="noopener noreferrer">AWS SDK</a> and can use Java-based code to build a Cloud Directory code example. You can apply the concepts I cover in this post to other programming languages such as Python and Ruby.</p> 
<h3><strong>Cloud Directory fundamentals</strong></h3> 
<p>I will&nbsp;start by covering a few Cloud Directory fundamentals. If you are already familiar with the concepts behind Cloud Directory facets, schemas, and schema lifecycles, you can skip to the next section.</p> 
<p><a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/whatarefacets.html" target="_blank" rel="noopener noreferrer">Facets</a>: Groups of attributes. You use facets to define object types. For example, you can define a device schema by adding facets such as computers, phones, and tablets. A computer facet can track attributes such as serial number, make, and model. You can then use the facets to create computer objects, phone objects, and tablet objects in the directory to which the schema applies.</p> 
<p><a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/cd_schemas.html" target="_blank" rel="noopener noreferrer">Schemas</a>: Collections of facets. Schemas define which types of objects can be created in a directory (such as users, devices, and organizations) and enforce validation of data for each object class. All data within a directory must conform to the applied schema. As a result, the schema definition is essentially a blueprint to construct a directory with an applied schema.</p> 
<p><a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/lifecycle.html" target="_blank" rel="noopener noreferrer">Schema lifecycle</a>: The four distinct states of a schema: <code>Development</code>, <code>Published</code>, <code>Applied</code>, and <code>Deleted</code>. Schemas in the <code>Published</code> and <code>Applied</code> states have version identifiers and cannot be changed. Schemas in the <code>Applied</code> state are used by directories for validation as applications insert or update data. You can change schemas in the <code>Development</code> state as many times as you need them to. In-place schema upgrades allow you to apply schema changes to an existing <code>Applied</code> schema in a production directory without the need to export and import the data populated in the directory.</p> 
<h3>How to add attributes to a computer inventory application schema and perform an in-place schema upgrade</h3> 
<p>To demonstrate how to set up schema versioning and perform an in-place schema upgrade, I will use an example of a computer inventory application that uses Cloud Directory to store relationship data. Let’s say that at my company, AnyCompany, we use this computer inventory application to track all computers we give to our employees for work use. I previously created a <code>ComputerSchema</code> and assigned its version identifier as <code>1</code>. This schema contains one facet called <code>ComputerInfo</code> that includes attributes for <code>SerialNumber</code>, <code>Make</code>, and <code>Model</code>, as shown in the following schema details.</p> 
<pre><code class="lang-text">Schema: ComputerSchema
Version: 1
Facet: ComputerInfo
Attribute: SerialNumber, type: Integer
Attribute: Make, type: String
Attribute: Model, type: String</code></pre> 
<p>AnyCompany has offices in Seattle, Portland, and San Francisco. I have deployed the computer inventory application for each of these three locations. As shown in the lower left part of the following diagram, <code>ComputerSchema</code> is in the <code>Published</code> state with a version of <code>1</code>. The <code>Published</code> schema is applied to <code>SeattleDirectory</code>, <code>PortlandDirectory</code>, and <code>SanFranciscoDirectory</code> for AnyCompany’s three locations. Implementing separate directories for different geographic locations when you don’t have any queries that cross location boundaries is a good data partitioning strategy and gives your application better response times with lower latency.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/Diagram2_1117_MC-a_900.png" /></p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/Diagram3_1117_MC_a_800.png" /></p> 
<p>The following code example creates the schema in the <code>Development</code> state by using a JSON file, publishes the schema, and then creates directories for the Seattle, Portland, and San Francisco locations. For this example, I assume the schema has been defined in the <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/jsonformat.html" target="_blank" rel="noopener noreferrer">JSON file</a>. The <code>createSchema</code> API creates a schema <a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">Amazon Resource Name</a> (ARN) with the name defined in the variable, <code>SCHEMA_NAME</code>. I can use the <code>putSchemaFromJson</code> API to add specific schema definitions from the JSON file.</p> 
<pre><code class="lang-text">// The utility method to get valid Cloud Directory schema JSON
String validJson = getJsonFile(&quot;ComputerSchema_version_1.json&quot;)
String SCHEMA_NAME = &quot;ComputerSchema&quot;;
String developmentSchemaArn = client.createSchema(new CreateSchemaRequest()
.withName(SCHEMA_NAME))
.getSchemaArn();
// Put the schema document in the Development schema
PutSchemaFromJsonResult result = client.putSchemaFromJson(new PutSchemaFromJsonRequest()
.withSchemaArn(developmentSchemaArn)
.withDocument(validJson));
</code></pre> 
<p>The following code example takes the schema that is currently in the <code>Development</code> state and publishes the schema, changing its state to <code>Published</code>.</p> 
<pre><code class="lang-text">String SCHEMA_VERSION = &quot;1&quot;;
String publishedSchemaArn = client.publishSchema(
new PublishSchemaRequest()
.withDevelopmentSchemaArn(developmentSchemaArn)
.withVersion(SCHEMA_VERSION))
.getPublishedSchemaArn();
// Our Published schema ARN is as follows
// arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:schema/published/ComputerSchema/1</code></pre> 
<p>The following code example creates a directory named <code>SeattleDirectory</code> and applies the published schema. The <code>createDirectory</code> API call creates a directory by using the published schema provided in the API parameters. Note that Cloud Directory stores a version of the schema in the directory in the <code>Applied</code> state. I will use similar code to create directories for <code>PortlandDirectory</code> and <code>SanFranciscoDirectory</code>.</p> 
<pre><code class="lang-text">String DIRECTORY_NAME = &quot;SeattleDirectory&quot;; 
CreateDirectoryResult directory = client.createDirectory(
new CreateDirectoryRequest()
.withName(DIRECTORY_NAME)
.withSchemaArn(publishedSchemaArn));
String directoryArn = directory.getDirectoryArn();
String appliedSchemaArn = directory.getAppliedSchemaArn();
// This code section can be reused to create directories for Portland and San Francisco locations with the appropriate directory names
// Our directory ARN is as follows 
// arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:directory/XX_DIRECTORY_GUID_XX
// Our applied schema ARN is as follows 
// arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:directory/XX_DIRECTORY_GUID_XX/schema/ComputerSchema/1
</code></pre> 
<h3>Revising a schema</h3> 
<p>Now let’s say my company, AnyCompany, wants to add more information for computers and to track which employees have been assigned a computer for work use. I modify the schema to add two attributes to the <code>ComputerInfo</code> facet: <code>Description</code> and <code>OSVersion</code> (operating system version). I make <code>Description</code> optional because it is not important for me to track this attribute for the computer objects I create. I make <code>OSVersion</code> mandatory because it is critical for me to track it for all computer objects so that I can make changes such as applying security patches or making upgrades. Because I make <code>OSVersion</code> mandatory, I must provide a default value that Cloud Directory will apply to objects that were created before the schema revision, in order to handle backward compatibility. Note that you can replace the value in any object with a different value.</p> 
<p>I also add a new facet to track computer assignment information, shown in the following updated schema as the <code>ComputerAssignment</code> facet. This facet tracks these additional attributes: <code>Name</code> (the name of the person to whom the computer is assigned), <code>EMail</code> (the email address of the assignee), <code>Department</code>, and department <code>CostCenter</code>. Note that Cloud Directory refers to the previously available version identifier as the <code>Major Version</code>. Because I can now add a minor version to a schema, I also denote the changed schema as <code>Minor Version A</code>.</p> 
<pre><code class="lang-text">Schema: ComputerSchema
Major Version: 1
Minor Version: A 
Facet: ComputerInfo
Attribute: SerialNumber, type: Integer 
Attribute: Make, type: String
Attribute: Model, type: Integer
Attribute: Description, type: String, required: NOT_REQUIRED
Attribute: OSVersion, type: String, required: REQUIRED_ALWAYS, default: &quot;Windows 7&quot;
Facet: ComputerAssignment
Attribute: Name, type: String
Attribute: EMail, type: String
Attribute: Department, type: String
Attribute: CostCenter, type: Integer</code></pre> 
<p>The following diagram shows the changes that were made when I added another facet to the schema and attributes to the existing facet. The highlighted area of the diagram (bottom left) shows that the schema changes were published.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/Diagram4_1117_MC-a_900.png" /></p> 
<p>The following code example revises the existing <code>Development</code> schema by adding the new attributes to the <code>ComputerInfo</code> facet and by adding the <code>ComputerAssignment</code> facet. I use a new JSON file for the schema revision, and for the purposes of this example, I am assuming the JSON file has the full schema including planned revisions.</p> 
<pre><code class="lang-text">// The utility method to get a valid CloudDirectory schema JSON
String schemaJson = getJsonFile(&quot;ComputerSchema_version_1_A.json&quot;)
// Put the schema document in the Development schema
PutSchemaFromJsonResult result = client.putSchemaFromJson(
new PutSchemaFromJsonRequest()
.withSchemaArn(developmentSchemaArn)
.withDocument(schemaJson));</code></pre> 
<h3>Upgrading the Published schema</h3> 
<p>The following code example performs an in-place schema upgrade of the <code>Published</code> schema with schema revisions (it adds new attributes to the existing facet and another facet to the schema). The <code>upgradePublishedSchema</code> API upgrades the <code>Published</code> schema with backward-compatible changes from the <code>Development</code> schema.</p> 
<pre><code class="lang-text">// From an earlier code example, I know the publishedSchemaArn has this value: &quot;arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:schema/published/ComputerSchema/1&quot;
// Upgrade publishedSchemaArn to minorVersion A. The Development schema must be backward compatible with 
// the existing publishedSchemaArn. 
String minorVersion = &quot;A&quot;
UpgradePublishedSchemaResult upgradePublishedSchemaResult = client.upgradePublishedSchema(new UpgradePublishedSchemaRequest()
.withDevelopmentSchemaArn(developmentSchemaArn)
.withPublishedSchemaArn(publishedSchemaArn)
.withMinorVersion(minorVersion));
String upgradedPublishedSchemaArn = upgradePublishedSchemaResult.getUpgradedSchemaArn();
// The Published schema ARN after the upgrade shows a minor version as follows 
// arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:schema/published/ComputerSchema/1/A</code></pre> 
<h3>Upgrading the Applied schema</h3> 
<p>The following diagram shows the in-place schema upgrade for the <code>SeattleDirectory</code> directory. I am performing the schema upgrade so that I can reflect the new schemas in all three directories. As a reminder, I added new attributes to the <code>ComputerInfo</code> facet and also added the <code>ComputerAssignment</code> facet. After the schema and directory upgrade, I can create objects for the <code>ComputerInfo</code> and <code>ComputerAssignment</code> facets in the <code>SeattleDirectory</code>. Any objects that were created with the old facet definition for <code>ComputerInfo</code> will now use the default values for any additional attributes defined in the new schema.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/Diagram5_1117_MC-a_900.png" /></p> 
<p>I use the following code example to perform an in-place upgrade of the <code>SeattleDirectory</code> to a <code>Major Version</code> of <code>1</code> and a <code>Minor Version</code> of <code>A</code>. Note that you should change a <code>Major Version</code> identifier in a schema to make backward-incompatible changes such as changing the data type of an existing attribute or dropping a mandatory attribute from your schema. Backward-incompatible changes require directory data migration from a previous version to the new version. You should change a <code>Minor Version</code> identifier in a schema to make backward-compatible upgrades such as adding additional attributes or adding facets, which in turn may contain one or more attributes. The <code>upgradeAppliedSchema</code> API lets me upgrade an existing directory with a different version of a schema.</p> 
<pre><code class="lang-text">// This upgrades ComputerSchema version 1 of the Applied schema in SeattleDirectory to Major Version 1 and Minor Version A
// The schema must be backward compatible or the API will fail with IncompatibleSchemaException
UpgradeAppliedSchemaResult upgradeAppliedSchemaResult = client.upgradeAppliedSchema(new UpgradeAppliedSchemaRequest()
.withDirectoryArn(directoryArn)
.withPublishedSchemaArn(upgradedPublishedSchemaArn));
String upgradedAppliedSchemaArn = upgradeAppliedSchemaResult.getUpgradedSchemaArn();
// The Applied schema ARN after the in-place schema upgrade will appear as follows
// arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:directory/XX_DIRECTORY_GUID_XX/schema/ComputerSchema/1
// This code section can be reused to upgrade directories for the Portland and San Francisco locations with the appropriate directory ARN</code></pre> 
<p><strong>Note:</strong> Cloud Directory has excluded returning the <code>Minor Version</code> identifier in the <code>Applied</code> schema ARN for backward compatibility and to enable the application to work across older and newer versions of the directory.</p> 
<p>The following diagram shows the changes that are made when I perform an in-place schema upgrade in the two remaining directories, <code>PortlandDirectory</code> and <code>SanFranciscoDirectory</code>. I make these calls sequentially, upgrading <code>PortlandDirectory</code> first and then upgrading <code>SanFranciscoDirectory</code>. I use the same code example that I used earlier to upgrade <code>SeattleDirectory</code>. Now, all my directories are running the most current version of the schema. Also, I made these schema changes without having to migrate data and while maintaining my application’s high availability.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/Diagram6_1117_MC-a_900.png" /></p> 
<h3>Schema revision history</h3> 
<p>I can now view the schema revision history for any of AnyCompany’s directories by using the <code>listAppliedSchemaArns</code> API. Cloud Directory maintains the five most recent versions of applied schema changes. Similarly, to inspect the current <code>Minor Version</code> that was applied to my schema, I use the <code>getAppliedSchemaVersion</code> API. The <code>listAppliedSchemaArns</code> API returns the schema ARNs based on my schema filter as defined in <code>withSchemaArn</code>.</p> 
<p>I use the following code example to query an <code>Applied</code> schema for its version history.</p> 
<pre><code class="lang-text">// This returns the five most recent Minor Versions associated with a Major Version
ListAppliedSchemaArnsResult listAppliedSchemaArnsResult = client.listAppliedSchemaArns(new ListAppliedSchemaArnsRequest()
.withDirectoryArn(directoryArn)
.withSchemaArn(upgradedAppliedSchemaArn));
// Note: The listAppliedSchemaArns API without the SchemaArn filter returns all the Major Versions in a directory</code></pre> 
<p>The <code>listAppliedSchemaArns</code> API returns the two ARNs as shown in the following output.</p> 
<pre><code class="lang-text">arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:directory/XX_DIRECTORY_GUID_XX/schema/ComputerSchema/1
arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:directory/XX_DIRECTORY_GUID_XX/schema/ComputerSchema/1/A</code></pre> 
<p>The following code example queries an <code>Applied</code> schema for current <code>Minor Version</code> by using the <code>getAppliedSchemaVersion</code> API.</p> 
<pre><code class="lang-text">// This returns the current Applied schema's Minor Version ARN 
GetAppliedSchemaVersion getAppliedSchemaVersionResult = client.getAppliedSchemaVersion(new GetAppliedSchemaVersionRequest()
.withSchemaArn(upgradedAppliedSchemaArn));</code></pre> 
<p>The <code>getAppliedSchemaVersion</code> API returns the current <code>Applied</code> schema ARN with a <code>Minor Version</code>, as shown in the following output.</p> 
<pre><code class="lang-text">arn:aws:clouddirectory:us-west-2:XXXXXXXXXXXX:directory/XX_DIRECTORY_GUID_XX/schema/ComputerSchema/1/A</code></pre> 
<p>If you have&nbsp;a lot of&nbsp;directories, schema revision API calls can help you audit your directory fleet and ensure that all directories are running the same version of a schema. Such auditing can help you ensure high integrity of directories across your fleet.</p> 
<h3>Summary</h3> 
<p>You can use in-place schema upgrades to make changes to your directory schema as you evolve your data set to match the needs of your application. An in-place schema upgrade allows you to maintain high availability for your directory and applications while the upgrade takes place. For more information about in-place schema upgrades, see the <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/inplaceschemaupgrade.html" target="_blank" rel="noopener noreferrer">in-place schema upgrade documentation</a>.</p> 
<p>If you have comments about this blog post, submit them in the “Comments” section below. If you have questions about implementing the solution in this post, start a new thread in the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=180&amp;start=0" target="_blank" rel="noopener noreferrer">Directory Service forum</a> or <a href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
<p>– Mahendra</p> 
<p>&nbsp;</p> 
<footer> 
TAGS: 
<span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/facets/" rel="tag">facets</a>, <a href="https://aws.amazon.com/blogs/security/tag/in-place-schema-upgrades/" rel="tag">In-place schema upgrades</a>, <a href="https://aws.amazon.com/blogs/security/tag/schemas/" rel="tag">schemas</a></span> 
</footer> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6267');
});
</script> 
</article> 
<p>
© 2017, Amazon Web Services, Inc. or its affiliates. All rights reserved.
</p>

    </div>
  </div>
</div>


    <div id="footer" class="navigation hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <ul class="footer-links nav navbar-nav">
              <li><a href="../aws.html">AWS</a></li>
              <li><a href="../linux.html">Linux</a></li>
              <li><a href="../docker.html">Docker</a></li>
              <li><a href="../ibmpower.html">IBM Power</a></li>
              <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
            </ul>
            <ul class="footer-links nav navbar-nav navbar-right">
              <li><a href="../comments.html">Comments?</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
