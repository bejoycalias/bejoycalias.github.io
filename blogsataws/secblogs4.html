<!DOCTYPE html>
<html lang="en">
  <head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-593498H');</script>
<!-- End Google Tag Manager -->

    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">

    <meta name="msapplication-config" content="/microsoft-tile.xml" />
    <meta name="theme-color" content="#ffffff">

    <meta property="og:url" content="https://bejoycalias.github.io/blogsataws/secblogs1.html" />
    <meta property="og:site_name" content="Bejoy's TechNotes"/>
    <meta property="og:title" content="Bejoy's TechNotes - Kindle Friendly AWS Security Blogs" />
    <meta property="og:image" content="https://bejoycalias.github.io/assets/images/og-image.png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="1200"/>
    <meta property="og:description" content="" />

    <title>Bejoy's TechNotes - Kindle Friendly AWS Security Blogs</title>
    <link href="../assets/stylesheets/application-832aa42c.css" rel="stylesheet" />

    <!--[if lt IE 9]>
      <script src="../assets/javascripts/ie-compat-c141a02d.js"></script>
    <![endif]-->
    <script src="../assets/javascripts/application-ff53d307.js"></script>

    <!-- Typekit script to import Klavika font -->
    <script src="https://use.typekit.net/wxf7mfi.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-100043608-1', 'auto');
  ga('send', 'pageview');

</script>

    
  </head>

  <body id="uh-oh-" class="layout-inner page-uh-oh-">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-593498H"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


    <div id="header" class="navigation navbar-static-top hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <div class="navbar-header">
              <div class="navbar-brand">
                <a href="/">
                  <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="135.000000pt" height="50" viewbox="0 0 135.000000 45.000000" preserveaspectratio="xMidYMid meet" class="logo">

<g transform="translate(0.000000,45.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
<path class="text" fill="#000000" d="M527 384 c-4 -4 -7 -18 -7 -31 0 -21 4 -24 28 -21 21 2 27 8 27 28 0
18 -6 26 -20 28 -12 2 -24 0 -28 -4z"></path>
<path class="text" fill="#000000" d="M1080 335 c0 -48 2 -55 20 -55 18 0 20 7 20 55 0 48 -2 55 -20 55
-18 0 -20 -7 -20 -55z"></path>
<path class="text" fill="#000000" d="M54 357 c-2 -7 -3 -69 -2 -138 l3 -124 65 -3 c90 -3 130 20 130 77 0
29 -6 44 -20 54 -20 14 -20 15 -3 45 14 25 15 34 5 56 -6 15 -23 31 -38 36
-38 15 -134 13 -140 -3z m110 -33 c19 -7 21 -45 4 -62 -7 -7 -22 -12 -35 -12
-20 0 -23 5 -23 40 0 41 13 50 54 34z m20 -130 c19 -18 19 -20 6 -45 -8 -13
-21 -19 -45 -19 -34 0 -35 1 -35 40 0 38 2 40 29 40 16 0 37 -7 45 -16z"></path>
<path class="text" fill="#000000" d="M319 271 c-23 -24 -29 -38 -29 -74 0 -25 3 -53 6 -62 20 -50 164 -64
164 -15 0 15 -7 17 -45 12 -46 -5 -75 8 -75 34 0 11 16 14 65 14 l65 0 0 35
c0 80 -92 114 -151 56z m99 -33 c3 -15 -4 -18 -37 -18 -43 0 -50 7 -29 28 18
18 62 11 66 -10z"></path>
<path class="text" fill="#000000" d="M520 184 c0 -107 -1 -116 -20 -121 -11 -3 -20 -12 -20 -19 0 -21 76
-19 84 2 3 9 6 69 6 135 l0 119 -25 0 -25 0 0 -116z"></path>
<path class="text" fill="#000000" d="M649 271 c-24 -25 -29 -37 -29 -78 1 -70 34 -103 105 -103 55 0 95
44 95 103 0 60 -7 75 -41 92 -47 25 -96 19 -130 -14z m111 -30 c25 -48 2 -111
-40 -111 -45 0 -69 80 -34 114 21 22 61 20 74 -3z"></path>
<path class="text" fill="#000000" d="M850 287 c0 -8 16 -57 36 -110 28 -76 33 -100 25 -116 -16 -28 -14
-31 18 -31 27 0 29 4 70 123 23 67 41 128 41 135 0 6 -11 12 -24 12 -21 0 -26
-8 -41 -65 -10 -36 -21 -68 -25 -70 -3 -2 -16 27 -29 66 -19 60 -25 69 -47 69
-13 0 -24 -6 -24 -13z"></path>
<path class="text" fill="#000000" d="M1192 284 c-17 -12 -22 -24 -20 -47 2 -26 10 -36 45 -52 49 -23 59
-55 17 -55 -14 0 -34 5 -45 10 -16 9 -19 7 -19 -13 0 -17 7 -27 23 -31 69 -18
117 6 117 60 0 32 -4 37 -45 55 -60 26 -62 54 -4 46 37 -5 40 -3 37 16 -2 18
-11 23 -43 25 -25 2 -49 -3 -63 -14z"></path>
</g>
</svg>

                </a>
              </div>
              <button class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="buttons hidden-xs">
              <nav class="navigation-links" role="navigation">
                <ul class="main-links nav navbar-nav navbar-right">
                  <li><a href="../aws.html">AWS</a></li>
                  <li><a href="../linux.html">Linux</a></li>
                  <li><a href="../docker.html">Docker</a></li>
                  <li><a href="../ibmpower.html">IBM Power</a></li>
                  <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sidebar-overlay"></div>

<aside class="sidebar" role="navigation">
  <div class="sidebar-header">
    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="135.000000pt" height="42" viewbox="0 0 135.000000 45.000000" preserveaspectratio="xMidYMid meet">

<g transform="translate(0.000000,45.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
<path class="text" fill="#000000" d="M527 384 c-4 -4 -7 -18 -7 -31 0 -21 4 -24 28 -21 21 2 27 8 27 28 0
18 -6 26 -20 28 -12 2 -24 0 -28 -4z"></path>
<path class="text" fill="#000000" d="M1080 335 c0 -48 2 -55 20 -55 18 0 20 7 20 55 0 48 -2 55 -20 55
-18 0 -20 -7 -20 -55z"></path>
<path class="text" fill="#000000" d="M54 357 c-2 -7 -3 -69 -2 -138 l3 -124 65 -3 c90 -3 130 20 130 77 0
29 -6 44 -20 54 -20 14 -20 15 -3 45 14 25 15 34 5 56 -6 15 -23 31 -38 36
-38 15 -134 13 -140 -3z m110 -33 c19 -7 21 -45 4 -62 -7 -7 -22 -12 -35 -12
-20 0 -23 5 -23 40 0 41 13 50 54 34z m20 -130 c19 -18 19 -20 6 -45 -8 -13
-21 -19 -45 -19 -34 0 -35 1 -35 40 0 38 2 40 29 40 16 0 37 -7 45 -16z"></path>
<path class="text" fill="#000000" d="M319 271 c-23 -24 -29 -38 -29 -74 0 -25 3 -53 6 -62 20 -50 164 -64
164 -15 0 15 -7 17 -45 12 -46 -5 -75 8 -75 34 0 11 16 14 65 14 l65 0 0 35
c0 80 -92 114 -151 56z m99 -33 c3 -15 -4 -18 -37 -18 -43 0 -50 7 -29 28 18
18 62 11 66 -10z"></path>
<path class="text" fill="#000000" d="M520 184 c0 -107 -1 -116 -20 -121 -11 -3 -20 -12 -20 -19 0 -21 76
-19 84 2 3 9 6 69 6 135 l0 119 -25 0 -25 0 0 -116z"></path>
<path class="text" fill="#000000" d="M649 271 c-24 -25 -29 -37 -29 -78 1 -70 34 -103 105 -103 55 0 95
44 95 103 0 60 -7 75 -41 92 -47 25 -96 19 -130 -14z m111 -30 c25 -48 2 -111
-40 -111 -45 0 -69 80 -34 114 21 22 61 20 74 -3z"></path>
<path class="text" fill="#000000" d="M850 287 c0 -8 16 -57 36 -110 28 -76 33 -100 25 -116 -16 -28 -14
-31 18 -31 27 0 29 4 70 123 23 67 41 128 41 135 0 6 -11 12 -24 12 -21 0 -26
-8 -41 -65 -10 -36 -21 -68 -25 -70 -3 -2 -16 27 -29 66 -19 60 -25 69 -47 69
-13 0 -24 -6 -24 -13z"></path>
<path class="text" fill="#000000" d="M1192 284 c-17 -12 -22 -24 -20 -47 2 -26 10 -36 45 -52 49 -23 59
-55 17 -55 -14 0 -34 5 -45 10 -16 9 -19 7 -19 -13 0 -17 7 -27 23 -31 69 -18
117 6 117 60 0 32 -4 37 -45 55 -60 26 -62 54 -4 46 37 -5 40 -3 37 16 -2 18
-11 23 -43 25 -25 2 -49 -3 -63 -14z"></path>
</g>
</svg>

  </div>

  <ul class="nav sidebar-nav">
    <li><a href="../aws.html">AWS</a></li>
    <li><a href="../linux.html">Linux</a></li>
    <li><a href="../docker.html">Docker</a></li>
    <li><a href="../ibmpower.html">IBM Power</a></li>
    <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
  </ul>
</aside>


    <div class="container">
  <div class="row">
    <div id="docs-sidebar" class="col-sm-3 col-md-3 col-xs-12 hidden-print" role="complementary">
      <ul class="nav docs-sidenav">
      <li><a href="blogsataws1.html">Blogs @ AWS</a></li>
      <li><a href="whatsnew1.html">What's New @ AWS</a></li>
      <li><a href="mgmtblogs1.html">Management Tools Blogs @ AWS</a></li>
      <li><a href="computeblogs1.html">Compute Blogs @ AWS</a></li>
      <li><a href="devopsblogs1.html">DevOps Blogs @ AWS</a></li>
      <li class="active"><a href="secblogs1.html">Security Blogs @ AWS</a></li>
      <li><a href="apnblogs1.html">APN Blogs @ AWS</a></li>

    </ul>
    </div>

    <div id="inner" class="col-sm-9 col-md-9 col-xs-12" role="main">
<p></p>
<p><i>Contents of this page is copied directly from AWS blog sites to make it Kindle friendly. Some styles & sections from these pages are removed to render this properly in 'Article Mode' of Kindle e-Reader browser. All the contents of this page is property of AWS.</i></p>
<p><a href="secblogs1.html">Page 1</a>|<a href="secblogs2.html">Page 2</a>|<a href="secblogs3.html">Page 3</a>|<a href="secblogs4.html">Page 4</a></p>
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step121-1153x630.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Patch, Inspect, and Protect Microsoft Windows Workloads on AWS—Part 2</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Koen van Blijderveen</span></span> | on 
<time property="datePublished" datetime="2017-11-22T07:36:58+00:00">22 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/compute/amazon-ec2/" title="View all posts in Amazon EC2*"><span property="articleSection">Amazon EC2*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/storage/amazon-elastic-block-storage-ebs/" title="View all posts in Amazon Elastic Block Storage (EBS)*"><span property="articleSection">Amazon Elastic Block Storage (EBS)*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/amazon-inspector/" title="View all posts in Amazon Inspector*"><span property="articleSection">Amazon Inspector*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-2/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6418" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6418&amp;disqus_title=How+to+Patch%2C+Inspect%2C+and+Protect+Microsoft+Windows+Workloads+on+AWS%E2%80%94Part+2&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-2/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6418');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>Yesterday in <a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-1/" target="_blank" rel="noopener noreferrer">Part 1 of this blog post</a>, I showed you how to:</p> 
<ol> 
<li><strong>Launch an </strong><a href="https://aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer"><strong>Amazon EC2</strong></a><strong> instance</strong> with an <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> (IAM) role, an <a href="http://aws.amazon.com/ebs/" target="_blank" rel="noopener noreferrer">Amazon Elastic Block Store</a> (Amazon EBS) volume, and tags that <a href="https://aws.amazon.com/ec2/systems-manager" target="_blank" rel="noopener noreferrer">Amazon EC2 Systems Manager</a> (Systems Manager) and Amazon Inspector use.</li> 
<li><strong>Configure </strong><a href="https://aws.amazon.com/ec2/systems-manager/" target="_blank" rel="noopener noreferrer"><strong>Systems Manager</strong></a> to install the Amazon Inspector agent and patch your EC2 instances.</li> 
</ol> 
<p>Today in Steps 3 and 4, I show you how to:</p> 
<ol start="3"> 
<li><strong>Take </strong><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSSnapshots.html" target="_blank" rel="noopener noreferrer"><strong>Amazon EBS snapshots</strong></a><strong> using </strong><a href="http://docs.aws.amazon.com/solutions/latest/ebs-snapshot-scheduler/overview.html" target="_blank" rel="noopener noreferrer"><strong>Amazon EBS Snapshot Scheduler</strong></a> to automate snapshots based on instance tags.</li> 
<li><strong>Use <a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector</a></strong> to check if your EC2 instances running Microsoft Windows contain any common vulnerabilities and exposures (CVEs).</li> 
</ol> 
<p>To catch up on Steps 1 and 2, see <a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-1/" target="_blank" rel="noopener noreferrer">yesterday’s blog post</a>.</p> 
<b>Step 3: Take EBS snapshots using EBS Snapshot Scheduler</b> 
<p>In this section, I show you how to use EBS Snapshot Scheduler to take snapshots of your instances at specific intervals. To do this, I will show you how to:</p> 
<li><strong>Determine the schedule</strong> for EBS Snapshot Scheduler by providing you with best practices.</li> 
<li><strong>Deploy EBS Snapshot Scheduler</strong> by using <a href="https://aws.amazon.com/cloudformation/" target="_blank" rel="noopener noreferrer">AWS CloudFormation</a>.</li> 
<li><strong>Tag your EC2 instances</strong> so that EBS Snapshot Scheduler backs up your instances when you want them backed up.</li> 
<p>In addition to making sure your EC2 instances have all the available operating system patches applied on a regular schedule, you should take snapshots of the EBS storage volumes attached to your EC2 instances. Taking regular snapshots allows you to restore your data to a previous state quickly and cost effectively. With Amazon EBS snapshots, you pay only for the actual data you store, and snapshots save only the data that has changed since the previous snapshot, which minimizes your cost. You will use EBS Snapshot Scheduler to make regular snapshots of your EC2 instance. EBS Snapshot Scheduler takes advantage of other AWS services including CloudFormation, <a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener noreferrer">Amazon DynamoDB</a>, and <a href="https://aws.amazon.com/lambda/" target="_blank" rel="noopener noreferrer">AWS Lambda</a> to make backing up your EBS volumes simple.<span id="more-6418"></span></p> 
<h3>Determine the schedule</h3> 
<p>As a best practice, you should back up your data frequently during the hours when your data changes the most. This reduces the amount of data you lose if you have to restore from a snapshot. For the purposes of this blog post, the data for my instances changes the most between the business hours of 9:00 A.M. to 5:00 P.M. Pacific Time. During these hours, I will make snapshots hourly to minimize data loss.</p> 
<p>In addition to backing up frequently, another best practice is to establish a strategy for retention. This will vary based on how you need to use the snapshots. If you have compliance requirements to be able to restore for auditing, your needs may be different than if you are able to detect data corruption within three hours and simply need to restore to something that limits data loss to five hours. EBS Snapshot Scheduler enables you to specify the retention period for your snapshots. For this post, I only need to keep snapshots for recent business days. To account for weekends, I will set my retention period to three days, which is down from the default of 15 days when deploying EBS Snapshot Scheduler.</p> 
<h3>Deploy EBS Snapshot Scheduler</h3> 
<p>In <a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-1/#p1s1" target="_blank" rel="noopener noreferrer">Step 1 of Part 1</a> of this post, I showed how to configure an EC2 for Windows Server 2012 R2 instance with an EBS volume. You will use EBS Snapshot Scheduler to take eight snapshots each weekday of your EC2 instance’s EBS volumes:</p> 
<ol> 
<li>Navigate to the EBS Snapshot Scheduler <a href="http://docs.aws.amazon.com/solutions/latest/ebs-snapshot-scheduler/deployment.html#step1" target="_blank" rel="noopener noreferrer">deployment page</a> and choose <strong>Launch Solution.</strong> This takes you to the <a href="https://console.aws.amazon.com/cloudformation/home" target="_blank" rel="noopener noreferrer">CloudFormation console</a> in your account. The <strong>Specify an Amazon S3 template URL </strong>option is already selected and prefilled. Choose <strong>Next</strong> on the <strong>Select Template</strong> page.</li> 
<li>On the <strong>Specify Details</strong> page, retain all default parameters except for <strong>AutoSnapshotDeletion</strong>. Set <strong>AutoSnapshotDeletion</strong> to <strong>Yes</strong> to ensure that old snapshots are periodically deleted. The default retention period is 15 days (you will specify a shorter value on your instance in the next subsection).</li> 
<li>Choose <strong>Next</strong> twice to move to the <strong>Review</strong> step, and start deployment by choosing the <strong>I acknowledge that AWS CloudFormation might create IAM resources</strong> check box and then choosing&nbsp;<strong>Create</strong>.</li> 
</ol> 
<h3>Tag your EC2 instances</h3> 
<p>EBS Snapshot Scheduler takes a few minutes to deploy. While waiting for its deployment, you can start to tag your instance to define its schedule. EBS Snapshot Scheduler reads tag values and looks for four possible custom parameters in the following order:</p> 
<li><code>&lt;snapshot time&gt;</code> – Time in 24-hour format with no colon.</li> 
<li><code>&lt;retention days&gt;</code> – The number of days (a positive integer) to retain the snapshot before deletion, if set to automatically delete snapshots.</li> 
<li><code>&lt;time zone&gt;</code> – The time zone of the times specified in <code>&lt;snapshot time&gt;</code>.</li> 
<li><code>&lt;active day(s)&gt;</code> – <code>all</code>, <code>weekdays</code>, or <code>mon</code>, <code>tue</code>, <code>wed</code>, <code>thu</code>, <code>fri</code>, <code>sat</code>, and/or <code>sun</code>.</li> 
<p>Because you want hourly backups on weekdays between 9:00 A.M. and 5:00 P.M. Pacific Time, you need to configure eight tags—one for each hour of the day. You will add the eight tags shown in the following table to your EC2 instance.</p> 
<table border="1" cellspacing="0" cellpadding="5"> 
<tbody> 
<tr> 
<td width="255"><strong>Tag</strong></td> 
<td width="207"><strong>Value</strong></td> 
</tr> 
<tr> 
<td width="255"><code>scheduler:ebs-snapshot:0900</code></td> 
<td width="207"><code>0900;3;utc;weekdays</code></td> 
</tr> 
<tr> 
<td width="255"><code>scheduler:ebs-snapshot:1000</code></td> 
<td width="207"><code>1000;3;utc;weekdays</code></td> 
</tr> 
<tr> 
<td width="255"><code>scheduler:ebs-snapshot:1100</code></td> 
<td width="207"><code>1100;3;utc;weekdays</code></td> 
</tr> 
<tr> 
<td width="255"><code>scheduler:ebs-snapshot:1200</code></td> 
<td width="207"><code>1200;3;utc;weekdays</code></td> 
</tr> 
<tr> 
<td width="255"><code>scheduler:ebs-snapshot:1300</code></td> 
<td width="207"><code>1300;3;utc;weekdays</code></td> 
</tr> 
<tr> 
<td width="255"><code>scheduler:ebs-snapshot:1400</code></td> 
<td width="207"><code>1400;3;utc;weekdays</code></td> 
</tr> 
<tr> 
<td width="255"><code>scheduler:ebs-snapshot:1500</code></td> 
<td width="207"><code>1500;3;utc;weekdays</code></td> 
</tr> 
<tr> 
<td width="255"><code>scheduler:ebs-snapshot:1600</code></td> 
<td width="207"><code>1600;3;utc;weekdays</code></td> 
</tr> 
</tbody> 
</table> 
<p>Next, you will add these tags to your instance. If you want to tag multiple instances at once, you can use <a href="http://docs.aws.amazon.com/awsconsolehelpdocs/latest/gsg/tag-editor.html" target="_blank" rel="noopener noreferrer">Tag Editor</a> instead. To add the tags in the preceding table to your EC2 instance:</p> 
<ol> 
<li>Navigate to your EC2 instance in the <a href="https://console.aws.amazon.com/ec2/v2/home" target="_blank" rel="noopener noreferrer">EC2 console</a> and choose <strong>Tags</strong> in the navigation pane.</li> 
<li>Choose <strong>Add/Edit Tags </strong>and then choose <strong>Create Tag </strong>to add all the tags specified in the preceding table.</li> 
<li>Confirm you have added the tags by choosing <strong>Save</strong>. After adding these tags, navigate to your EC2 instance in the EC2 console. Your EC2 instance should look similar to the following screenshot.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step3-ebssnap-step1.png" /></li> 
<li>After waiting a couple of hours, you can see snapshots beginning to populate on the <strong>Snapshots</strong> page of the EC2 console.<img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step3-ebssnap-step2.png" /></li> 
<li>To check if EBS Snapshot Scheduler is active, you can check the CloudWatch rule that runs the Lambda function. If the clock icon shown in the following screenshot is green, the scheduler is active. If the clock icon is gray, the rule is disabled and does not run. You can enable or disable the rule by selecting it, choosing <strong>Actions</strong>, and choosing <strong>Enable</strong> or <strong>Disable</strong>. This also allows you to temporarily disable EBS Snapshot Scheduler.<img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step3-ebssnap-step3.png" /></li> 
</ol> 
<ol start="6"> 
<li>You can also monitor when EBS Snapshot Scheduler has run by choosing the name of the CloudWatch rule as shown in the previous screenshot and choosing <strong>Show metrics for the rule</strong>.<img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step3-ebssnap-step4.png" /></li> 
</ol> 
<p>If you want to restore and attach an EBS volume, see <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-restoring-volume.html" target="_blank" rel="noopener noreferrer">Restoring an Amazon EBS Volume from a Snapshot</a> and <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-attaching-volume.html" target="_blank" rel="noopener noreferrer">Attaching an Amazon EBS Volume to an Instance</a>.</p> 
<b>Step 4: Use Amazon Inspector</b> 
<p>In this section, I show you how to you use Amazon Inspector to scan your EC2 instance for common vulnerabilities and exposures (CVEs) and set up <a href="https://aws.amazon.com/sns/" target="_blank" rel="noopener noreferrer">Amazon SNS</a> notifications. To do this I will show you how to:</p> 
<li><strong>Install the Amazon Inspector agent</strong> by using EC2 Run Command.</li> 
<li><strong>Set up notifications using Amazon SNS</strong> to notify you of any findings.</li> 
<li><strong>Define an Amazon Inspector target and template</strong> to define what assessment to perform on your EC2 instance.</li> 
<li><strong>Schedule Amazon Inspector assessment runs</strong> to assess your EC2 instance on a regular interval.</li> 
<p>Amazon Inspector can help you scan your EC2 instance using prebuilt rules packages, which are built and maintained by AWS. These prebuilt rules packages tell Amazon Inspector what to scan for on the EC2 instances you select. Amazon Inspector provides the following prebuilt packages for Microsoft Windows Server 2012 R2:</p> 
<li>Common Vulnerabilities and Exposures</li> 
<li>Center for Internet Security Benchmarks</li> 
<li>Runtime Behavior Analysis</li> 
<p>In this post, I’m focused on how to make sure you keep your EC2 instances patched, backed up, and inspected for common vulnerabilities and exposures (CVEs). As a result, I will focus on how to use the CVE rules package and use your instance tags to identify the instances on which to run the CVE rules. If your EC2 instance is fully patched using Systems Manager, as described earlier, you should not have any findings with the CVE rules package. Regardless, as a best practice I recommend that you use Amazon Inspector as an additional layer for identifying any unexpected failures. This involves using <a href="https://aws.amazon.com/cloudwatch/" target="_blank" rel="noopener noreferrer">Amazon CloudWatch</a> to set up weekly Amazon Inspector scans, and configuring Amazon Inspector to notify you of any findings through SNS topics. By acting on the notifications you receive, you can respond quickly to any CVEs on any of your EC2 instances to help ensure that malware using known CVEs does not affect your EC2 instances. In a previous blog post, Eric Fitzgerald showed how to <a href="https://aws.amazon.com/blogs/security/how-to-remediate-amazon-inspector-security-findings-automatically/" target="_blank" rel="noopener noreferrer">remediate Amazon Inspector security findings automatically</a>.</p> 
<h4>Install the Amazon Inspector agent</h4> 
<p>To install the Amazon Inspector agent, you will use <a href="https://aws.amazon.com/ec2/run-command/" target="_blank" rel="noopener noreferrer">EC2 Run Command</a>, which allows you to run any command on any of your EC2 instances that have the Systems Manager agent with an attached IAM role that allows access to Systems Manager.</p> 
<ol> 
<li>Choose <strong>Run Command</strong> under <strong>Systems Manager Services</strong> in the navigation pane of the <a href="https://console.aws.amazon.com/ec2/v2/home" target="_blank" rel="noopener noreferrer">EC2 console</a>. Then choose <strong>Run a command</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step1.png" /></li> 
<li>To install the Amazon Inspector agent, you will use an AWS managed and provided command document that downloads and installs the agent for you on the selected EC2 instance. Choose <strong>AmazonInspector-ManageAWSAgent</strong>. To choose the target EC2 instance where this command will be run, use the tag you previously assigned to your EC2 instance, <code>Patch Group</code>, with a value of <code>Windows Servers</code>. For this example, set the concurrent installations to <code>1</code> and tell Systems Manager to stop after <code>5</code> errors.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step2.png" /></li> 
<li>Retain the default values for all other settings on the <strong>Run a command</strong> page and choose <strong>Run</strong>. Back on the <strong>Run Command</strong> page, you can see if the command that installed the Amazon Inspector agent executed successfully on all selected EC2 instances.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step3.png" /></li> 
</ol> 
<h4>Set up notifications using Amazon SNS</h4> 
<p>Now that you have installed the Amazon Inspector agent, you will set up an SNS topic that will notify you of any findings after an Amazon Inspector run.</p> 
<p>To set up an SNS topic:</p> 
<ol> 
<li>In the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a>, choose <strong>Simple Notification Service</strong> under <strong>Messaging</strong> in the <strong>Services&nbsp;</strong>menu.</li> 
<li>Choose <strong>Create topic</strong>, name your topic (only alphanumeric characters, hyphens, and underscores are allowed) and give it a display name to ensure you know what this topic does (I’ve named mine <code>Inspector</code>). Choose <strong>Create topic</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step4.png" /></li> 
<li>To allow Amazon Inspector to publish messages to your new topic, choose <strong>Other topic actions</strong> and choose <strong>Edit topic policy</strong>.</li> 
<li>For <strong>Allow these users to publish messages to this topic</strong> and <strong>Allow these users to subscribe to this topic</strong>, choose <strong>Only these AWS users</strong>. Type the following ARN for the US East (N. Virginia) Region in which you are deploying the solution in this post: <code>arn:aws:iam::316112463485:root</code>. This is the ARN of Amazon Inspector itself. For the ARNs of Amazon Inspector in other AWS Regions, see <a href="http://docs.aws.amazon.com/inspector/latest/userguide/inspector_assessments.html#sns-topic" target="_blank" rel="noopener noreferrer">Setting Up an SNS Topic for Amazon Inspector Notifications (Console)</a>. <a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">Amazon Resource Names (ARNs)</a> uniquely identify AWS resources across all of AWS.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step5.png" /></li> 
<li>To receive notifications from Amazon Inspector, subscribe to your new topic by choosing <strong>Create subscription </strong>and adding your email address. After confirming your subscription by clicking the link in the email, the topic should display your email address as a subscriber. Later, you will configure the Amazon Inspector template to publish to this topic.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step6.png" /></li> 
</ol> 
<h4>Define an Amazon Inspector target and template</h4> 
<p>Now that you have set up the notification topic by which Amazon Inspector can notify you of findings, you can create an Amazon Inspector target and template. A target defines which EC2 instances are in scope for Amazon Inspector. A template defines which packages to run, for how long, and on which target.</p> 
<p>To create an Amazon Inspector target:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/inspector/home" target="_blank" rel="noopener noreferrer">Amazon Inspector console</a> and choose <strong>Get started</strong>. At the time of writing this blog post, Amazon Inspector is available in the US East (N. Virginia), US West (N. California), US West (Oregon), EU (Ireland), Asia Pacific (Mumbai), Asia Pacific (Seoul), Asia Pacific (Sydney), and Asia Pacific (Tokyo) Regions.</li> 
<li>For Amazon Inspector to be able to collect the necessary data from your EC2 instance, you must create an IAM service role for Amazon Inspector. Amazon Inspector can create this role for you if you choose <strong>Choose or create role</strong> and confirm the role creation by choosing <strong>Allow</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step7.png" /></li> 
<li>Amazon Inspector also asks you to tag your EC2 instance and install the Amazon Inspector agent. You already performed these steps in <a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-1/" target="_blank" rel="noopener noreferrer">Part 1</a> of this post, so you can proceed by choosing <strong>Next</strong>. To define the Amazon Inspector target, choose the previously used <code>Patch Group</code> tag with a <strong>Value</strong> of <code>Windows Servers</code>. This is the same tag that you used to define the targets for patching. Then choose <strong>Next</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step8.png" /></li> 
<li>Now, define your Amazon Inspector template, and choose a name and the package you want to run. For this post, use the <strong>Common Vulnerabilities and Exposures</strong> package and choose the default duration of <strong>1 hour</strong>. As you can see, the package has a version number, so always select the latest version of the rules package if multiple versions are available.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step9.png" /></li> 
<li>Configure Amazon Inspector to publish to your SNS topic when findings are reported. You can also choose to receive a notification of a started run, a finished run, or changes in the state of a run. For this blog post, you want to receive notifications if there are <em>any</em>&nbsp;findings. To start, choose <strong>Assessment Templates</strong> from the <a href="https://console.aws.amazon.com/inspector/home" target="_blank" rel="noopener noreferrer">Amazon Inspector console</a> and choose your newly created Amazon Inspector assessment template. Choose the icon below <strong>SNS topics </strong>(see the following screenshot).<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step10.png" /></li> 
<li>A pop-up appears in which you can choose the previously created topic and the events about which you want SNS to notify you (choose <strong>Finding reported</strong>).<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step11.png" /></li> 
</ol> 
<h4>Schedule Amazon Inspector assessment runs</h4> 
<p>The last step in using Amazon Inspector to assess for CVEs is to schedule the Amazon Inspector template to run using <a href="http://aws.amazon.com/cloudwatch" target="_blank" rel="noopener noreferrer">Amazon CloudWatch Events</a>. This will make sure that Amazon Inspector assesses your EC2 instance on a regular basis. To do this, you need the Amazon Inspector template ARN, which you can find under <strong>Assessment templates </strong>in the Amazon Inspector console. CloudWatch Events can run your Amazon Inspector assessment at an interval you define using a Cron-based schedule. Cron is a well-known scheduling agent that is widely used on UNIX-like operating systems and uses the following syntax for CloudWatch Events.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/cronimage.png" /></p> 
<p>All scheduled events use a UTC time zone, and the minimum precision for schedules is one minute. For more information about scheduling CloudWatch Events, see <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html" target="_blank" rel="noopener noreferrer">Schedule Expressions for Rules</a>.</p> 
<p>To create the CloudWatch Events rule:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/cloudwatch/home" target="_blank" rel="noopener noreferrer">CloudWatch console</a>, choose <strong>Events</strong>, and choose <strong>Create rule</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step12.png" /></li> 
<li>On the next page, specify if you want to invoke your rule based on an event pattern or a schedule. For this blog post, you will select a schedule based on a Cron expression.</li> 
<li>You can schedule the Amazon Inspector assessment any time you want using the Cron expression, or you can use the Cron expression I used in the following screenshot, which will run the Amazon Inspector assessment every Sunday at 10:00 P.M. GMT.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step13.png" /></li> 
<li>Choose <strong>Add target</strong> and choose <strong>Inspector assessment template</strong> from the drop-down menu. Paste the ARN of the Amazon Inspector template you previously created in the <a href="https://console.aws.amazon.com/inspector/home" target="_blank" rel="noopener noreferrer">Amazon Inspector console</a> in the <strong>Assessment template</strong> box and choose <strong>Create a new role for this specific resource</strong>. This new role is necessary so that CloudWatch Events has the necessary permissions to start the Amazon Inspector assessment. CloudWatch Events will automatically create the new role and grant the minimum set of permissions needed to run the Amazon Inspector assessment. To proceed, choose <strong>Configure details</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step14.png" /></li> 
<li>Next, give your rule a name and a description. I suggest using a name that describes what the rule does, as shown in the following screenshot.</li> 
<li>Finish the wizard by choosing <strong>Create rule</strong>. The rule should appear in the <strong>Events – Rules</strong> section of the <a href="https://console.aws.amazon.com/cloudwatch/home" target="_blank" rel="noopener noreferrer">CloudWatch console</a>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step15.png" /></li> 
<li>To confirm your CloudWatch Events rule works, wait for the next time your CloudWatch Events rule is scheduled to run. For testing purposes, you can choose your CloudWatch Events rule and choose <strong>Edit</strong> to change the schedule to run it sooner than scheduled.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step16.png" /></li> 
<li>Now navigate to the <a href="https://console.aws.amazon.com/inspector/home" target="_blank" rel="noopener noreferrer">Amazon Inspector console</a> to confirm the launch of your first assessment run. The <strong>Start time</strong> column shows you the time each assessment started and the <strong>Status </strong>column the status of your assessment. In the following screenshot, you can see Amazon Inspector is busy <strong>Collecting data</strong> from the selected assessment targets.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/19/part2-step4-inspector-step17.png" /></li> 
</ol> 
<p>You have concluded the last step of this blog post by setting up a regular scan of your EC2 instance with Amazon Inspector and a notification that will let you know if your EC2 instance is vulnerable to any known CVEs. In a previous Security Blog post, Eric Fitzgerald explained <a href="https://aws.amazon.com/blogs/security/how-to-remediate-amazon-inspector-security-findings-automatically/" target="_blank" rel="noopener noreferrer">How to Remediate Amazon Inspector Security Findings Automatically</a>. Although that blog post is for Linux-based EC2 instances, the post shows that you can learn about Amazon Inspector findings in other ways than email alerts.</p> 
<b>Conclusion</b> 
<p>In this two-part blog post, I showed how to make sure you keep your EC2 instances up to date with patching, how to back up your instances with snapshots, and how to monitor your instances for CVEs. Collectively these measures help to protect your instances against common attack vectors that attempt to exploit known vulnerabilities. In Part 1, I showed how to configure your EC2 instances to make it easy to use Systems Manager, EBS Snapshot Scheduler, and Amazon Inspector. I also showed how to use Systems Manager to schedule automatic patches to keep your instances current in a timely fashion. In Part 2, I showed you how to take regular snapshots of your data by using EBS Snapshot Scheduler and how to use Amazon Inspector to check if your EC2 instances running Microsoft Windows contain any common vulnerabilities and exposures (CVEs).</p> 
<p>If you have comments about today’s or <a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-1/" target="_blank" rel="noopener noreferrer">yesterday’s post</a>, submit them in the “Comments” section below. If you have questions about or issues implementing any part of this solution, start a new thread on the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=30" target="_blank" rel="noopener noreferrer">Amazon EC2 forum</a> or the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=205" target="_blank" rel="noopener noreferrer">Amazon Inspector forum</a>, or <a href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
<p>– Koen</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6418');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/AWSShield_email1.jpg" /> 
<b class="lb-b blog-post-title" property="name headline">Now You Can Use AWS Shield Advanced to Help Protect Your Amazon EC2 Instances and Network Load Balancers</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Ritwik Manan</span></span> | on 
<time property="datePublished" datetime="2017-11-21T14:09:47+00:00">21 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-shield/" title="View all posts in AWS Shield*"><span property="articleSection">AWS Shield*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/now-you-can-use-aws-shield-advanced-to-protect-your-amazon-ec2-instances-and-network-load-balancers/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6248" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6248&amp;disqus_title=Now+You+Can+Use+AWS+Shield+Advanced+to+Help+Protect+Your+Amazon+EC2+Instances+and+Network+Load+Balancers&amp;disqus_url=https://aws.amazon.com/blogs/security/now-you-can-use-aws-shield-advanced-to-protect-your-amazon-ec2-instances-and-network-load-balancers/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6248');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/AWSShield_email1.jpg" /></p> 
<p>Starting today,&nbsp;<a href="https://aws.amazon.com/shield/" target="_blank" rel="noopener noreferrer">AWS Shield Advanced</a>&nbsp;can help protect your&nbsp;<a href="https://aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">Amazon EC2</a> instances and <a href="http://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html" target="_blank" rel="noopener noreferrer">Network Load Balancers</a>&nbsp;against infrastructure-layer <a href="https://aws.amazon.com/shield/ddos-attack-protection/" target="_blank" rel="noopener noreferrer">Distributed Denial of Service</a> (DDoS) attacks. Enable AWS Shield Advanced on an <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html" target="_blank" rel="noopener noreferrer">AWS Elastic IP address</a> and attach the address to an internet-facing EC2 instance or Network Load Balancer. AWS Shield Advanced automatically detects the type of AWS resource behind the Elastic IP address and mitigates DDoS attacks.</p> 
<p>AWS Shield Advanced also ensures that all your <a href="https://aws.amazon.com/vpc/" target="_blank" rel="noopener noreferrer">Amazon VPC</a> <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_ACLs.html" target="_blank" rel="noopener noreferrer">network access control lists</a> (ACLs) are automatically executed on AWS Shield at the edge of the AWS network, giving you access to additional bandwidth and scrubbing capacity as well as mitigating large volumetric DDoS attacks. You also can customize additional mitigations on AWS Shield by <a href="http://docs.aws.amazon.com/waf/latest/developerguide/ddos-overview.html#ddos-drt" target="_blank" rel="noopener noreferrer">engaging the AWS DDoS Response Team</a>, which can preconfigure the mitigations or respond to incidents as they happen. For every incident detected by AWS Shield Advanced, you also get near-real-time visibility via <a href="https://aws.amazon.com/cloudwatch/" target="_blank" rel="noopener noreferrer">Amazon CloudWatch</a> metrics and details about the incident, such as the geographic origin and source IP address of the attack.</p> 
<p>AWS Shield Advanced for Elastic IP addresses extends the coverage of DDoS cost protection, which safeguards against scaling charges as a result of a DDoS attack. DDoS cost protection now allows you to request service credits for <a href="http://aws.amazon.com/elasticloadbalancing" target="_blank" rel="noopener noreferrer">Elastic Load Balancing</a>, <a href="http://aws.amazon.com/cloudfront" target="_blank" rel="noopener noreferrer">Amazon CloudFront</a>, <a href="https://aws.amazon.com/route53/" target="_blank" rel="noopener noreferrer">Amazon Route 53</a>, and your EC2 instance hours in the event that these increase as the result of a DDoS attack.</p> 
<h3>Get started protecting EC2 instances and Network Load Balancers</h3> 
<p>To get started:</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/waf/home" target="_blank" rel="noopener noreferrer">AWS WAF and AWS Shield console</a>.</li> 
<li>Activate AWS Shield Advanced by choosing <strong>Activate AWS Shield Advanced</strong> and accepting the terms.</li> 
<li>Navigate to <strong>Protected Resources</strong> through the navigation pane.</li> 
<li>Choose the Elastic IP addresses that you want to protect (these can point to EC2 instances or Network Load Balancers).</li> 
</ol> 
<p>If AWS Shield Advanced detects a DDoS attack, you can get details about the attack by checking CloudWatch, or the <strong>Incidents</strong> tab on the AWS WAF and AWS Shield console. To learn more about this new feature and AWS Shield Advanced, see the <a href="https://aws.amazon.com/shield" target="_blank" rel="noopener noreferrer">AWS Shield home page</a>.</p> 
<p>If you have comments or questions about this post, submit them in the “Comments” section below, start a new thread in the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=238&amp;start=0" target="_blank" rel="noopener noreferrer">AWS Shield forum</a>, or <a href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
<p>– Ritwik</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6248');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-Step0-Overview-v2-a-1260x490.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Patch, Inspect, and Protect Microsoft Windows Workloads on AWS—Part 1</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Koen van Blijderveen</span></span> | on 
<time property="datePublished" datetime="2017-11-21T07:48:41+00:00">21 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/management-tools/amazon-ec2-systems-manager/" title="View all posts in Amazon EC2 Systems Manager*"><span property="articleSection">Amazon EC2 Systems Manager*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/compute/amazon-ec2/" title="View all posts in Amazon EC2*"><span property="articleSection">Amazon EC2*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/storage/amazon-elastic-block-storage-ebs/" title="View all posts in Amazon Elastic Block Storage (EBS)*"><span property="articleSection">Amazon Elastic Block Storage (EBS)*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/amazon-inspector/" title="View all posts in Amazon Inspector*"><span property="articleSection">Amazon Inspector*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-1/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6379" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6379&amp;disqus_title=How+to+Patch%2C+Inspect%2C+and+Protect+Microsoft+Windows+Workloads+on+AWS%E2%80%94Part+1&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-1/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6379');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>Most malware tries to compromise your systems by using a known vulnerability that the maker of the operating system has already patched. To help prevent malware from affecting your systems, two security best practices are to apply all operating system patches to your systems and actively monitor your systems for missing patches. In case you do need to recover from a malware attack, you should make regular backups of your data.</p> 
<p>In today’s blog post (Part 1 of a two-part post), I show how to keep your <a href="https://aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">Amazon EC2</a> instances that run Microsoft Windows up to date with the latest security patches by using <a href="https://aws.amazon.com/ec2/systems-manager/" target="_blank" rel="noopener noreferrer">Amazon EC2 Systems Manager</a>. <a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-2/" target="_blank" rel="noopener noreferrer">Tomorrow in Part 2</a>, I show how to take regular <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSSnapshots.html" target="_blank" rel="noopener noreferrer">snapshots</a> of your data by using <a href="http://docs.aws.amazon.com/solutions/latest/ebs-snapshot-scheduler/overview.html" target="_blank" rel="noopener noreferrer">Amazon EBS Snapshot Scheduler</a> and how to use <a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer">Amazon Inspector</a> to check if your EC2 instances running Microsoft Windows contain any common vulnerabilities and exposures (CVEs).</p> 
<h3>What you should know first</h3> 
<p>To follow along with the solution in this post, you need one or more EC2 instances. You may use existing instances or create new instances. For the blog post, I assume this is an <a href="https://aws.amazon.com/windows/" target="_blank" rel="noopener noreferrer">EC2 for Microsoft Windows Server 2012 R2</a> instance installed from the <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html" target="_blank" rel="noopener noreferrer">Amazon Machine Images</a> (AMIs). If you are not familiar with how to launch an EC2 instance, see <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/launching-instance.html" target="_blank" rel="noopener noreferrer">Launching an Instance</a>. I also assume you launched or will launch your instance in a <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html" target="_blank" rel="noopener noreferrer">private subnet</a>. A private subnet is not directly accessible via the internet, and access to it requires either a VPN connection to your on-premises network or a <a href="https://s3.amazonaws.com/quickstart-reference/microsoft/rdgateway/latest/doc/Microsoft_Remote_Desktop_Gateway_Quick_Start.pdf" target="_blank" rel="noopener noreferrer">jump host</a> in a public subnet (a subnet with access to the internet). You must make sure that the EC2 instance can connect to the internet using a <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_NAT_Instance.html" target="_blank" rel="noopener noreferrer">network address translation (NAT) instance</a> or <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-nat-gateway.html" target="_blank" rel="noopener noreferrer">NAT gateway</a> to communicate with Systems Manager and Amazon Inspector. The following diagram shows how you should structure your <a href="https://aws.amazon.com/vpc/" target="_blank" rel="noopener noreferrer">Amazon Virtual Private Cloud</a> (VPC). You should also be familiar with <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-restoring-volume.html" target="_blank" rel="noopener noreferrer">Restoring an Amazon EBS Volume from a Snapshot</a> and <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-attaching-volume.html" target="_blank" rel="noopener noreferrer">Attaching an Amazon EBS Volume to an Instance</a>.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-Step0-network-diagram-a.png" /></p> 
<p>Later on, you will assign tasks to a maintenance window to patch your instances with Systems Manager. To do this, the <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> (IAM) user you are using for this post must have the <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_passrole.html" target="_blank" rel="noopener noreferrer">iam:PassRole</a> permission. This permission allows this IAM user to assign tasks to pass their own IAM permissions to the AWS service. In this example, when you assign a task to a maintenance window, IAM passes your credentials to Systems Manager. This safeguard ensures that the user cannot use the creation of tasks to elevate their IAM privileges because their own IAM privileges limit which tasks they can run against an EC2 instance. You should also authorize your IAM user to use EC2, Amazon Inspector, <a href="https://aws.amazon.com/cloudwatch/" target="_blank" rel="noopener noreferrer">Amazon CloudWatch</a>, and Systems Manager. You can achieve this by attaching the following AWS managed policies to the IAM user you are using for this example: <code>AmazonInspectorFullAccess</code>, <code>AmazonEC2FullAccess</code>, and <code>AmazonSSMFullAccess</code>.<span id="more-6379"></span></p> 
<h3>Architectural overview</h3> 
<p>The following diagram illustrates the components of this solution’s architecture.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-Step0-Overview-v2-a.png" /></p> 
<p>For this blog post, <strong>Microsoft Windows EC2</strong> is Amazon EC2 for Microsoft Windows Server 2012 R2 instances with attached <a href="https://aws.amazon.com/ebs/" target="_blank" rel="noopener noreferrer">Amazon Elastic Block Store</a> (Amazon EBS) volumes, which are running in your VPC. These instances may be standalone Windows instances running your Windows workloads, or you may have joined them to an Active Directory domain controller. For instances joined to a domain, you can be using Active Directory running on an EC2 for Windows instance, or you can use <a href="https://aws.amazon.com/directoryservice/" target="_blank" rel="noopener noreferrer">AWS Directory Service for Microsoft Active Directory</a>.</p> 
<p><strong>Amazon EC2 Systems Manager</strong> is a scalable tool for remote management of your EC2 instances. You will use the <a href="https://aws.amazon.com/ec2/systems-manager/run-command/" target="_blank" rel="noopener noreferrer">Systems Manager Run Command</a> to install the Amazon Inspector agent. The agent enables EC2 instances to communicate with the Amazon Inspector service and run assessments, which I explain in detail later in this blog post. You also will create a Systems Manager association to keep your EC2 instances up to date with the latest security patches.</p> 
<p>You can use the <a href="https://aws.amazon.com/answers/infrastructure-management/ebs-snapshot-scheduler/" target="_blank" rel="noopener noreferrer"><strong>EBS</strong><strong> Snapshot Scheduler</strong></a> to schedule automated snapshots at regular intervals. You will use it to set up regular snapshots of your Amazon EBS volumes. EBS Snapshot Scheduler is a prebuilt solution by AWS that you will deploy in your AWS account. With Amazon EBS snapshots, you pay only for the actual data you store. Snapshots save only the data that has changed since the previous snapshot, which minimizes your cost.</p> 
<p>You will use <strong>Amazon Inspector</strong> to run security assessments on your EC2 for Windows Server instance. In this post, I show how to assess if your EC2 for Windows Server instance is vulnerable to any of the more than 50,000 CVEs registered with Amazon Inspector.</p> 
<p>In today’s and tomorrow’s posts, I show you how to:</p> 
<ol> 
<li><strong>Launch an <a href="https://aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">EC2</a> instance</strong> with an IAM role, Amazon EBS volume, and tags that Systems Manager and Amazon Inspector will use.</li> 
<li><strong>Configure </strong><a href="https://aws.amazon.com/ec2/systems-manager/" target="_blank" rel="noopener noreferrer"><strong>Systems Manager</strong></a> to install the Amazon Inspector agent and patch your EC2 instances.</li> 
<li><strong>Take </strong><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSSnapshots.html" target="_blank" rel="noopener noreferrer"><strong>EBS snapshots</strong></a><strong>&nbsp;by using </strong><a href="http://docs.aws.amazon.com/solutions/latest/ebs-snapshot-scheduler/overview.html" target="_blank" rel="noopener noreferrer"><strong>EBS Snapshot Scheduler</strong></a> to automate snapshots based on instance tags.</li> 
<li><strong>Use </strong><a href="https://aws.amazon.com/inspector/" target="_blank" rel="noopener noreferrer"><strong>Amazon Inspector</strong></a> to check if your EC2 instances running Microsoft Windows contain any common vulnerabilities and exposures (CVEs).</li> 
</ol> 
<p><a name="p1s1"></a></p> 
<b>Step 1: Launch an EC2 instance</b> 
<p>In this section, I show you how to launch your EC2 instances so that you can use Systems Manager with the instances and use instance tags with EBS Snapshot Scheduler to automate snapshots. This requires three things:</p> 
<li><strong>Create an IAM role for Systems Manager</strong> before launching your EC2 instance.</li> 
<li><strong>Launch your EC2 instance </strong>with Amazon EBS and the IAM role for Systems Manager.</li> 
<li><strong>Add tags</strong> to instances so that you can automate policies for which instances you take snapshots of and when.</li> 
<h3>Create an IAM role for Systems Manager</h3> 
<p>Before launching your EC2 instance, I recommend that you first create an <a href="https://aws.amazon.com/iam/details/manage-roles/" target="_blank" rel="noopener noreferrer">IAM role</a> for Systems Manager, which you will use to update the EC2 instance you will launch. AWS already provides a preconfigured policy that you can use for your new role, and it is called <code>AmazonEC2RoleforSSM</code>.</p> 
<ol> 
<li>Sign in to the <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">IAM console</a> and choose <strong>Roles</strong> in the navigation pane. Choose <strong>Create new role</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-Step1-ec2-step1.png" /></li> 
<li>In the role-creation workflow, choose <strong>AWS service </strong>&gt;<strong> EC2 </strong>&gt;<strong> EC2</strong> to create a role for an EC2 instance.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-Step1-ec2-step2.png" /></li> 
<li>Choose the <strong>AmazonEC2RoleforSSM</strong> policy to attach it to the new role you are creating.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-Step1-ec2-step3.png" /></li> 
<li>Give the role a meaningful name (I chose <code>EC2SSM</code>) and description, and choose <strong>Create role</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-Step1-ec2-step4.png" /></li> 
</ol> 
<h3>Launch your EC2 instance</h3> 
<p>To follow along, you need an EC2 instance that is running Microsoft Windows Server 2012 R2 and that has an Amazon EBS volume attached. You can use any existing instance you may have or create a new instance.</p> 
<p>When launching your new EC2 instance, be sure that:</p> 
<li>The operating system is Microsoft Windows Server 2012 R2.</li> 
<li>You attach at least one Amazon EBS volume to the EC2 instance.</li> 
<li>You attach the newly created IAM role (<code>EC2SSM</code>).</li> 
<li>The EC2 instance can connect to the internet through a <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-nat-gateway.html" target="_blank" rel="noopener noreferrer">network address translation (NAT) gateway</a> or a <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_NAT_Instance.html" target="_blank" rel="noopener noreferrer">NAT instance</a>.</li> 
<li>You create the tags shown in the following screenshot (you will use them later).</li> 
<p>If you are using an already launched EC2 instance, you can attach the newly created role as described in <a href="https://aws.amazon.com/blogs/security/easily-replace-or-attach-an-iam-role-to-an-existing-ec2-instance-by-using-the-ec2-console/" target="_blank" rel="noopener noreferrer">Easily Replace or Attach an IAM Role to an Existing EC2 Instance by Using the EC2 Console</a>.</p> 
<h3>Add tags</h3> 
<p>The final step of configuring your EC2 instances is to add tags. You will use these tags to configure Systems Manager in Step 2 of this blog post and to configure Amazon Inspector in Part 2. For this example, I add a tag key, <code>Patch Group</code>, and set the value to <code>Windows Servers</code>. I could have other groups of EC2 instances that I treat differently by having the same tag key but a different tag value. For example, I might have a collection of other servers with the <code>Patch Group</code> tag key with a value of <code>IAS Servers</code>.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step1-ec2-step5.png" /></p> 
<p><strong>Note:</strong> You must wait a few minutes until the EC2 instance becomes available before you can proceed to the next section.</p> 
<p>At this point, you now have at least one EC2 instance you can use to configure Systems Manager, use EBS Snapshot Scheduler, and use Amazon Inspector.</p> 
<p><strong>Note:</strong> If you have a large number of EC2 instances to tag, you may want to use the EC2 <a href="http://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CreateTags.html" target="_blank" rel="noopener noreferrer">CreateTags API</a> rather than manually apply tags to each instance.</p> 
<b>Step 2: Configure Systems Manager</b> 
<p>In this section, I show you how to use Systems Manager to apply operating system patches to your EC2 instances, and how to manage patch compliance.</p> 
<p>To start, I will provide some background information about Systems Manager. Then, I will cover how to:</p> 
<li><strong>Create the Systems Manager IAM role</strong> so that Systems Manager is able to perform patch operations.</li> 
<li><strong>Associate a Systems Manager patch baseline with your instance</strong> to define which patches Systems Manager should apply.</li> 
<li><strong>Define a maintenance window</strong> to make sure Systems Manager patches your instance when you tell it to.</li> 
<li><strong>Monitor patch compliance </strong>to verify the patch state of your instances.</li> 
<p>Systems Manager is a collection of capabilities that helps you automate management tasks for AWS-hosted instances on EC2 and your on-premises servers. In this post, I use Systems Manager for two purposes: to run remote commands and apply operating system patches. To learn about the full capabilities of Systems Manager, see <a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/what-is-systems-manager.html" target="_blank" rel="noopener noreferrer">What Is Amazon EC2 Systems Manager?</a></p> 
<p>Patch management is an important measure to prevent malware from infecting your systems. Most malware attacks look for vulnerabilities that are publicly known and in most cases are already patched by the maker of the operating system. These publicly known vulnerabilities are well documented and therefore easier for an attacker to exploit than having to discover a new vulnerability.</p> 
<p>Patches for these new vulnerabilities are available through Systems Manager within hours after Microsoft releases them. There are two prerequisites to use Systems Manager to apply operating system patches. First, you must attach the IAM role you created in the previous section, <code>EC2SSM</code>, to your EC2 instance. Second, you must install the Systems Manager agent on your EC2 instance. If you have used a recent Microsoft Windows Server 2012 R2 AMI published by AWS, Amazon has already installed the Systems Manager agent on your EC2 instance. You can confirm this by logging in to an EC2 instance and looking for <strong>Amazon SSM Agent</strong> under <strong>Programs and Features</strong> in Windows. To install the Systems Manager agent on an instance that does not have the agent preinstalled or if you want to use the Systems Manager agent on your on-premises servers, see the <a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/ssm-agent.html" target="_blank" rel="noopener noreferrer">documentation about installing the Systems Manager agent</a>. If you forgot to attach the newly created role when launching your EC2 instance or if you want to attach the role to already running EC2 instances, see <a href="https://aws.amazon.com/blogs/security/new-attach-an-aws-iam-role-to-an-existing-amazon-ec2-instance-by-using-the-aws-cli/" target="_blank" rel="noopener noreferrer">Attach an AWS IAM Role to an Existing Amazon EC2 Instance by Using the AWS CLI</a> or <a href="https://aws.amazon.com/blogs/security/easily-replace-or-attach-an-iam-role-to-an-existing-ec2-instance-by-using-the-ec2-console/" target="_blank" rel="noopener noreferrer">use the AWS Management Console</a>.</p> 
<p>To make sure your EC2 instance receives operating system patches from Systems Manager, you will use the default <a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-patch.html" target="_blank" rel="noopener noreferrer">patch baseline</a> provided and maintained by AWS, and you will define a maintenance window so that you control when your EC2 instances should receive patches. For the maintenance window to be able to run any tasks, you also must create a new role for Systems Manager. This role is a different kind of role than the one you created earlier: Systems Manager will use this role instead of EC2. Earlier we created the <code>EC2SSM</code>&nbsp;role with the <code>AmazonEC2RoleforSSM</code>&nbsp;policy, which allowed the Systems Manager agent on our instance to communicate with the Systems Manager service. Here we need a new role with the policy <code>AmazonSSMMaintenanceWindowRole</code> to make sure the Systems Manager service is able to execute commands on our instance.</p> 
<h4>Create the Systems Manager IAM role</h4> 
<p>To create the new IAM role for Systems Manager, follow the same procedure as in the previous section, but in Step 3, choose the <strong>AmazonSSMMaintenanceWindowRole</strong> policy instead of the previously selected <strong>AmazonEC2RoleforSSM</strong> policy.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step1.png" /></p> 
<p>Finish the wizard and give your new role a recognizable name. For example, I named my role <code>MaintenanceWindowRole</code>.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step2.png" /></p> 
<p>By default, only EC2 instances can assume this new role. You must update the trust policy to enable Systems Manager to assume this role.</p> 
<p>To update the trust policy associated with this new role:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">IAM console</a> and choose <strong>Roles</strong> in the navigation pane.</li> 
<li>Choose <strong>MaintenanceWindowRole</strong> and choose the <strong>Trust relationships</strong> tab. Then choose <strong>Edit trust relationship</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step3.png" /></li> 
<li>Update the policy document by copying the following policy and pasting it in the <strong>Policy Document</strong>&nbsp;box. As you can see, I have added the <code>ssm.amazonaws.com</code> service to the list of allowed Principals that can assume this role. Choose <strong>Update Trust Policy</strong>. 
<code class="lang-text">{
&quot;Version&quot;:&quot;2012-10-17&quot;,
&quot;Statement&quot;:[
{
&quot;Sid&quot;:&quot;&quot;,
&quot;Effect&quot;:&quot;Allow&quot;,
&quot;Principal&quot;:{
&quot;Service&quot;:[
&quot;ec2.amazonaws.com&quot;,
&quot;ssm.amazonaws.com&quot;
]
},
&quot;Action&quot;:&quot;sts:AssumeRole&quot;
}
]
}</code> 
</ol> 
<h4>Associate a Systems Manager patch baseline with your instance</h4> 
<p>Next, you are going to associate a Systems Manager patch baseline with your EC2 instance. A patch baseline defines which patches Systems Manager should apply. You will use the default patch baseline that AWS manages and maintains. Before you can associate the patch baseline with your instance, though, you must determine if Systems Manager recognizes your EC2 instance.</p> 
<p>Navigate to the <a href="https://console.aws.amazon.com/ec2/v2/home" target="_blank" rel="noopener noreferrer">EC2 console</a>, scroll down to <strong>Systems Manager Shared Resources</strong> in the navigation pane, and choose <strong>Managed Instances</strong>. Your new EC2 instance should be available there. If your instance is missing from the list, verify the following:</p> 
<ol> 
<li>Go to the EC2 console and verify your instance is running.</li> 
<li>Select your instance and confirm you attached the Systems Manager IAM role, <code>EC2SSM</code>.</li> 
<li>Make sure that you deployed a <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-nat-gateway.html" target="_blank" rel="noopener noreferrer">NAT gateway</a> in your public subnet to ensure your VPC reflects the diagram at the start of this post so that the Systems Manager agent can connect to the Systems Manager internet endpoint.</li> 
<li>Check the <a href="http://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-install-ssm-win.html#sysman-agent-logs-win" target="_blank" rel="noopener noreferrer">Systems Manager Agent logs</a> for any errors.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step4-a.png" /></li> 
</ol> 
<p>Now that you have confirmed that Systems Manager can manage your EC2 instance, it is time to associate the AWS maintained patch baseline with your EC2 instance:</p> 
<ol> 
<li>Choose <strong>Patch Baselines</strong> under <strong>Systems Manager Services</strong> in the navigation pane of the <a href="https://console.aws.amazon.com/ec2/v2/home" target="_blank" rel="noopener noreferrer">EC2 console</a>.</li> 
<li>Choose the default patch baseline as highlighted in the following screenshot, and choose <strong>Modify Patch Groups</strong> in the <strong>Actions</strong> drop-down.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step5.png" /></li> 
<li>In the <strong>Patch group</strong> box, enter the same value you entered under the <code>Patch Group</code> tag of your EC2 instance in “Step 1: Configure your EC2 instance.” In this example, the value I enter is <code>Windows Servers</code>. Choose the check mark icon next to the patch group and choose <strong>Close</strong>.<img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step6.png" /></li> 
</ol> 
<h4>Define a maintenance window</h4> 
<p>Now that you have successfully set up a role and have associated a patch baseline with your EC2 instance, you will define a maintenance window so that you can control when your EC2 instances should receive patches. By creating multiple maintenance windows and assigning them to different patch groups, you can make sure your EC2 instances do not all reboot at the same time. The <code>Patch Group</code> resource tag you defined earlier will determine to which patch group an instance belongs.</p> 
<p>To define a maintenance window:</p> 
<ol> 
<li>Navigate to the <a href="https://console.aws.amazon.com/ec2/v2/home" target="_blank" rel="noopener noreferrer">EC2 console</a>, scroll down to <strong>Systems Manager Shared Resources</strong> in the navigation pane, and choose <strong>Maintenance Windows</strong>. Choose <strong>Create a Maintenance Window</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step7.png" /></li> 
<li>Select the Cron schedule builder to define the schedule for the maintenance window. In the example in the following screenshot, the maintenance window will start every Saturday at 10:00 P.M. UTC.</li> 
<li>To specify when your maintenance window will end, specify the duration. In this example, the four-hour maintenance window will end on the following Sunday morning at 2:00 A.M. UTC (in other words, four hours after it started).</li> 
<li>Systems manager completes all tasks that are in process, even if the maintenance window ends. In my example, I am choosing to prevent new tasks from starting within one hour of the end of my maintenance window because I estimated my patch operations might take longer than one hour to complete. Confirm the creation of the maintenance window by choosing <strong>Create maintenance window</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step8.png" /></li> 
<li>After creating the maintenance window, you must register the EC2 instance to the maintenance window so that Systems Manager knows which EC2 instance it should patch in this maintenance window. To do so, choose <strong>Register new targets </strong>on the <strong>Targets </strong>tab of your newly created maintenance window. You can register your targets by using the same <code>Patch Group</code> tag you used before to associate the EC2 instance with the AWS-provided patch baseline.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step9.png" /></li> 
<li>Assign a task to the maintenance window that will install the operating system patches on your EC2 instance: 
<ol type="a"> 
<li>Open <strong>Maintenance Windows</strong> in the <a href="https://console.aws.amazon.com/ec2/v2/home" target="_blank" rel="noopener noreferrer">EC2 console</a>, select your previously created maintenance window, choose the <strong>Tasks</strong> tab, and choose <strong>Register run command task </strong>from the <strong>Register new task </strong>drop-down.</li> 
<li>Choose the <strong>AWS-RunPatchBaseline</strong> document from the list of available documents.</li> 
<li>For <strong>Parameters</strong>: 
<ol type="i"> 
<li>For <strong>Role</strong>, choose the role you created previously (called <code>MaintenanceWindowRole</code>).</li> 
<li>For <strong>Execute on</strong>, specify how many EC2 instances Systems Manager should patch at the same time. If you have a large number of EC2 instances and want to patch all EC2 instances within the defined time, make sure this number is not too low. For example, if you have 1,000 EC2 instances, a maintenance window of 4 hours, and 2 hours’ time for patching, make this number at least 500.</li> 
<li>For <strong>Stop after</strong>, specify after how many errors Systems Manager should stop.</li> 
<li>For <strong>Operation</strong>, choose <strong>Install</strong> to make sure to install the patches.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step10.png" /></li> 
</ol> </li> 
</ol> </li> 
</ol> 
<p>Now, you must wait for the maintenance window to run at least once according to the schedule you defined earlier. Note that if you don’t want to wait, you can adjust the schedule to run sooner by choosing <strong>Edit maintenance window </strong>on the <strong>Maintenance Windows</strong> page of Systems Manager. If your maintenance window has expired, you can check the status of any maintenance tasks Systems Manager has performed on the <strong>Maintenance Windows</strong> page of Systems Manager and select your maintenance window.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step11.png" /></p> 
<h4>Monitor patch compliance</h4> 
<p>You also can see the overall patch compliance of all EC2 instances that are part of defined patch groups by choosing <strong>Patch Compliance</strong> under <strong>Systems Manager Services</strong> in the navigation pane of the <a href="https://console.aws.amazon.com/ec2/v2/home" target="_blank" rel="noopener noreferrer">EC2 console</a>. You can filter by <strong>Patch Group</strong> to see how many EC2 instances within the selected patch group are up to date, how many EC2 instances are missing updates, and how many EC2 instances are in an error state.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/18/part1-step2-ssm-step12.png" /></p> 
<p>In this section, you have set everything up for patch management on your instance. Now you know how to patch your EC2 instance in a controlled manner and how to check if your EC2 instance is compliant with the patch baseline you have defined. Of course, I recommend that you apply these steps to all EC2 instances you manage.</p> 
<h3>Summary</h3> 
<p>In Part 1 of this blog post, I have shown how to configure EC2 instances for use with Systems Manager, EBS Snapshot Scheduler, and Amazon Inspector. I also have shown how to use Systems Manager to keep your Microsoft Windows–based EC2 instances up to date. In <a href="https://aws.amazon.com/blogs/security/how-to-patch-inspect-and-protect-microsoft-windows-workloads-on-aws-part-2/" target="_blank" rel="noopener noreferrer">Part 2 </a>of this blog post tomorrow, I will show how to take regular snapshots of your data by using EBS Snapshot Scheduler and how to use Amazon Inspector to check if your EC2 instances running Microsoft Windows contain any CVEs.</p> 
<p>If you have comments about this post, submit them in the “Comments” section below. If you have questions about or issues implementing this solution, start a new thread on the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=30" target="_blank" rel="noopener noreferrer">EC2 forum</a> or the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=205" target="_blank" rel="noopener noreferrer">Amazon Inspector forum</a>, or <a href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
<p>– Koen</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6379');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/fedRAMP.png" /> 
<b class="lb-b blog-post-title" property="name headline">AWS Achieves FedRAMP JAB Moderate Provisional Authorization for 20 Services in the AWS US East/West Region</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Chris Gile</span></span> | on 
<time property="datePublished" datetime="2017-11-20T09:59:42+00:00">20 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/public-sector/government/" title="View all posts in Government*"><span property="articleSection">Government*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/public-sector/" title="View all posts in Public Sector*"><span property="articleSection">Public Sector*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/" title="View all posts in Security, Identity, &amp; Compliance*"><span property="articleSection">Security, Identity, &amp; Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/aws-achieves-fedramp-jab-moderate-authorization-for-20-services-in-us-eastwest/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6308" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6308&amp;disqus_title=AWS+Achieves+FedRAMP+JAB+Moderate+Provisional+Authorization+for+20+Services+in+the+AWS+US+East%2FWest+Region&amp;disqus_url=https://aws.amazon.com/blogs/security/aws-achieves-fedramp-jab-moderate-authorization-for-20-services-in-us-eastwest/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6308');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/fedRAMP.png" /></p> 
<p>The&nbsp;AWS US East/West Region has received a Provisional Authority to Operate (P-ATO) from the Joint Authorization Board (JAB) at the Federal Risk and Authorization Management Program (FedRAMP) Moderate baseline.</p> 
<p>Though AWS has&nbsp;maintained an AWS US East/West Region Agency-ATO since early 2013, this announcement represents AWS’s carefully deliberated move to the JAB for the centralized maintenance of our P-ATO for 10 services already authorized. This also includes the addition of 10 new services to our <a href="https://aws.amazon.com/compliance/fedramp/" target="_blank" rel="noopener noreferrer">FedRAMP program</a> (see the complete list of services below). This doubles the number of FedRAMP Moderate services available to our customers to enable increased use of the cloud and support modernized IT missions. Our public sector customers now can leverage this FedRAMP P-ATO as a baseline for their own authorizations and look to the JAB for centralized Continuous Monitoring reporting and updates. In a significant enhancement for our partners that build their solutions on the AWS US East/West Region, they can now achieve FedRAMP JAB P-ATOs of their own for their Platform as a Service (PaaS) and Software as a Service (SaaS) offerings.</p> 
<p>In line with FedRAMP security requirements, our independent FedRAMP assessment was completed in partnership with a FedRAMP accredited Third Party Assessment Organization (3PAO) on our technical, management, and operational security controls to validate that they meet or exceed FedRAMP’s Moderate baseline requirements. Effective immediately, you can begin leveraging this P-ATO for the following 20 services in the AWS US East/West Region:</p> 
<li>Amazon Aurora (MySQL)*</li> 
<li>Amazon CloudWatch Logs*</li> 
<li>Amazon DynamoDB</li> 
<li>Amazon Elastic Block Store</li> 
<li>Amazon Elastic Compute Cloud</li> 
<li>Amazon EMR*</li> 
<li>Amazon Glacier*</li> 
<li>Amazon Kinesis Streams*</li> 
<li>Amazon RDS (MySQL, Oracle, Postgres*)</li> 
<li>Amazon Redshift</li> 
<li>Amazon Simple Notification Service*</li> 
<li>Amazon Simple Queue Service*</li> 
<li>Amazon Simple Storage Service</li> 
<li>Amazon Simple Workflow Service*</li> 
<li>Amazon Virtual Private Cloud</li> 
<li>AWS CloudFormation*</li> 
<li>AWS CloudTrail*</li> 
<li>AWS Identity and Access Management</li> 
<li>AWS Key Management Service</li> 
<li>Elastic Load Balancing</li> 
<p>* Services with first-time FedRAMP Moderate authorizations</p> 
<p>We continue to work with the FedRAMP Project Management Office (PMO), other regulatory and compliance bodies,&nbsp;and our customers and partners to ensure that we are raising the bar on our customers’ security and compliance needs.</p> 
<p>To learn more about how AWS helps customers meet their security and compliance requirements,&nbsp;see the&nbsp;<a href="https://aws.amazon.com/compliance/" target="_blank" rel="noopener noreferrer">AWS Compliance website</a>. To learn about what other public sector customers are doing on AWS,&nbsp;see our <a href="https://aws.amazon.com/solutions/case-studies/government-education/" target="_blank" rel="noopener noreferrer">Government, Education, and Nonprofits Case Studies and Customer Success Stories</a>. To review the public posting of our FedRAMP authorizations,&nbsp;see the <a href="https://aws.amazon.com/compliance/" target="_blank" rel="noopener noreferrer">FedRAMP Marketplace</a>.</p> 
<p>– Chris Gile, Senior Manager, AWS Public Sector Risk and Compliance</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6308');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/17/Netapp_1117_Pereira_noborder_a-1-776x630.png" /> 
<b class="lb-b blog-post-title" property="name headline">How AWS Managed Microsoft AD Helps to Simplify the Deployment and Improve the Security of Active Directory–Integrated .NET Applications</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Peter Pereira</span></span> | on 
<time property="datePublished" datetime="2017-11-20T08:59:30+00:00">20 NOV 2017</time> | 
<a href="https://aws.amazon.com/blogs/security/how-aws-managed-microsoft-ad-helps-to-simplify-the-deployment-and-improve-the-security-of-active-directory-integrated-net-applications/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-6284" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=6284&amp;disqus_title=How+AWS+Managed+Microsoft+AD+Helps+to+Simplify+the+Deployment+and+Improve+the+Security+of+Active+Directory%E2%80%93Integrated+.NET+Applications&amp;disqus_url=https://aws.amazon.com/blogs/security/how-aws-managed-microsoft-ad-helps-to-simplify-the-deployment-and-improve-the-security-of-active-directory-integrated-net-applications/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6284');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p>Companies using .NET applications to access sensitive user information, such as employee salary, Social Security Number, and credit card information, need an easy and secure way to manage access for users and applications.</p> 
<p>For example, let’s say that your company has a .NET payroll application. You want your Human Resources (HR) team to manage and update the payroll data for all the employees in your company. You also want your employees to be able to see their own payroll information in the application. To meet these requirements in a user-friendly and secure way, you want to manage access to the .NET application by using your existing Microsoft Active Directory identities. This enables you to provide users with single sign-on (SSO) access to the .NET application and to manage permissions using Active Directory groups. You also want the .NET application to authenticate itself to access the database, and to limit access to the data in the database based on the identity of the application user.</p> 
<p>Microsoft Active Directory supports these requirements through <a href="https://technet.microsoft.com/en-us/library/jj128431(v=ws.11).aspx" target="_blank" rel="noopener noreferrer">group Managed Service Accounts</a> (gMSAs) and <a href="https://technet.microsoft.com/en-us/library/jj553400(v=ws.11).aspx" target="_blank" rel="noopener noreferrer">Kerberos constrained delegation</a> (KCD). <a href="https://aws.amazon.com/directoryservice/" target="_blank" rel="noopener noreferrer">AWS Directory Service for Microsoft Active Directory</a>, also known as AWS Managed Microsoft AD, enables you to manage gMSAs and KCD through your administrative account, helping you to migrate and develop .NET applications that need these native Active Directory features.</p> 
<p>In this blog post, I give an overview of how to use AWS Managed Microsoft AD to manage gMSAs and KCD and demonstrate how you can configure a gMSA and KCD in six steps for a .NET application:</p> 
<ol> 
<li>Create your AWS Managed Microsoft AD.</li> 
<li>Create your Amazon RDS for SQL Server database.</li> 
<li>Create a gMSA for your .NET application.</li> 
<li>Deploy your .NET application.</li> 
<li>Configure your .NET application to use the gMSA.</li> 
<li>Configure KCD for your .NET application.</li> 
</ol> 
<h3>Solution overview</h3> 
<p>The following diagram shows the components of a .NET application that uses <a href="https://aws.amazon.com/rds/sqlserver/" target="_blank" rel="noopener noreferrer">Amazon RDS for SQL Server</a> with a gMSA and KCD. The diagram also illustrates authentication and access and is numbered to show the six key steps required to use a gMSA and KCD. To deploy this solution, the AWS Managed Microsoft AD directory must be in the same <a href="https://aws.amazon.com/vpc/" target="_blank" rel="noopener noreferrer">Amazon Virtual Private Cloud</a> (VPC) as RDS for SQL Server. For this example, my company name is Example Corp., and my directory uses the domain name, <code>example.com</code>.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/17/Netapp_1117_Pereira_noborder_a.png" /></p> 
<h3>Deploy the solution</h3> 
<p>The following six steps (numbered to correlate with the preceding diagram) walk you through configuring and using a gMSA and KCD.</p> 
<h4>1. Create your AWS Managed Microsoft AD directory</h4> 
<p>Using the <a href="https://console.aws.amazon.com/directoryservice/home" target="_blank" rel="noopener noreferrer">Directory Service console</a>, <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/create_directory.html" target="_blank" rel="noopener noreferrer">create your AWS Managed Microsoft AD directory</a> in your Amazon VPC. In my example, my domain name is <code>example.com</code>.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/1_Create_directory_a.png" /></p> 
<h4>2. Create your Amazon RDS for SQL Server database</h4> 
<p>Using the RDS console, <a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_GettingStarted.CreatingConnecting.SQLServer.html#CHAP_GettingStarted.Creating.SQLServer" target="_blank" rel="noopener noreferrer">create your Amazon RDS for SQL Server database instance</a> in the same Amazon VPC where your directory is running, and enable Windows Authentication. To enable Windows Authentication, select your directory in the <strong>Microsoft SQL Server Windows Authentication</strong> section in the <strong>Configure Advanced Settings</strong> step of the database creation workflow (see the following screenshot).</p> 
<p>In my example, I create my Amazon RDS for SQL Server <code>db-example</code> database, and enable Windows Authentication to allow my <code>db-example</code> database to authenticate against my <code>example.com</code> directory.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/2_Create_db_windows_auth_a.png" /></p> 
<h4>3. Create a gMSA for your .NET application</h4> 
<p>Now that you have deployed your directory, database, and application, you can create a gMSA for your .NET application.</p> 
<p>To perform the next steps, you must <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/install_ad_tools.html" target="_blank" rel="noopener noreferrer">install the Active Directory administration</a> tools on a Windows server that is joined to your AWS Managed Microsoft AD directory domain. If you do not have a Windows server joined to your directory domain, you can deploy a new <a href="https://aws.amazon.com/windows/products/ec2/" target="_blank" rel="noopener noreferrer">Amazon EC2 for Microsoft Windows Server</a> instance and <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/join_a_directory.html" target="_blank" rel="noopener noreferrer">join it to your directory domain</a>.</p> 
<p>To create a gMSA for your .NET application:</p> 
<ol start="1" type="a"> 
<li>Log on to the instance on which you installed the Active Directory administration tools by using a user that is a member of the <code>Admins</code> security group or the <code>Managed Service Accounts Admins</code> security group in your organizational unit (OU). For my example, I use the <code>Admin</code> user in the <code>example&nbsp;</code>OU.</li> 
</ol> 
<p style="padding-left: 30px"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/3_Admin_user.png" /></p> 
<ol start="2" type="a"> 
<li>Identify which .NET application servers (hosts) will run your .NET application. Create a <a href="https://msdn.microsoft.com/en-us/library/aa545347%28v=cs.70%29.aspx" target="_blank" rel="noopener noreferrer">new security group</a> in your OU and <a href="https://technet.microsoft.com/en-us/library/cc733097%28v=ws.11%29.aspx" target="_blank" rel="noopener noreferrer">add your .NET application servers as members</a> of this new group. This allows a group of application servers to use a single gMSA, instead of creating one gMSA for each server. In my example, I create a group, <code>App_server_grp</code>, in my <code>example</code> OU. I also add <code>Appserver1</code>, which is my .NET application server computer name, as a member of this new group.</li> 
</ol> 
<p style="padding-left: 30px"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/4_Security_group_a.png" /></p> 
<ol start="3" type="a"> 
<li><a href="https://technet.microsoft.com/en-us/library/jj128431%28v=ws.11%29.aspx" target="_blank" rel="noopener noreferrer">Create&nbsp;a gMSA</a> in your directory by running Windows PowerShell from the Start menu. The basic syntax to create the gMSA at the Windows PowerShell command prompt follows. 
<code class="lang-text">PS C:\Users\admin&gt; New-ADServiceAccount -name [gMSAname] -DNSHostName [domainname] -PrincipalsAllowedToRetrieveManagedPassword [AppServersSecurityGroup] -TrustedForDelegation $truedn &lt;Enter&gt;</code> 
<code class="lang-text">PS C:\Users\admin&gt; New-ADServiceAccount -name gMSAexample -DNSHostName example.com -PrincipalsAllowedToRetrieveManagedPassword App_server_grp -TrustedForDelegation $truedn &lt;Enter&gt;</code> 
<code class="lang-text">PS C:\Users\admin&gt; Get-ADServiceAccount gMSAexample &lt;Enter&gt;
DistinguishedName : CN=gMSAexample,CN=Managed Service Accounts,DC=example,DC=com
Enabled           : True
Name              : gMSAexample
ObjectClass       : msDS-GroupManagedServiceAccount
ObjectGUID        : 24d8b68d-36d5-4dc3-b0a9-edbbb5dc8a5b
SamAccountName    : gMSAexample$
SID               : S-1-5-21-2100421304-991410377-951759617-1603
UserPrincipalName :</code> 
</ol> 
<h4>4. Deploy your .NET application</h4> 
<p><a href="https://docs.microsoft.com/en-us/aspnet/web-forms/overview/deployment/visual-studio-web-deployment/deploying-to-iis" target="_blank" rel="noopener noreferrer">Deploy your .NET application on IIS</a> on <a href="https://aws.amazon.com/windows/products/ec2/" target="_blank" rel="noopener noreferrer">Amazon EC2 for Windows Server</a> instances. For this step, I assume you are the application’s expert and already know how to deploy it. Make sure that all of your instances are <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/join_a_directory.html" target="_blank" rel="noopener noreferrer">joined to your directory</a>.</p> 
<h4>5. Configure your .NET application to use the gMSA</h4> 
<p>You can configure your .NET application to use the gMSA to enforce strong password security policy and ensure password rotation of your service account. This helps to improve the security and simplify the management of your .NET application. Configure your .NET application in two steps:</p> 
<ol type="a"> 
<li><a href="https://msdn.microsoft.com/en-us/library/bb727008.aspx" target="_blank" rel="noopener noreferrer">Grant to gMSA the required permissions</a> to run your .NET application in the respective application folders. This is a critical step because when you change the application pool identity account to use gMSA, downtime can occur if the gMSA does not have the application’s required permissions. Therefore, make sure you first test the configurations in your development and test environments.</li> 
<li><a href="https://technet.microsoft.com/library/cc771170%28ws.10%29.aspx" target="_blank" rel="noopener noreferrer">Configure your application pool identity</a> on IIS to use the gMSA as the service account. When you configure a gMSA as the service account, you include the <code>$</code> at the end of the gMSA name. You do not need to provide a password because AWS Managed Microsoft AD automatically creates and rotates the password. In my example, my service account is <code>gMSAexample$</code>, as shown in the following screenshot.</li> 
</ol> 
<p style="padding-left: 30px"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/6_Application_Pool_gMSA_b.png" /></p> 
<p>You have completed all the steps to use gMSA to create and rotate your .NET application service account password! Now, you will configure KCD for your .NET application.</p> 
<h4>6. Configure KCD for your .NET application</h4> 
<p>You now are ready to allow your .NET application to have access to other services by using the user identity’s permissions instead of the application service account’s permissions. Note that KCD and gMSA are independent features, which means you do not have to create a gMSA to use KCD. For this example, I am using both features to show how you can use them together. To configure a regular service account such as a user or local built-in account, see the <a href="https://blogs.msdn.microsoft.com/wushuai/2017/01/13/constrained-kerberos-delegation-with-asp-net/" target="_blank" rel="noopener noreferrer">Kerberos constrained delegation with ASP.NET blog post on MSDN</a>.</p> 
<p>In my example, my goal is to delegate to the <code>gMSAexample</code> account the ability to enforce the user’s permissions to my <code>db-example</code> SQL Server database, instead of the <code>gMSAexample</code> account’s permissions. For this, I have to update the <code>msDS-AllowedToDelegateTo</code> gMSA attribute. The value for this attribute is the <a href="https://msdn.microsoft.com/en-us/library/ms677949%28v=vs.85%29.aspx" target="_blank" rel="noopener noreferrer">service principal name</a> (SPN) of the service instance that you are targeting, which in this case is the <code>db-example</code> Amazon RDS for SQL Server database.</p> 
<p>The SPN format for the <code>msDS-AllowedToDelegateTo</code> attribute is a combination of the service class, the Kerberos authentication endpoint, and the port number. The <a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_SQLServerWinAuth.html" target="_blank" rel="noopener noreferrer">Amazon RDS for SQL Server Kerberos authentication endpoint</a> format is <code>[database_name].[domain_name]</code>. The value for my <code>msDS-AllowedToDelegateTo</code> attribute is <code>MSSQLSvc/db-example.example.com:1433</code>, where <code>MSSQLSvc</code> and <code>1433</code> are the SQL Server Database service class and port number standards, respectively.</p> 
<p>Follow these steps to perform the <code>msDS-AllowedToDelegateTo</code> gMSA attribute configuration:</p> 
<ol type="a"> 
<li>Log on to your Active Directory management instance with a user identity that is a member of the <code>Kerberos Delegation Admins</code> security group. In this case, I will use <code>admin</code>.</li> 
<li>Open the <strong>Active Directory Users and Groups</strong> utility located in your <strong>Administrative Tools</strong> folder, choose <strong>View</strong>, and then choose <strong>Advanced Features</strong>.</li> 
<li>Expand your domain name (<code>example.com</code> in this example), and then choose the Managed Service Accounts security group. Right-click the gMSA account for the application pool you want to enable for Kerberos delegation, choose <strong>Properties, </strong>and choose the<strong> Attribute Editor </strong>tab.</li> 
<li>Search for the <code>msDS-AllowedToDelegateTo</code> attribute on the <strong>Attribute Editor</strong> tab and choose <strong>Edit</strong>.</li> 
<li>Enter the <code>MSSQLSvc/db-example.example.com:1433</code> value and choose <strong>Add</strong>.<br /> <img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/16/7_gMSA_RDS_SPN_a.png" /></li> 
<li>Choose <strong>OK</strong> and <strong>Apply</strong>, and your KCD configuration is complete.</li> 
</ol> 
<p>Congratulations! At this point, your application is using a gMSA rather than an embedded static user identity and password, and the application is able to access SQL Server using the identity of the application user. The gMSA eliminates the need for you to rotate the application’s password manually, and it allows you to better scope permissions for the application. When you use KCD, you can enforce access to your database consistently based on user identities at the database level, which prevents improper access that might otherwise occur because of an application error.</p> 
<h4>Summary</h4> 
<p>In this blog post, I demonstrated&nbsp;how to simplify the deployment and improve the security of your .NET application by using a group Managed Service Account and Kerberos constrained delegation with your AWS Managed Microsoft AD directory. I also outlined the main steps to get your .NET environment up and running on a managed Active Directory and SQL Server infrastructure. This approach will make it easier for you to build new .NET applications in the AWS Cloud or migrate existing ones in a more secure way.</p> 
<p>For additional information about using group Managed Service Accounts and Kerberos constrained delegation with your AWS Managed Microsoft AD directory, see the <a href="https://aws.amazon.com/documentation/directory-service/" target="_blank" rel="noopener noreferrer">AWS Directory Service documentation</a>.</p> 
<p>To learn more about AWS Directory Service, see the <a href="http://aws.amazon.com/directoryservice/" target="_blank" rel="noopener noreferrer">AWS Directory Service home page</a>. If you have questions about this post or its solution, start a new thread on the&nbsp;<a href="https://forums.aws.amazon.com/forum.jspa?forumID=180" target="_blank" rel="noopener noreferrer">Directory Service forum.</a></p> 
<p>– Peter</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-6284');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/KMS_feature11.png" /> 
<b class="lb-b blog-post-title" property="name headline">How to Encrypt and Decrypt Your Data with the AWS Encryption CLI</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">June Blender</span></span> | on 
<time property="datePublished" datetime="2017-11-20T07:44:23+00:00">20 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-key-management-service/" title="View all posts in AWS Key Management Service*"><span property="articleSection">AWS Key Management Service*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/encryption/" title="View all posts in Encryption"><span property="articleSection">Encryption</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/how-to-encrypt-and-decrypt-your-data-with-the-aws-encryption-cli/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-5934" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=5934&amp;disqus_title=How+to+Encrypt+and+Decrypt+Your+Data+with+the+AWS+Encryption+CLI&amp;disqus_url=https://aws.amazon.com/blogs/security/how-to-encrypt-and-decrypt-your-data-with-the-aws-encryption-cli/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5934');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p style="text-align: center"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/12/KMS_feature1.png" /></p> 
<p>You can now encrypt and decrypt your data at the command line and in scripts—no cryptography or programming expertise is required. The new <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/crypto-cli.html" target="_blank" rel="noopener noreferrer">AWS Encryption SDK Command Line Interface</a> (AWS Encryption CLI) brings the <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/introduction.html" target="_blank" rel="noopener noreferrer">AWS Encryption SDK</a> to the command line.</p> 
<p>With the AWS Encryption CLI, you can take advantage of the advanced data protection built into the AWS Encryption SDK, including <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/how-it-works.html#envelope-encryption" target="_blank" rel="noopener noreferrer">envelope encryption</a> and strong <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/supported-algorithms.html" target="_blank" rel="noopener noreferrer">algorithm suites</a>, such as 256-bit <a href="https://en.wikipedia.org/wiki/Galois/Counter_Mode" target="_blank" rel="noopener noreferrer">AES-GCM</a> with <a href="https://en.wikipedia.org/wiki/HKDF" target="_blank" rel="noopener noreferrer">HKDF</a>. The AWS Encryption CLI supports best-practice features, such as <a href="http://docs.aws.amazon.com/kms/latest/developerguide/crypto_authen.html" target="_blank" rel="noopener noreferrer">authenticated encryption</a> with symmetric encryption keys and asymmetric signing keys, as well as unique data keys for each encryption operation. You can use the CLI with customer master keys (CMKs) from <a href="https://aws.amazon.com/kms/" target="_blank" rel="noopener noreferrer">AWS Key Management Service</a> (AWS KMS), master keys that you manage in <a href="https://aws.amazon.com/cloudhsm/" target="_blank" rel="noopener noreferrer">AWS CloudHSM</a>, or master keys from your own custom master key provider, but the AWS Encryption CLI does not require any AWS service.</p> 
<p>The AWS Encryption CLI is built on the <a href="https://github.com/awslabs/aws-encryption-sdk-python" target="_blank" rel="noopener noreferrer">AWS Encryption SDK for Python</a> and is fully interoperable with all language-specific implementations of the AWS Encryption SDK. It is supported on Linux, macOS, and Windows platforms. You can encrypt and decrypt your data in a&nbsp;shell&nbsp;on Linux and macOS, in a Command Prompt window (cmd.exe) on Windows, or in a PowerShell console on any system.</p> 
<p>In this blog post, I walk you through the process of using the AWS Encryption CLI to encrypt and decrypt a file. You can find more <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/crypto-cli-examples.html" target="_blank" rel="noopener noreferrer">examples of using the new CLI</a> and detailed instructions for <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/crypto-cli-install.html" target="_blank" rel="noopener noreferrer">installing and configuring</a> the CLI in the <a href="http://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/introduction.html" target="_blank" rel="noopener noreferrer">AWS Encryption SDK Developer Guide</a>. You are also welcome to participate in the development of the AWS Encryption CLI (<a href="https://github.com/awslabs/aws-encryption-sdk-cli" target="_blank" rel="noopener noreferrer">aws-encryption-sdk-cli</a>) on GitHub.</p> 
<h3>Encrypt a file</h3> 
<p>Let’s use the AWS Encryption CLI to encrypt a file called <code>secret.txt</code> in your current directory. I will write the file of encrypted output to the same directory. This <code>secret.txt</code> file contains a <code>Hello World</code> string, but it might contain data that is critical to your business.</p> 
<code class="lang-text">$ ls
secret.txt
$ cat secret.txt
Hello World</code> 
<p>I’m using a Linux shell, but you can run similar commands in a macOS shell, a Command Prompt window, or a PowerShell console.<span id="more-5934"></span></p> 
<p>When you encrypt data, you specify a master key. This example uses an <a href="http://docs.aws.amazon.com/kms/latest/developerguide/overview.html" target="_blank" rel="noopener noreferrer">AWS KMS</a> CMK, but you can use a master key from any master key provider that is compatible with the AWS Encryption SDK. The AWS Encryption CLI uses the master key to generate a unique data key for each file that it encrypts.</p> 
<p>If you use an AWS KMS CMK as your master key, you need to <a href="http://docs.aws.amazon.com/cli/latest/userguide/installing.html" target="_blank" rel="noopener noreferrer">install </a>and <a href="http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html#cli-quick-configuration" target="_blank" rel="noopener noreferrer">configure</a> the AWS Command Line Interface (AWS CLI) so that the credentials you use to authenticate to AWS KMS are available to the AWS Encryption CLI. Those credentials must give you permission to call the AWS KMS <a href="http://docs.aws.amazon.com/kms/latest/APIReference/API_GenerateDataKey.html" target="_blank" rel="noopener noreferrer">GenerateDataKey</a> and <a href="http://docs.aws.amazon.com/kms/latest/APIReference/API_Decrypt.html" target="_blank" rel="noopener noreferrer">Decrypt</a> APIs on the CMK.</p> 
<p>The first line of this example saves an <span style="color: #ff0000"><strong>AWS KMS CMK ID</strong></span> in the <code>$keyID</code> variable. The second line encrypts the data in the <code>secret.txt</code> file. (The backslash, “\”, is the line continuation character in Linux shells.)</p> 
<p>To run the following command, substitute a valid&nbsp;CMK identifier&nbsp;for the placeholder value in the command.</p> 
<code class="lang-text">$ keyID = &quot;<strong><span style="color: #ff0000">111122223333</span></strong>&quot;
$ aws-encryption-cli --encrypt --input secret.txt \
--master-keys key=$keyID \
--encryption-context purpose=test \
--metadata-output ~/metadata \
--output .
</code> 
<p>This command uses the <code>--encrypt</code> <code>(-e)</code> parameter to specify the encryption action and the <code>--master-keys</code> (<code>-m</code>) parameter with a <code>key</code> attribute to specify an AWS KMS CMK. If you’re not using an AWS KMS CMK, you need to include a <code>provider</code> attribute that identifies the master key provider.</p> 
<p>The command uses the <code>--encryption-context</code> parameter (<code>-c</code>) to specify an <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/concepts.html#encryption-context" target="_blank" rel="noopener noreferrer">encryption context</a>, <code>purpose=test</code>, for the operation. The encryption context is non-secret data that is cryptographically bound to the encrypted data and included in plaintext in the encrypted message that the CLI returns. Providing additional authenticated data, such as an encryption context, is a recommended best practice.</p> 
<p>The <code>--metadata-output</code> parameter tells the AWS Encryption CLI where to write the metadata for the encrypt command. The metadata includes the full paths to the input and output files, the encryption context, the algorithm suite, and other valuable information that you can use to review the operation and verify that it meets your security standards.</p> 
<p>The <code>--input</code> (<code>-i</code>) and <code>--output</code> (<code>-o</code>) parameters are required in every AWS Encryption CLI command. In this example, the input file is the <code>secret.txt</code> file. The output location is the current directory, which is represented by a dot (“<code>.</code>”).</p> 
<p>When the <code>--encrypt</code> command is successful, it creates a new file that contains the encrypted data, but it does not return any output. To see the results of the command, use a directory listing command, such as <code>ls</code> or <code>dir</code>. Running an <code>ls</code> command in this example shows that the AWS Encryption CLI generated the <code>secret.txt.encrypted</code> file.</p> 
<code class="lang-text">$ ls
secret.txt  secret.txt.encrypted</code> 
<p>By default, the output file that the <code>--encrypt</code> command creates has the same name as the input file, plus a <code>.encrypted</code> suffix. You can use the <code>--suffix</code> parameter to specify a custom suffix.</p> 
<p>The <code>secret.txt.encrypted</code> file contains a single, portable, secure <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/concepts.html#message" target="_blank" rel="noopener noreferrer">encrypted message</a>. The encrypted message includes the encrypted data, an encrypted copy of the data key that encrypted the data, and metadata, including the plaintext encryption context that I provided.</p> 
<p>You can manage an encrypted file in any way that you choose, including <a href="http://docs.aws.amazon.com/cli/latest/reference/s3/cp.html" target="_blank" rel="noopener noreferrer">copying it to an Amazon S3 bucket</a> or archiving it for later use.</p> 
<h3>Decrypt a file</h3> 
<p>Now, let’s use the AWS Encryption CLI to decrypt the <code>secret.txt.encrypted</code> file. If you have the required permissions on your master key, you can use any version of the AWS Encryption SDK to decrypt a file that the AWS Encryption CLI encrypted, including the AWS Encryption SDK libraries in <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/java.html" target="_blank" rel="noopener noreferrer">Java</a> and <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/python.html" target="_blank" rel="noopener noreferrer">Python</a>.</p> 
<p>However, you cannot use other tools, such as the <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryption.html" target="_blank" rel="noopener noreferrer">Amazon S3 encryption client</a> or the <a href="https://aws.amazon.com/blogs/developer/client-side-encryption-for-amazon-dynamodb/" target="_blank" rel="noopener noreferrer">Amazon DynamoDB encryption client</a>, to decrypt the encrypted message because they use an incompatible <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/message-format.html" target="_blank" rel="noopener noreferrer">encrypted message format</a>.</p> 
<p>The following command decrypts the contents of the <code>secret.txt.encrypted</code> file.</p> 
<code class="lang-text">$ aws-encryption-cli --decrypt --input secret.txt.encrypted \
--encryption-context purpose=test \
--metadata-output ~/metadata \
--output .</code> 
<p>The <code>--decrypt</code> command requires an encrypted message, like the one that the <code>--encrypt</code> command returned, and both <code>--input</code> and&nbsp;<code>--output</code> parameters.</p> 
<p>This command has no <code>--master-keys</code> parameter. A <code>--master-keys</code> parameter is required only if you’re not using an AWS KMS CMK.</p> 
<p>In this example command, the <code>--input</code> parameter specifies the <code>secret.txt.encrypted</code> file. The <code>--output</code> parameter specifies the current directory, which again is represented by a dot (“<code>.</code>”).</p> 
<p>The <code>--encryption-context</code> parameter supplies the same encryption context that was used in the encrypt command. This parameter is not required, but verifying the encryption context during decryption is a cryptographic best practice.</p> 
<p>The <code>--metatdata-output</code> parameter tells the command where to write the metadata for the decrypt command. If the file exists, this parameter appends the metadata to the existing file. The AWS Encryption CLI also has parameters that overwrite the metadata file or suppress the metadata.</p> 
<p>When it is successful, the decrypt command generates the file of decrypted (plaintext) data, but it does not return any output. To see the results of the decryption command, use a command that gets the content of the file, such as <code>cat</code> or <a href="https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Management/Get-Content" target="_blank" rel="noopener noreferrer">Get-Content</a>.</p> 
<code class="lang-text">$ ls
secret.txt  secret.txt.encrypted  secret.txt.encrypted.decrypted
$ cat secret.txt.encrypted.decrypted
Hello World
</code> 
<p>The output file that the <code>--decrypt</code> command created has the same name as the input file, plus a <code>.decrypted</code> suffix. The <code>--suffix</code> parameter works on <code>--decrypt</code> commands, too.</p> 
<h3>Encrypt directories and more</h3> 
<p>In addition to encrypting and decrypting a single file, you can use the AWS Encryption CLI to encrypt and decrypt strings that you pipe to the CLI, and all or selected files in a directory and its subdirectories, or local or remote volumes. We have <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/crypto-cli-examples.html" target="_blank" rel="noopener noreferrer">examples for you to try</a> in the AWS Encryption SDK documentation.</p> 
<p>The new AWS Encryption CLI also supports more advanced features of the AWS Encryption SDK, including alternate <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/supported-algorithms.html" target="_blank" rel="noopener noreferrer">algorithm suites</a>, alternate <a href="https://github.com/awslabs/aws-encryption-sdk-cli/blob/master/README.rst#advanced-configuration" target="_blank" rel="noopener noreferrer">Python-based master key providers</a>, encryption with <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/crypto-cli-how-to.html#crypto-cli-master-key" target="_blank" rel="noopener noreferrer">multiple master keys</a>, encrypting streamed data, creating encrypted messages with <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/crypto-cli-reference.html#cli-advanced-parameters" target="_blank" rel="noopener noreferrer">custom frame sizes</a>, and <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/data-key-caching.html" target="_blank" rel="noopener noreferrer">data key caching</a>.</p> 
<p>For more information about the AWS Encryption CLI, see the <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/crypto-cli.html" target="_blank" rel="noopener noreferrer">AWS Encryption SDK Developer Guide</a> and the <a href="http://aws-encryption-sdk-cli.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">full documentation</a>.</p> 
<p>– June</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5934');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/JC4_11171.jpg" /> 
<b class="lb-b blog-post-title" property="name headline">Use the New Visual Editor to Create and Modify Your AWS IAM Policies</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Joy Chatterjee</span></span> | on 
<time property="datePublished" datetime="2017-11-16T18:01:59+00:00">16 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-identity-and-access-management-iam/" title="View all posts in AWS Identity and Access Management (IAM)*"><span property="articleSection">AWS Identity and Access Management (IAM)*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/use-the-new-visual-editor-to-create-and-modify-your-aws-iam-policies/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-5967" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=5967&amp;disqus_title=Use+the+New+Visual+Editor+to+Create+and+Modify+Your+AWS+IAM+Policies&amp;disqus_url=https://aws.amazon.com/blogs/security/use-the-new-visual-editor-to-create-and-modify-your-aws-iam-policies/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5967');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p style="text-align: left">Today, <a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management</a> (IAM) made it easier for you to create and modify your IAM policies by using a point-and-click visual editor in the <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">IAM console</a>. The new visual editor guides you through granting permissions&nbsp;for IAM policies without requiring you to write policies in <a href="https://aws.amazon.com/blogs/security/back-to-school-understanding-the-iam-policy-grammar/" target="_blank" rel="noopener noreferrer">JSON</a> (although you can still author and edit policies in JSON, if you prefer). This update to the IAM console makes it easier to grant <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege" target="_blank" rel="noopener noreferrer">least privilege</a>&nbsp;for the AWS service <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_actionsconditions.html" target="_blank" rel="noopener noreferrer">actions</a> you select by listing all the supported <a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">resource types</a> and <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition.html" target="_blank" rel="noopener noreferrer">request conditions</a> you can specify.&nbsp;<a href="https://aws.amazon.com/blogs/security/move-over-json-policy-summaries-make-understanding-iam-policies-easier/" target="_blank" rel="noopener noreferrer">Policy summaries</a>&nbsp;identify <a href="https://aws.amazon.com/blogs/security/new-features-for-iam-policy-summaries-an-easier-way-to-detect-potential-typos-in-your-iam-policies/" target="_blank" rel="noopener noreferrer">unrecognized services and actions</a> and <a href="https://aws.amazon.com/blogs/security/iam-policy-summaries-now-help-you-identify-errors-and-correct-permissions-in-your-iam-policies/" target="_blank" rel="noopener noreferrer">permissions errors</a> when you import existing policies, and now you can use the visual editor to correct them. In this blog post, I give a brief overview of policy concepts and show you how to create a new policy by using the visual editor.</p> 
<h3>IAM policy concepts</h3> 
<p>You use IAM policies to define permissions for your IAM entities (<a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups.html" target="_blank" rel="noopener noreferrer">groups</a>, <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_users.html" target="_blank" rel="noopener noreferrer">users</a>, and <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html" target="_blank" rel="noopener noreferrer">roles</a>). <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" target="_blank" rel="noopener noreferrer">Policies</a> are composed of one or more <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_statement.html" target="_blank" rel="noopener noreferrer">statements</a> that include the following elements:</p> 
<li><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_effect.html" target="_blank" rel="noopener noreferrer">Effect</a>: Determines if a policy statement allows or explicitly denies access.</li> 
<li><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_action.html" target="_blank" rel="noopener noreferrer">Action</a>: Defines AWS service actions in a policy (these typically map to individual AWS APIs.)</li> 
<li><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_resource.html" target="_blank" rel="noopener noreferrer">Resource</a>: Defines the AWS resources to which actions can apply. The defined resources must be supported by the actions defined in the <span style="font-family: courier">Action</span> element for permissions to be granted.</li> 
<li><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition.html" target="_blank" rel="noopener noreferrer">Condition</a>: Defines when a permission is allowed or denied. The conditions defined in a policy must be supported by the actions defined in the <span style="font-family: courier">Action</span> element for the permission to be granted.</li> 
<p>To grant permissions, you attach policies to groups, users, or roles. Now that I have reviewed the <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html" target="_blank" rel="noopener noreferrer">elements of a policy</a>, I will demonstrate how to create an IAM policy&nbsp;with the visual editor.<span id="more-5967"></span></p> 
<h3>How to create an IAM policy with the visual editor</h3> 
<p>Let’s say my human resources (HR) recruiter, Casey, needs to review files located in an <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a> bucket for all the product manager (PM) candidates our HR team has interviewed in 2017. To grant this access, I will create and attach a policy to <span style="font-family: courier">Casey</span> that grants list and <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_understand-policy-summary-access-level-summaries.html" target="_blank" rel="noopener noreferrer">limited</a> read access to all folders that begin with <span style="font-family: courier">PM_Candidate</span> in the <span style="font-family: courier">pmrecruiting2017</span> S3 bucket. To create this new policy, I navigate to the <strong>Policies</strong> page in the <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">IAM console</a> and choose <strong>Create policy</strong>. Note that I could also use the visual editor to modify existing policies by choosing <strong>Import existing policy</strong>; however, for <span style="font-family: courier">Casey</span>, I will create a new policy.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/12/JC1_Createpolicy_1117.png" /></p> 
<p>On the <strong>Visual editor</strong> tab, I see a section that includes <strong>Service</strong>, <strong>Actions</strong>, <strong>Resources</strong>, and <strong>Request Conditions</strong>.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/14/JC2_1117.jpg" /></p> 
<h3>Select a service</h3> 
<p>To grant S3 permissions, I choose <strong>Select a service</strong>, type S3 in the search box, and choose <strong>S3</strong> from the list.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/14/JC3_1117_a.jpg" /></p> 
<h3>Select actions</h3> 
<p>After selecting <strong>S3</strong>, I can define actions for <span style="font-family: courier">Casey</span> by using one of four options:</p> 
<ol> 
<li>Filter actions in the service by using the search box.</li> 
<li>Type actions by choosing <strong>Add action</strong>&nbsp;next to <strong>Manual actions</strong>. For example, I can type <span style="font-family: courier">List*</span> to grant all S3 actions that begin with <span style="font-family: courier">List*</span>.</li> 
<li>Choose <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_understand-policy-summary-access-level-summaries.html" target="_blank" rel="noopener noreferrer">access levels</a> from <strong>List</strong>, <strong>Read</strong>, <strong>Write</strong>, <strong>Permissions management</strong>, and <strong>Tagging</strong>.</li> 
<li>Select individual actions by expanding each access level.</li> 
</ol> 
<p style="padding-left: 30px">In the following screenshot, I choose options 3 and 4, and choose <span style="font-family: courier">List</span> and <span style="font-family: courier">s3:GetObject</span> from the <strong>Read</strong> access level.</p> 
<p style="padding-left: 30px"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/14/JC4_1117.jpg" /></p> 
<p>We introduced access levels when we launched <a href="https://aws.amazon.com/blogs/security/move-over-json-policy-summaries-make-understanding-iam-policies-easier/" target="_blank" rel="noopener noreferrer">policy summaries</a> earlier in 2017. Access levels give you a way to categorize actions and help you understand the permissions in a policy. The following table gives you a quick overview of access levels.</p> 
<table border="1" cellpadding="5"> 
<tbody> 
<tr> 
<td width="129"><strong>Access level</strong></td> 
<td width="279"><strong>Description</strong></td> 
<td width="279"><strong>Example actions</strong></td> 
</tr> 
<tr> 
<td width="129"><span style="font-family: courier">List</span></td> 
<td width="279">Actions that allow you to see a list of resources</td> 
<td width="279"><span style="font-family: courier">s3:ListBucket</span>, <span style="font-family: courier">s3:ListAllMyBuckets</span></td> 
</tr> 
<tr> 
<td width="129"><span style="font-family: courier">Read</span></td> 
<td width="279">Actions that allow you to read the content in resources</td> 
<td width="279"><span style="font-family: courier">s3:GetObject</span>, <span style="font-family: courier">s3:GetBucketTagging</span></td> 
</tr> 
<tr> 
<td width="129"><span style="font-family: courier">Write</span></td> 
<td width="279">Actions that allow you to create, delete, or modify resources</td> 
<td width="279"><span style="font-family: courier">s3:PutObject</span>, <span style="font-family: courier">s3:DeleteBucket</span></td> 
</tr> 
<tr> 
<td width="129"><span style="font-family: courier">Permissions management</span></td> 
<td width="279">Actions that allow you to grant or modify permissions to resources</td> 
<td width="279"><span style="font-family: courier">s3:PutBucketPolicy</span></td> 
</tr> 
<tr> 
<td width="129"><span style="font-family: courier">Tagging</span></td> 
<td width="279">Actions that allow you to create, delete, or modify tags<br /> <strong>Note:</strong> Some services support <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html" target="_blank" rel="noopener noreferrer">authorization based on tags</a>.</td> 
<td width="279"><span style="font-family: courier">s3:PutBucketTagging</span>, <span style="font-family: courier">s3:DeleteObjectVersionTagging</span></td> 
</tr> 
</tbody> 
</table> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/JC5_1117_b.jpg" /></p> 
<p><strong>Note:</strong> By default, all actions you choose will be allowed. To deny actions, choose <strong>Switch to deny permissions&nbsp;</strong>in the upper right corner of the <strong>Actions</strong> section.</p> 
<p>As shown in the preceding screenshot, if I choose the question mark icon next to <span style="font-family: courier">GetObject</span>, I can see the description and supported resources and conditions for this action, which can help me scope permissions.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/14/JC6_1117.jpg" /></p> 
<p>The visual editor makes it easy to decide which actions I should select by providing in an integrated documentation panel the action description, supported resources or conditions, and any <a href="https://docs.aws.amazon.com/console/iam/policies-dependent-actions" target="_blank" rel="noopener noreferrer">required actions</a> for every AWS service action. Some AWS service actions have required actions, which are other AWS service actions that need to be granted in a policy for an action to run. For example, the AWS Directory Service action, <span style="font-family: courier">ds:CreateDirectory</span>, requires seven Amazon EC2 actions to be able to create a Directory Service directory.</p> 
<h3>Choose resources</h3> 
<p>In the <strong>Resources</strong> section, I can choose the resources on which actions can be taken. I choose <strong>Resources</strong> and see two ways that I can define or select resources:</p> 
<ol> 
<li>Define specific resources</li> 
<li>Select all resources</li> 
</ol> 
<p><strong>Specific</strong> is the default option, and only the applicable resources are presented based on the service and actions I chose previously. Because I want to grant <span style="font-family: courier">Casey</span> access to some objects in a specific bucket, I choose <strong>Specific </strong> and choose <strong>Add ARN</strong> under <strong>bucket</strong>.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/14/JC7_1117_a.jpg" /></p> 
<p>In the pop-up, I type the bucket name, <span style="font-family: courier">pmrecruiting2017</span>, and choose <strong>Add</strong> to specify the S3 bucket resource.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/14/JC8_1117.jpg" /></p> 
<p>To specify the objects, I choose <strong>Add ARN</strong> under <strong>object</strong> and grant <span style="font-family: courier">Casey</span> access to all objects starting with <span style="font-family: courier">PM_Candidate</span> in the <span style="font-family: courier">pmrecruiting2017</span> bucket. The visual editor helps you build your <a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" target="_blank" rel="noopener noreferrer">Amazon Resource Name (ARN)</a> and validates that it is structured correctly. For AWS services that are AWS Region specific, the visual editor prompts for AWS Region and account number.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/JC9_1117_a.jpg" /></p> 
<p>The visual editor displays all applicable resources in the <strong>Resources</strong> section based on the actions I choose. For <span style="font-family: courier">Casey</span>,&nbsp;I defined an S3 bucket and object in the <strong>Resources</strong>&nbsp;section. In this example, when the visual editor creates the policy, it&nbsp;creates three statements. The first statement includes all actions that require&nbsp;a wildcard (*) for the <span style="font-family: courier">Resource</span> element because this action does not support resource-level permissions. The second statement includes all S3 actions&nbsp;that support an S3 bucket. The third statement includes all actions that support an S3 object resource. The visual editor generates policy syntax for you based on supported permissions in AWS services.</p> 
<h3>Specify request conditions</h3> 
<p>For <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#use-policy-conditions" target="_blank" rel="noopener noreferrer">additional security</a>, I specify a condition to restrict access to the S3 bucket from inside our internal network. To do this, I choose <strong>Specify request conditions</strong> in the <strong>Request Conditions</strong> section, and choose the&nbsp;<strong>Source IP </strong>check box. A condition is&nbsp;composed of a <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" target="_blank" rel="noopener noreferrer">condition key, an operator, and a value</a>. I choose <span style="font-family: courier">aws:SourceIp</span> for my&nbsp;<strong>Key</strong>&nbsp;so that I can control from where the S3 files can be accessed. By default,&nbsp;<span style="font-family: courier">IpAddress</span>&nbsp;is the&nbsp;<strong>Operator</strong>, and I set the <strong>Value</strong> to my internal network.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/14/JC10.5_1117_a.jpg" /></p> 
<p>To add other conditions, choose <strong>Add condition</strong> and choose <strong>Save changes</strong> after choosing the key, operator, and value.</p> 
<p>After specifying my request condition, I am now able to review all the elements of these S3 permissions.</p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/14/JC10_1117_a.jpg" /></p> 
<p>Next, I can choose to grant permissions for another service by choosing <strong>Add new permissions</strong> (bottom left of preceding screenshot), or I can review and create this new policy. Because I have granted all the permissions <span style="font-family: courier">Casey</span> needs, I choose <strong>Review policy</strong>. I type a name and a description, and I review the policy summary before choosing <strong>Create policy</strong>.<strong>&nbsp;</strong></p> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/JC12-_Reviewpolicy_1117-a.png" /></p> 
<p>Now that I have created the policy, I attach it to <span style="font-family: courier">Casey</span> by choosing the <strong>Attached entities</strong> tab of the policy I just created. I choose <strong>Attach </strong>and&nbsp;choose&nbsp;<strong><span style="font-family: courier">Casey</span></strong>. I then choose <strong>Attach policy</strong>. <span style="font-family: courier">Casey</span> should now be able to access the interview files she needs to review.</p> 
<h3>Summary</h3> 
<p>The visual editor makes it easier to create and modify your IAM policies by guiding you through each element of the policy. The visual editor helps you define resources and request conditions so that you can <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege" target="_blank" rel="noopener noreferrer">grant least privilege</a>&nbsp;and generate policies. To start using the visual editor, sign in to the <a href="https://console.aws.amazon.com/iam/home?#/home" target="_blank" rel="noopener noreferrer">IAM console</a>, navigate to the <strong>Policies</strong> page, and choose <strong>Create policy</strong>.</p> 
<p>If you have comments about this post, submit them in the “Comments” section below. If you have questions about or suggestions for this solution, start a new thread on the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=76" target="_blank" rel="noopener noreferrer">IAM forum</a>.</p> 
<p>– Joy</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5967');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/10/SOC_New_111017_sm.jpg" /> 
<b class="lb-b blog-post-title" property="name headline">Updated AWS SOC Reports Are Now Available with 19 Additional Services in Scope</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Chad Woolf</span></span> | on 
<time property="datePublished" datetime="2017-11-10T16:39:22+00:00">10 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/updated-aws-soc-reports-are-now-available-with-19-additional-services-in-scope/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-5912" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=5912&amp;disqus_title=Updated+AWS+SOC+Reports+Are+Now+Available+with+19+Additional+Services+in+Scope&amp;disqus_url=https://aws.amazon.com/blogs/security/updated-aws-soc-reports-are-now-available-with-19-additional-services-in-scope/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5912');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/10/SOC_New_111017_sm.jpg" /></p> 
<p>Newly updated reports are available for AWS System and Organization Control Report 1 (SOC 1), formerly called AWS Service Organization Control Report 1, and AWS SOC 2: Security, Availability, &amp; Confidentiality Report. You can download both reports for free and on demand in the <a href="https://console.aws.amazon.com/console/home" target="_blank" rel="noopener noreferrer">AWS Management Console</a> through <a href="https://console.aws.amazon.com/artifact/home" target="_blank" rel="noopener noreferrer">AWS Artifact</a>. The updated <a href="https://d1.awsstatic.com/whitepapers/compliance/AWS_SOC3.pdf" target="_blank" rel="noopener noreferrer">AWS SOC 3: Security, Availability, &amp; Confidentiality Report</a> also was just released. All three reports cover April 1, 2017, through September 30, 2017.</p> 
<p>With the addition of the following 19 services, AWS now supports 51 SOC-compliant AWS services and is committed to&nbsp;increasing the number:</p> 
<li>Amazon API Gateway</li> 
<li>Amazon Cloud Directory</li> 
<li>Amazon CloudFront</li> 
<li>Amazon Cognito</li> 
<li>Amazon Connect</li> 
<li>AWS Directory Service for Microsoft Active Directory</li> 
<li>Amazon EC2 Container Registry</li> 
<li>Amazon EC2 Container Service</li> 
<li>Amazon EC2 Systems Manager</li> 
<li>Amazon Inspector</li> 
<li>AWS IoT Platform</li> 
<li>Amazon Kinesis Streams</li> 
<li>AWS Lambda</li> 
<li>AWS Lambda@Edge</li> 
<li>AWS Managed Services</li> 
<li>Amazon S3 Transfer Acceleration</li> 
<li>AWS Shield</li> 
<li>AWS Step Functions</li> 
<li>AWS WAF</li> 
<p>With this release, we also are introducing&nbsp;a separate spreadsheet, eliminating the need to extract the information from multiple PDFs.</p> 
<p>If you are not yet an AWS customer, contact <a href="https://pages.awscloud.com/compliance-contact-us.html">AWS Compliance</a> to access the SOC Reports.</p> 
<p>– Chad</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5912');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/webinar_banner1.png" /> 
<b class="lb-b blog-post-title" property="name headline">Now Better Together! Register for and Attend this November 15 Tech Talk: “How to Integrate AWS Directory Service with Office 365”</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><a href="https://aws.amazon.com/blogs/security/author/clieb/" title="Posts by Craig Liebendorfer" property="name">Craig Liebendorfer</a></span> | on 
<time property="datePublished" datetime="2017-11-08T11:01:47+00:00">08 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-directory-service/" title="View all posts in AWS Directory Service*"><span property="articleSection">AWS Directory Service*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/events/" title="View all posts in Events*"><span property="articleSection">Events*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/now-better-together-register-for-and-attend-this-november-15-tech-talk-how-to-integrate-aws-directory-service-with-office-365/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-5900" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=5900&amp;disqus_title=Now+Better+Together%21+Register+for+and+Attend+this+November+15+Tech+Talk%3A+%26%238220%3BHow+to+Integrate+AWS+Directory+Service+with+Office+365%26%238221%3B&amp;disqus_url=https://aws.amazon.com/blogs/security/now-better-together-register-for-and-attend-this-november-15-tech-talk-how-to-integrate-aws-directory-service-with-office-365/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5900');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p><img width="100%" src="https://d0.awsstatic.com/Digital%20Marketing/Webinar/webinar_banner.png" /></p> 
<p><strong>Update:</strong> The <a href="https://nam03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DgSXLxqnjUSA&amp;data=02%7C01%7Cclieb%40live.com%7Cbc30a13f707e4643086508d52d1ae77a%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C636464515929469040&amp;sdata=t%2B4TpBSK74qhk%2FPXKc3B4CqyXg08fKBys7txUbWkY4%3D&amp;reserved=0" target="_blank" rel="noopener noreferrer">on-demand recording</a> and <a href="https://nam03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.slideshare.net%2FAmazonWebServices%2Fhow-to-integrate-aws-directory-service-with-office365-aws-online-tech-talks%3Fqid%3Df7853243-ae28-4771-b44a-b826085a40ef%26v%3D%26b%3D%26from_search%3D1&amp;data=02%7C01%7Cclieb%40live.com%7Cbc30a13f707e4643086508d52d1ae77a%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C636464515929469040&amp;sdata=a%2FcFqi6CCLKSgHoG9AieIwWgFJVzsCQeSFvQEipvcH8%3D&amp;reserved=0" target="_blank" rel="noopener noreferrer">slide deck</a> are now available.</p> 
<hr /> 
<p>As part of the AWS Online Tech Talks series, AWS will present&nbsp;<a href="https://pages.awscloud.com/registration_111517_How-to-Integrate-AWS-Directory-Service-with-Office365.html" target="_blank" rel="noopener noreferrer">How to Integrate AWS Directory Service with Office 365</a>&nbsp;on Wednesday, November 15. This tech talk will start at 9:00 A.M. Pacific Time and end at 9:40 A.M. Pacific Time.</p> 
<p>If you want to support Active Directory–aware workloads in AWS and Office 365 simultaneously using a managed Active Directory in the cloud, you need a nonintuitive integration to synchronize identities between deployments. AWS has recently introduced the ability for you to authenticate your Office 365 permissions using AWS Directory Service for Microsoft Active Directory (AWS Managed Microsoft AD) by using a custom configuration of Active Directory Federation Services (AD FS). In this webinar, AWS Directory Service Product Manager Ron Cully shows how to configure your AWS Managed Microsoft AD environment to synchronize with Office 365. He will provide detailed configuration settings, architectural considerations, and deployment steps for a highly available, secure, and easy-to-manage solution in the AWS Cloud.</p> 
<p>You also will learn how to:</p> 
<li>Deploy AWS Managed Microsoft AD.</li> 
<li>Deploy Microsoft Azure AD Connect and AD FS with AWS Managed Microsoft AD.</li> 
<li>Authenticate user access to Office 365 by using AWS Managed Microsoft AD.</li> 
<p>This tech talk is free.&nbsp;<a href="https://pages.awscloud.com/registration_111517_How-to-Integrate-AWS-Directory-Service-with-Office365.html" target="_blank" rel="noopener noreferrer">Register today</a>.</p> 
<p>–&nbsp;Craig</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5900');
});
</script> 
</article> 
<article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
<meta property="inLanguage" content="en-US" /> 
<meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/11/15/HIPAA1.png" /> 
<b class="lb-b blog-post-title" property="name headline">Amazon ElastiCache for Redis Is Now a HIPAA Eligible Service and You Can Use It to Power Real-Time Healthcare Applications</b> 
<footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
by 
<span property="author" typeof="Person"><span property="name">Manan Goel</span></span> | on 
<time property="datePublished" datetime="2017-11-02T15:45:47+00:00">02 NOV 2017</time> | in 
<span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/database/amazon-elasticache/" title="View all posts in Amazon ElastiCache*"><span property="articleSection">Amazon ElastiCache*</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/compliance/" title="View all posts in Compliance*"><span property="articleSection">Compliance*</span></a></span> | 
<a href="https://aws.amazon.com/blogs/security/now-you-can-use-amazon-elasticache-for-redis-a-hipaa-eligible-service-to-power-real-time-healthcare-applications/" property="url">Permalink</a> | 
<a id="aws-comment-trigger-5825" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=5825&amp;disqus_title=Amazon+ElastiCache+for+Redis+Is+Now+a+HIPAA+Eligible+Service+and+You+Can+Use+It+to+Power+Real-Time+Healthcare+Applications&amp;disqus_url=https://aws.amazon.com/blogs/security/now-you-can-use-amazon-elasticache-for-redis-a-hipaa-eligible-service-to-power-real-time-healthcare-applications/" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5825');
});
</script> | 
<a href="#" role="button" data-share-dialog-toggle=""><span class="span icon-share"></span>&nbsp;Share</a> 
</footer> 
<p style="text-align: center"><img width="100%" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/10/30/HIPAA.png" /></p> 
<p><a href="https://aws.amazon.com/elasticache/redis/" target="_blank" rel="noopener noreferrer">Amazon ElastiCache for Redis</a> is now a <a href="https://aws.amazon.com/compliance/hipaa-eligible-services-reference/" target="_blank" rel="noopener noreferrer">HIPAA Eligible Service</a> and has been added to the <a href="https://aws.amazon.com/compliance/hipaa-compliance/" target="_blank" rel="noopener noreferrer">AWS Business Associate Addendum</a> (BAA). This means you can use ElastiCache for Redis to help you power healthcare applications as well as process, maintain, and store protected health information (PHI). ElastiCache for Redis is a Redis-compatible, fully-managed, in-memory data store and cache in the cloud that provides sub-millisecond latency to power applications. Now you can use the speed, simplicity, and flexibility of ElastiCache for Redis to build secure, fast, and internet-scale healthcare applications.</p> 
<p>ElastiCache for Redis with HIPAA eligibility is available for all current-generation instance node types and requires <a href="http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/SelectEngine.RedisVersions.html#SelectEngine.RedisVersions.RedisVersions.3-2-6" target="_blank" rel="noopener noreferrer">Redis engine version 3.2.6</a>. You must ensure that nodes are configured to encrypt the data <a href="http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/in-transit-encryption.html#in-transit-encryption-enable" target="_blank" rel="noopener noreferrer">in transit</a> and <a href="http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/at-rest-encryption.html#at-rest-encryption-enable" target="_blank" rel="noopener noreferrer">at rest</a>, and to authenticate Redis commands before the engine executes them. See&nbsp;<a href="https://d0.awsstatic.com/whitepapers/compliance/AWS_HIPAA_Compliance_Whitepaper.pdf" target="_blank" rel="noopener noreferrer">Architecting for HIPAA Security and Compliance on Amazon Web Services</a> for information about how to configure Amazon HIPAA Eligible Services to store, process, and transmit PHI.</p> 
<p>ElastiCache for Redis uses <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" target="_blank" rel="noopener noreferrer">Advanced Encryption Standard</a> (AES)-512 symmetric keys to encrypt data on disk. The Redis backups stored in <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a> are encrypted with <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingServerSideEncryption.html" target="_blank" rel="noopener noreferrer">server-side encryption</a> (SSE) using AES-256 symmetric keys. ElastiCache for Redis uses <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank" rel="noopener noreferrer">Transport Layer Security</a> (TLS) to encrypt data in transit. It uses the Redis AUTH token that you provide at the time of Redis cluster creation to authenticate the Redis commands coming from clients. The AUTH token is encrypted using <a href="https://aws.amazon.com/kms/" target="_blank" rel="noopener noreferrer">AWS Key Management Service</a>.</p> 
<p>There is no additional charge for using ElastiCache for Redis clusters with HIPAA eligibility. To get started, see <a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/elasticache-compliance-hipaa.html" target="_blank" rel="noopener noreferrer">HIPAA Compliance for Amazon ElastiCache for Redis</a>.</p> 
<p>– Manan</p> 
<script>
require(['blog'], function() {
AWS.Blog.commenting('#aws-comment-trigger-5825');
});
</script> 
</article> 
<p>
© 2018 Amazon Web Services, Inc. or its affiliates. All rights reserved.
</p>

    </div>
  </div>
</div>


    <div id="footer" class="navigation hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <ul class="footer-links nav navbar-nav">
              <li><a href="../aws.html">AWS</a></li>
              <li><a href="../linux.html">Linux</a></li>
              <li><a href="../docker.html">Docker</a></li>
              <li><a href="../ibmpower.html">IBM Power</a></li>
              <li><a href="blogsataws1.html">Blogs@AWS (Kindle Friendly)</a></li>
            </ul>
            <ul class="footer-links nav navbar-nav navbar-right">
              <li><a href="../comments.html">Comments?</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
